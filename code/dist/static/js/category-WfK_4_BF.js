import{i as s}from"./comm-DyJRlPK0.js";import{u as B}from"./group-prLr1yEF.js";import"./index-Ghdj5350.js";import"./store@2.0.12-RoMfFez2.js";import{u as E}from"./index-BEUtcyhA.js";import"./@wangeditor_plugin-link-card@1.0.0_@wangeditor_editor@5.1.23_snabbdom@3.6.2-D_kdJ7Fs.js";import"./@wangeditor_editor@5.1.23-BNs7_II4.js";import{d as w,w as G,i as o,_ as r,a as c,c as D,L as p,K as h,P as u}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{n as P,r as d,v as S}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import{O as z}from"./@vue_shared@3.5.12-UFe9jxSY.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import"./lodash-es@4.17.21-D6PnhKvy.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./@vueuse_core@11.1.0_vue@3.5.12_typescript@5.5.4_-BKaerpSy.js";import"./@vueuse_shared@11.1.0_vue@3.5.12_typescript@5.5.4_-DXriuop5.js";import"./mitt@3.0.1-C1z4c41a.js";import"./axios@1.7.7-CCb-kr4I.js";import"./nprogress@0.2.0-B8S133N7.js";import"./pinia@2.2.4_typescript@5.5.4_vue@3.5.12_typescript@5.5.4_-CVf9nHlw.js";import"./vue-demi@0.14.10_vue@3.5.12_typescript@5.5.4_-DvPnGcuI.js";import"./@bytemd_plugin-math@1.21.0_bytemd@1.21.0-Dc_JUVYX.js";import"./remark-math@5.1.1-C8vps_rM.js";import"./micromark-extension-math@2.1.2-StTlgfH1.js";import"./micromark-factory-space@1.1.0-C57A7NS2.js";import"./micromark-util-character@1.2.0-D-NaLusr.js";import"./katex@0.16.11-CvgdMzdh.js";import"./mdast-util-math@2.0.2-Boy2OOKg.js";import"./longest-streak@3.1.0-BHNUWYJP.js";import"./mdast-util-to-markdown@1.5.0-D9VzXa1u.js";import"./micromark-util-decode-string@1.1.0-CdHYbWAu.js";import"./decode-named-character-reference@1.0.2-C3-224fz.js";import"./micromark-util-decode-numeric-character-reference@1.1.0-DRnCnno4.js";import"./vue-router@4.4.5_vue@3.5.12_typescript@5.5.4_-DGEeQixy.js";import"./mockjs@1.1.0-hXCvQ4kl.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.12_echarts@5.5.1_vue@3.5.12_typescript@5.5.4_-tmE62Ovn.js";import"./echarts@5.5.1-D8FyPvXx.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.0-CH1asNwC.js";const K={class:"cl-goods-category"},L=w({name:"goods-category"}),Ae=w({...L,setup(R){const{service:_,refs:j,setRefs:A}=E();P({page:1,size:20,total:0});const g=d([]),{ViewGroup:f}=B({label:"一级分类",title:"二级分类",service:_.goods.category,data:{parentCategoryId:0},onData(e){return e.sort((t,l)=>t.sortOrder-l.sortOrder),g.value=e,e.map(t=>({...t}))},onEdit(){return{width:"500px",props:{labelPosition:"top"},dialog:{controls:["close"]},items:[{label:"名称",prop:"categoryName",value:"",required:!0,component:{name:"el-input",props:{placeholder:"请输入分类名称",maxlength:20,clearable:!0}}},{label:"排序",prop:"sortOrder",value:0,component:{name:"el-input-number",props:{defaultValue:0,placeholder:"请输入排序",clearable:!0}}},{label:"状态",prop:"status",value:0,component:{name:"el-switch",props:{activeValue:1,inactiveValue:0}}}]}},onSelect(e){V({parentCategoryId:e.id,page:1})}}),C=s.useUpsert({dialog:{width:"500px"},onOpened(e){var t,l;e.parentCategoryId=(l=(t=f.value)==null?void 0:t.selected)==null?void 0:l.id},items:[{label:"名称",prop:"categoryName",component:{name:"el-input",props:{placeholder:"请输入二级分类名称"}},required:!0},{label:"一级分类",prop:"parentCategoryId",required:!0,component:{vm:{name:"custom-select",props:{modelValue:Number},setup(e,{emit:t}){const l=d(),m=d(!0);return G(()=>e.modelValue,a=>{l.value=a},{immediate:!0}),{loading:m,value:l,onChange(a){t("update:modelValue",a)}}},render(e){return o(r("cl-select"),{"label-key":"categoryName","value-key":"id",options:g,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onChange:e.onChange},null)}}}},{label:"排序",prop:"sortOrder",value:0,required:!0,component:{name:"el-input-number",props:{placeholder:"请输入排序号"}}},{label:"状态",prop:"status",component:{name:"el-switch",props:{activeValue:1,inactiveValue:0}}}]}),b=s.useTable({columns:[{type:"selection"},{label:"名称",prop:"categoryName"},{label:"排序",prop:"sortOrder"},{label:"状态",prop:"status",dict:[{label:"开启",value:1,type:"primary"},{label:"关闭",value:0,type:"danger"}]},{label:"更新时间",prop:"updateTime",sortable:!0},{label:"创建时间",prop:"createTime",sortable:!0},{type:"op",buttons:["edit","delete"]}]}),y=s.useCrud({service:_.goods.category},e=>{e.refresh()});function V(e){var t;(t=y.value)==null||t.refresh(e)}return(e,t)=>{const l=r("el-tag"),m=r("cl-refresh-btn"),a=r("cl-add-btn"),k=r("cl-multi-delete-btn"),v=r("cl-flex1"),x=r("cl-column-custom"),N=r("cl-search-key"),i=r("cl-row"),O=r("cl-table"),T=r("cl-upsert"),q=r("cl-pagination"),I=r("cl-crud"),U=r("cl-view-group");return c(),D("div",K,[o(U,{ref_key:"ViewGroup",ref:f},{"item-name":p(({item:n})=>[n.status===0?(c(),h(l,{key:0,type:"warning",style:{"margin-right":"10px"},title:"产品以及前台不会出现此选项"},{default:p(()=>t[0]||(t[0]=[u("关闭")])),_:1})):(c(),h(l,{key:1,type:"success",style:{"margin-right":"10px"}},{default:p(()=>t[1]||(t[1]=[u(" 正常")])),_:1})),u(" "+z(n.categoryName),1)]),right:p(()=>[o(I,{ref_key:"Crud",ref:y},{default:p(()=>[o(i,null,{default:p(()=>{var n;return[o(m),o(a),o(k),o(v),o(x,{columns:(n=S(b))==null?void 0:n.columns},null,8,["columns"]),o(N,{placeholder:"搜索名称"})]}),_:1}),o(i,null,{default:p(()=>[o(O,{ref_key:"Table",ref:b,"row-key":"id"},null,512)]),_:1}),o(T,{ref_key:"Upsert",ref:C},null,512),o(i,null,{default:p(()=>[o(v),o(q)]),_:1})]),_:1},512)]),_:1},512)])}}});export{Ae as default};
