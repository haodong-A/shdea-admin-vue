import{m as g,f as x}from"./micromark-util-character@1.2.0-D-NaLusr.js";import{f as A}from"./fault@2.0.1-D0W5VSFU.js";const k={}.hasOwnProperty,z={yaml:"-",toml:"+"};function O(i){const r=[];let u=-1;const o=Array.isArray(i)?i:i?[i]:["yaml"];for(;++u<o.length;)r[u]=W(o[u]);return r}function W(i){let r=i;if(typeof r=="string"){if(!k.call(z,r))throw A("Missing matter definition for `%s`",r);r={type:r,marker:z[r]}}else if(typeof r!="object")throw A("Expected matter to be an object, not `%j`",r);if(!k.call(r,"type"))throw A("Missing `type` in matter `%j`",r);if(!k.call(r,"fence")&&!k.call(r,"marker"))throw A("Missing `marker` or `fence` in matter `%j`",r);return r}function V(i){const r=O(i),u={};let o=-1;for(;++o<r.length;){const s=r[o],c=E(s,"open").charCodeAt(0),p=v(s),a=u[c];Array.isArray(a)?a.push(p):u[c]=[p]}return{flow:u}}function v(i){const r=i.anywhere,u=i.type,o=u+"Fence",s=o+"Sequence",c=u+"Value",p={tokenize:I,partial:!0};let a,m=0;return{tokenize:T,concrete:!0};function T(t,C,l){const h=this;return S;function S(n){const M=h.now();return M.column===1&&(M.line===1||r)&&(a=E(i,"open"),m=0,n===a.charCodeAt(m))?(t.enter(u),t.enter(o),t.enter(s),y(n)):l(n)}function y(n){return m===a.length?(t.exit(s),g(n)?(t.enter("whitespace"),f(n)):w(n)):n===a.charCodeAt(m++)?(t.consume(n),y):l(n)}function f(n){return g(n)?(t.consume(n),f):(t.exit("whitespace"),w(n))}function w(n){return x(n)?(t.exit(o),t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),a=E(i,"close"),m=0,t.attempt(p,j,e)):l(n)}function e(n){return n===null||x(n)?q(n):(t.enter(c),b(n))}function b(n){return n===null||x(n)?(t.exit(c),q(n)):(t.consume(n),b)}function q(n){return n===null?l(n):(t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),t.attempt(p,j,e))}function j(n){return t.exit(u),C(n)}}function I(t,C,l){let h=0;return S;function S(e){return e===a.charCodeAt(h)?(t.enter(o),t.enter(s),y(e)):l(e)}function y(e){return h===a.length?(t.exit(s),g(e)?(t.enter("whitespace"),f(e)):w(e)):e===a.charCodeAt(h++)?(t.consume(e),y):l(e)}function f(e){return g(e)?(t.consume(e),f):(t.exit("whitespace"),w(e))}function w(e){return e===null||x(e)?(t.exit(o),C(e)):l(e)}}}function E(i,r){return i.marker?F(i.marker,r).repeat(3):F(i.fence,r)}function F(i,r){return typeof i=="string"?i:i[r]}export{V as f,O as m};
