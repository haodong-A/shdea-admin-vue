import"./index-CyAmoSeV.js";import"./store@2.0.12-RoMfFez2.js";import{u as z}from"./index-4ocppgba.js";import"./@wangeditor_plugin-link-card@1.0.0_@wangeditor_editor@5.1.23_snabbdom@3.6.2-D_kdJ7Fs.js";import"./@wangeditor_editor@5.1.23-BNs7_II4.js";import{i as T}from"./comm-DyJRlPK0.js";import{z as _}from"./bytemd@1.21.0-MOao5Iqx.js";import{e as x,v as A}from"./@bytemd_vue-next@1.21.0_vue@3.5.12_typescript@5.5.4_-C3peXcgy.js";import{g as H,z as M}from"./@bytemd_plugin-gfm@1.21.0_bytemd@1.21.0-Df9f0-Zb.js";import{h as P}from"./@bytemd_plugin-highlight-ssr@1.21.0_bytemd@1.21.0-DTMRWq0i.js";import{b as V}from"./@bytemd_plugin-breaks@1.21.0_bytemd@1.21.0-xwGiLpDR.js";import{f as R}from"./@bytemd_plugin-footnotes@1.12.4_bytemd@1.21.0-Al9014sz.js";import{f as E}from"./@bytemd_plugin-frontmatter@1.21.0_bytemd@1.21.0-Tx6LW9FN.js";import{g as Z}from"./@bytemd_plugin-gemoji@1.21.0_bytemd@1.21.0-DCPdkv43.js";import{m as j}from"./@bytemd_plugin-medium-zoom@1.21.0_bytemd@1.21.0-BHyJwS1L.js";import{m as B,z as I}from"./@bytemd_plugin-mermaid@1.21.0_bytemd@1.21.0-CibjXa8R.js";import{m as N,z as q}from"./@bytemd_plugin-math@1.21.0_bytemd@1.21.0-Dc_JUVYX.js";import{h as F,z as G,a as L}from"./@ziuchen_bytemd-plugin-highlight-theme@1.0.6_bytemd@1.21.0-a9drg7s9.js";import{m as U,z as J,t as K}from"./@ziuchen_bytemd-plugin-markdown-theme@1.0.2_bytemd@1.21.0-SabswgQu.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as Q,o as W,w as X,a as Y,c as D,i as $,_ as k}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{r as v}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import"./@vue_shared@3.5.12-UFe9jxSY.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import"./lodash-es@4.17.21-D6PnhKvy.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./@vueuse_core@11.1.0_vue@3.5.12_typescript@5.5.4_-BKaerpSy.js";import"./@vueuse_shared@11.1.0_vue@3.5.12_typescript@5.5.4_-DXriuop5.js";import"./mitt@3.0.1-C1z4c41a.js";import"./axios@1.7.7-CCb-kr4I.js";import"./nprogress@0.2.0-B8S133N7.js";import"./pinia@2.2.4_typescript@5.5.4_vue@3.5.12_typescript@5.5.4_-CVf9nHlw.js";import"./vue-demi@0.14.10_vue@3.5.12_typescript@5.5.4_-DvPnGcuI.js";import"./vue-router@4.4.5_vue@3.5.12_typescript@5.5.4_-DGEeQixy.js";import"./mockjs@1.1.0-hXCvQ4kl.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.12_echarts@5.5.1_vue@3.5.12_typescript@5.5.4_-tmE62Ovn.js";import"./echarts@5.5.1-D8FyPvXx.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.0-CH1asNwC.js";import"./remark-math@5.1.1-C8vps_rM.js";import"./micromark-extension-math@2.1.2-StTlgfH1.js";import"./micromark-factory-space@1.1.0-C57A7NS2.js";import"./micromark-util-character@1.2.0-D-NaLusr.js";import"./katex@0.16.11-CvgdMzdh.js";import"./mdast-util-math@2.0.2-Boy2OOKg.js";import"./longest-streak@3.1.0-BHNUWYJP.js";import"./mdast-util-to-markdown@1.5.0-D9VzXa1u.js";import"./micromark-util-decode-string@1.1.0-CdHYbWAu.js";import"./decode-named-character-reference@1.0.2-C3-224fz.js";import"./micromark-util-decode-numeric-character-reference@1.1.0-DRnCnno4.js";import"./codemirror-ssr@0.65.0_@types_codemirror@5.60.15-6OyHonEd.js";import"./select-files@1.0.1-C0KkWx53.js";import"./word-count@0.2.2-BdtLAoMx.js";import"./tippy.js@6.3.7-CzFFYS-g.js";import"./@popperjs_core@2.11.8-CvwSYPO-.js";import"./rehype-raw@6.1.1-B3PXLyRK.js";import"./hast-util-raw@7.2.3-B5BOZJ2X.js";import"./parse5@6.0.1-DwUr0Yp_.js";import"./html-void-elements@2.0.1-xKVpUWYB.js";import"./web-namespaces@2.0.1-bsVAaBS1.js";import"./zwitch@2.0.4-C2o2j-tx.js";import"./hast-util-from-parse5@7.1.2-B1fYthfZ.js";import"./property-information@6.5.0-CayEAvHG.js";import"./vfile-location@4.1.0-C9EgA9Ru.js";import"./hastscript@7.2.0-CmNs4AMF.js";import"./space-separated-tokens@2.0.2-D7QSIrTI.js";import"./comma-separated-tokens@2.0.3-CRUGqg4f.js";import"./hast-util-parse-selector@3.1.1-TXfch5wI.js";import"./unist-util-visit@4.1.2-CQI2Zplh.js";import"./unist-util-visit-parents@5.1.3-BVjAE6eD.js";import"./unist-util-is@5.2.1-DiTsIWAy.js";import"./unist-util-position@4.0.4-KiAvrw8y.js";import"./hast-util-to-parse5@7.1.0-yobssyVT.js";import"./rehype-sanitize@5.0.1-Cke-Flv1.js";import"./hast-util-sanitize@4.1.0-Gx9bMZif.js";import"./unified@10.1.2-55JpCBO_.js";import"./bail@2.0.2-FqpXQuLt.js";import"./is-buffer@2.0.5-SZK_y6bc.js";import"./extend@3.0.2-CxLID47h.js";import"./is-plain-obj@4.1.0-C1gvLhAf.js";import"./vfile@5.3.7-CRsQMxjz.js";import"./vfile-message@3.1.4-D5CORYC2.js";import"./unist-util-stringify-position@3.0.3-Ch_qCilz.js";import"./trough@2.2.0-B_b8ryxu.js";import"./remark-parse@10.0.2-Cl1PD0wW.js";import"./mdast-util-from-markdown@1.3.1-Ch0ocoA0.js";import"./micromark@3.2.0-BlNIu7Zp.js";import"./micromark-util-combine-extensions@1.1.0-B4FRL3HR.js";import"./micromark-util-chunked@1.1.0-DrRIdSP-.js";import"./micromark-core-commonmark@1.1.0-DsNB-gXs.js";import"./micromark-util-classify-character@1.1.0-Bznx_M8a.js";import"./micromark-util-resolve-all@1.1.0-PQCKh0dx.js";import"./micromark-util-subtokenize@1.1.0-Bno4aDYn.js";import"./micromark-factory-destination@1.1.0-CIDBLnlA.js";import"./micromark-factory-label@1.1.0-DLDreeYE.js";import"./micromark-factory-title@1.1.0-Tund6-WB.js";import"./micromark-factory-whitespace@1.1.0-h7AOC73-.js";import"./micromark-util-normalize-identifier@1.1.0-C9ANKk3v.js";import"./micromark-util-html-tag-name@1.2.0-DbKNfynz.js";import"./mdast-util-to-string@3.2.0-C_aolqmU.js";import"./remark-rehype@10.1.0-DZINixA4.js";import"./mdast-util-to-hast@12.3.0-O29xmoNQ.js";import"./micromark-util-sanitize-uri@1.2.0-B1UX-oxd.js";import"./trim-lines@3.0.1-D8znQY54.js";import"./mdast-util-definitions@5.1.2-Cke97nUS.js";import"./unist-util-generated@2.0.1-CMz5gPdA.js";import"./rehype-stringify@9.0.4-DOCsA8kr.js";import"./hast-util-to-html@8.0.4-DLpy2uoL.js";import"./stringify-entities@4.0.4-DxDfRfSp.js";import"./character-entities-legacy@3.0.0-BpoLgcEt.js";import"./character-entities-html4@2.1.0-D7taRCQ7.js";import"./ccount@2.0.1-c2V3InAJ.js";import"./hast-util-whitespace@2.0.1-D1ONPEmv.js";import"./remark-gfm@3.0.1-CJNi2anm.js";import"./micromark-extension-gfm@2.0.3-VeDiI1ZT.js";import"./micromark-extension-gfm-autolink-literal@1.0.5-CJ6Ol-sO.js";import"./micromark-extension-gfm-footnote@1.1.2-3EkMbidP.js";import"./micromark-extension-gfm-strikethrough@1.0.7-CxQL3YfO.js";import"./micromark-extension-gfm-table@1.0.7-D6ArDUPF.js";import"./micromark-extension-gfm-task-list-item@1.0.5-cpmwVfck.js";import"./mdast-util-gfm@2.0.2-B2Ih0Krn.js";import"./mdast-util-gfm-autolink-literal@1.0.3-DyxKhbSt.js";import"./mdast-util-find-and-replace@2.2.2-DZ3yYqB0.js";import"./escape-string-regexp@5.0.0-BaJN9MlJ.js";import"./mdast-util-gfm-footnote@1.0.2-inVCQ3wg.js";import"./mdast-util-gfm-strikethrough@1.0.3-CKLJVn8J.js";import"./mdast-util-gfm-table@1.0.7-rqv4m2I4.js";import"./markdown-table@3.0.4-DvhhVmnL.js";import"./mdast-util-gfm-task-list-item@1.0.2-Cvy15mzE.js";import"./rehype-highlight@6.0.0-BFSBpNom.js";import"./lowlight@2.9.0-Dhn89fBt.js";import"./highlight.js@11.8.0-CusB0NNc.js";import"./fault@2.0.1-D0W5VSFU.js";import"./format@0.2.2-C61CVLH7.js";import"./hast-util-to-text@3.1.2-BBbmj7jJ.js";import"./hast-util-is-element@2.1.3-B5ur3lab.js";import"./unist-util-find-after@4.0.1-Ct9b8BWA.js";import"./remark-breaks@3.0.3-CE2wKI9M.js";import"./mdast-util-newline-to-break@1.0.0-DrXB7RI1.js";import"./js-yaml@4.1.0-CvKA-w4V.js";import"./remark-frontmatter@4.0.1-DpoFoS_Y.js";import"./micromark-extension-frontmatter@1.1.1-BvDOKmUd.js";import"./mdast-util-frontmatter@1.0.1-ClHhy600.js";import"./remark-gemoji@7.0.1-DUl6tYby.js";import"./gemoji@7.1.0-vJmxwnIX.js";function ee(m){let h=new Array,n=new Array,l=new Array,u=new Array,s=new Array,g=new Array,e=m;console.log("转换前的源码："+e);function f(t=""){return t.replace(/\<[\s\S]*?\>/g,"")}function C(t=""){let o=t,i=t.match(/\<li\>/ig).length;for(let r=1;r<=i;r++){let p="[~wrap]";r==1&&(p="[~wrap][~wrap]"),o=o.replace(/\<li\>/i,p+r+". ")}return o=o.replace(/\<\/li\>/,""),o}function b(t=""){let o,i,r,p;return o=t.match(new RegExp(`(?<=src=['"])[\\s\\S]*?(?=['"])`,"i")),i=t.match(new RegExp(`(?<=title=['"])[\\s\\S]*?(?=['"])`,"i")),r=t.match(new RegExp(`(?<=alt=['"])[\\s\\S]*?(?=['"])`,"i")),i=i!=null?` "${i}"`:" ",r=r!="null"?r:" ",p=`![${r}](${o}${i})`,p}function S(t=""){let o=""+t.match(new RegExp(`(?<=href=['"])[\\s\\S]*?(?=['"])`,"i")),i=""+t.match(new RegExp(`(?<=title=['"])[\\s\\S]*?(?=['"])`,"i")),r=""+t.match(new RegExp("(?<=\\<a\\s*[^\\>]*?\\>)[\\s\\S]*?(?=<\\/a>)","i")),p=t.match(/<img\s*[^\>]*?\>[^]*?(<\/img>)?/i),c,d,w;i=i!="null"?` "${i}"`:" ",r=f(r);let y=`[${r}](${o}${i})`;return p!=null&&(c=p[0].match(new RegExp(`(?<=src=['"])[\\s\\S]*?(?=['"])`,"i")),d=p[0].match(new RegExp(`(?<=title=['"])[\\s\\S]*?(?=['"])`,"i")),w=p[0].match(new RegExp(`(?<=alt=['"])[\\s\\S]*?(?=['"])`,"i")),d=d!=null?` "${d}"`:" ",w=w!="null"?w:" ",y=`[![${w}](${c}${d})](${o}${i})`),y}function a(t=null){if(t[0]==null){let r="",p=t[1].length;for(let c=0;c<p;c++)r+=`|${f(t[1][c])}`;r+="|[~wrap]";for(let c=0;c<p;c++)r+="| :------------: ";return r+="|[~wrap]",r}let o=t[0].length,i="";for(let r=0;r<o;r++)i+=`|${f(t[0][r])}`;i+="|[~wrap]";for(let r=0;r<o;r++)i+="| :------------: ";i+="|[~wrap]";for(let r=0;r<t[1].length;){for(let p=0;p<o;p++,r++)i+=`|${f(t[1][r])}`;i+="|[~wrap]"}return i+"[~wrap]"}if(e=e.replace(/<style\s*[^\>]*?\>[^]*?<\/style>/ig,"").replace(/<script\s*[^\>]*?\>[^]*?<\/script>/ig,""),n=e.match(/<pre\s*[^\>]*?\>[^]*?<\/pre>/ig),e=e.replace(new RegExp("(?<=\\<pre\\s*[^\\>]*?\\>)[\\s\\S]*?(?=<\\/pre>)","ig"),"`#preContent#`"),h=e.match(new RegExp("(?<=\\<code\\s*[^\\>]*?\\>)[\\s\\S]*?(?=<\\/code>)","ig")),e=e.replace(new RegExp("(?<=\\<code\\s*[^\\>]*?\\>)[\\s\\S]*?(?=<\\/code>)","ig"),"`#codeContent#`"),g=e.match(/<a\s*[^\>]*?\>[^]*?<\/a>/ig),e=e.replace(/<a\s*[^\>]*?\>[^]*?<\/a>/ig,"`#aContent#`"),s=e.match(/<img\s*[^\>]*?\>[^]*?(<\/img>)?/ig),e=e.replace(/<img\s*[^\>]*?\>[^]*?(<\/img>)?/ig,"`#imgContent#`"),e=e.replace(new RegExp("(?<=\\<[a-zA-Z0-9]*)\\s.*?(?=\\>)","g"),""),e=e.replace(/<h1>/ig,"[~wrap]# ").replace(/<\/h1>/ig,"[~wrap][~wrap]").replace(/<h2>/ig,"[~wrap]## ").replace(/<\/h2>/ig,"[~wrap][~wrap]").replace(/<h3>/ig,"[~wrap]### ").replace(/<\/h3>/ig,"[~wrap][~wrap]").replace(/<h4>/ig,"[~wrap]#### ").replace(/<\/h4>/ig,"[~wrap][~wrap]").replace(/<h5>/ig,"[~wrap]##### ").replace(/<\/h5>/ig,"[~wrap][~wrap]").replace(/<h6>/ig,"[~wrap]###### ").replace(/<\/h6>/ig,"[~wrap][~wrap]"),e=e.replace(/(<br>)/ig,"[~wrap]").replace(/(<\/p>)|(<br\/>)|(<\/div>)/ig,"[~wrap][~wrap]").replace(/(<meta>)|(<span>)|(<p>)|(<div>)/ig,"").replace(/<\/span>/ig,""),e=e.replace(/(<b>)|(<strong>)/ig,"**").replace(/(<\/b>)|(<\/strong>)/ig,"**"),e=e.replace(/(<i>)|(<em>)|(<abbr>)|(<dfn>)|(<cite>)|(<address>)/ig,"*").replace(/(<\/i>)|(<\/em>)|(<\/abbr>)|(<\/dfn>)|(<\/cite>)|(<\/address>)/ig,"*"),e=e.replace(/\<del\>/ig,"~~").replace(/\<\/del\>/ig,"~~"),e=e.replace(/\<blockquote\>/ig,"[~wrap][~wrap]> ").replace(/\<\/blockquote\>/ig,"[~wrap][~wrap]"),e=e.replace(/\<hr\>/ig,"[~wrap][~wrap]------[~wrap][~wrap]"),l=e.match(new RegExp("(?<=\\<table\\s*[^\\>]*?\\>)[\\s\\S]*?(?=<\\/table>)","ig")),e=e.replace(/<table\s*[^\>]*?\>[^]*?<\/table>/ig,"`#tableContent#`"),l!==null){tbodyContent=new Array;for(let t=0;t<l.length;t++)tbodyContent[t]=new Array,tbodyContent[t].push(l[t].match(new RegExp("(?<=\\<th>)[\\s\\S]*?(?=<\\/th?>)","ig"))),tbodyContent[t].push(l[t].match(new RegExp("(?<=\\<td>)[\\s\\S]*?(?=<\\/td?>)","ig")))}if(typeof tbodyContent<"u")for(let t=0;t<tbodyContent.length;t++){let o=a(tbodyContent[t]);e=e.replace(/\`\#tableContent\#\`/i,o)}if(u=e.match(new RegExp("(?<=\\<ol\\s*[^\\>]*?\\>)[\\s\\S]*?(?=<\\/ol>)","ig")),e=e.replace(new RegExp("(?<=\\<ol\\s*[^\\>]*?\\>)[\\s\\S]*?(?=<\\/ol>)","ig"),"`#olContent#`"),u!==null)for(let t=0;t<u.length;t++){let o=C(u[t]);e=e.replace(/\`\#olContent\#\`/i,f(o))}if(e=e.replace(/(<li>)|(<dd>)/ig,"[~wrap] - ").replace(/(<\/li>)|(<\/dd>)/ig,"[~wrap][~wrap]"),e=e.replace(/(<ul>)|(<ol>)/ig,"").replace(/(<\/ul>)|(<\/ol>)/ig,"[~wrap][~wrap]"),s!==null)for(let t=0;t<s.length;t++){let o=b(s[t]);e=e.replace(/\`\#imgContent\#\`/i,o)}if(g!==null)for(let t=0;t<g.length;t++){let o=S(g[t]);e=e.replace(/\`\#aContent\#\`/i,o)}if(e=e.replace(/\[\~wrap\]/ig,`
`).replace(/\n{3,}/g,`

`),h!==null)for(let t=0;t<h.length;t++)e=e.replace(/\`\#codeContent\#\`/i,f(h[t]));if(e=e.replace(/\<code\>/ig," ` ").replace(/\<\/code\>/ig," ` "),n!==null)for(let t=0;t<n.length;t++){let o=n[t].match(new RegExp(`(?<=language-).*?(?=[\\s'"])`,"i")),i=f(n[t]);i=i.replace(/^1\n2\n(\d+\n)*/,""),o=o!=null&&o[0]!="undefined"?o[0]+`
`:`
`,e=e.replace(/\`\#preContent\#\`/i,o+i)}return e=e.replace(/\<pre\>/ig,"```").replace(/\<\/pre\>/ig,"\n```\n"),e=f(e),e=e.replace(/\&lt\;/ig,"<").replace(/\&gt\;/ig,">"),e=e.replace(/^\n{1,}/i,""),e}function te(){return console.log("html2mdPlugin"),{editorEffect({editor:m}){m.on("paste",(h,n)=>{n.preventDefault(),console.log("paste",h,n);const l=n.clipboardData,u=l==null?void 0:l.getData("text/html"),s=l==null?void 0:l.getData("text/plain");if(!u)return h.replaceSelection(s);const g=ee(u);h.replaceSelection(g)})}}}const re=[H({locale:M}),P(),V(),E(),R(),Z(),j(),N({locale:q}),B({locale:I}),U({locale:J,themes:K,defaultTheme:"channing-cyan"}),F({locale:G,highlights:L,defaultHighlight:"xcode"}),te()],oe=Q({name:"cl-byte-md",components:{Editor:x,Viewer:A},props:{modelValue:String},emits:["update:modelValue"],setup(m,{emit:h}){const{refs:n,setRefs:l}=z(),u=v(!1),s=v(""),g=v(),e=()=>({actions:[{title:"选择图片",icon:'<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" class="arco-icon arco-icon-file-image" stroke-width="4" stroke-linecap="butt" stroke-linejoin="miter" filter="" data-v-249840b0="" style="font-size: 32px;"><path d="m26 33 5-6v6h-5Zm0 0-3-4-4 4h7Zm11 9H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2ZM17 19h1v1h-1v-1Z"></path></svg>',handler:{type:"action",click:a=>{g.value=a,n.image.open()}}}]}),f=[...re,e()],C=a=>{const{editor:t,appendBlock:o,codemirror:i}=g.value;n.image.close();const r=o(a.map(({url:p,alt:c,title:d},w)=>(c=c??a[w].name,`![${c}](${p}${d?` "${d}"`:""})`)).join(`

`)+`
`);t.setSelection(r,i.Pos(r.line+a.length*2-2)),t.focus()},b=a=>{console.log(a),T.ContextMenu.open(a,{hover:{target:"item-file__wrap"},list:[{label:"预览",callback(t){preview(),t()}},{label:"复制链接",callback(t){info.value.url&&(copy(info.value.url),ElMessage.success("复制成功")),t()}},{label:isSelected.value?"取消选中":"选中",callback(t){select(),t()}},{label:"删除",callback(t){remove(),t()}}]})};return W(()=>{s.value=m.modelValue}),X(()=>m.modelValue,a=>{s.value=a}),{refs:n,setRefs:l,value:s,editPlugins:f,zhHans:_,handleChange:a=>{h("update:modelValue",a),s.value=a},onFileConfirm:C,onContextMenu:b,show:u,editerCtx:g}}}),ie={class:"details"};function pe(m,h,n,l,u,s){const g=k("editor"),e=k("cl-upload-space");return Y(),D("div",ie,[$(g,{ref:m.setRefs("mdEditor"),class:"editos",value:m.value,plugins:m.editPlugins,locale:m.zhHans,onChange:m.handleChange},null,8,["value","plugins","locale","onChange"]),$(e,{ref:m.setRefs("image"),accept:"image/*","show-btn":!1,onConfirm:m.onFileConfirm},null,8,["onConfirm"])])}const io=O(oe,[["render",pe]]);export{io as default};
