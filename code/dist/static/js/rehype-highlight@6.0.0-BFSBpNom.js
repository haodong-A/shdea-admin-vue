import{l as c}from"./lowlight@2.9.0-Dhn89fBt.js";import{v as w}from"./unist-util-visit@4.1.2-CQI2Zplh.js";import{t as f}from"./hast-util-to-text@3.1.2-BBbmj7jJ.js";const v={}.hasOwnProperty;function j(g={}){const{aliases:s,languages:t,prefix:e,plainText:p,ignoreMissing:u,subset:m,detect:y}=g;let h="hljs";if(s&&c.registerAlias(s),t){let r;for(r in t)v.call(t,r)&&c.registerLanguage(r,t[r])}if(e){const r=e.indexOf("-");h=r>-1?e.slice(0,r):e}return(r,N)=>{w(r,"element",(i,k,A)=>{const n=A;if(!n||!("tagName"in n)||n.tagName!=="pre"||i.tagName!=="code"||!i.properties)return;const a=d(i);if(a===!1||!a&&!y||a&&p&&p.includes(a))return;Array.isArray(i.properties.className)||(i.properties.className=[]),i.properties.className.includes(h)||i.properties.className.unshift(h);let l;try{l=a?c.highlight(a,f(n),{prefix:e}):c.highlightAuto(f(n),{prefix:e,subset:m})}catch(x){const o=x;(!u||!/Unknown language/.test(o.message))&&N.fail(o,i,"rehype-highlight:missing-language");return}!a&&l.data.language&&i.properties.className.push("language-"+l.data.language),Array.isArray(l.children)&&l.children.length>0&&(i.children=l.children)})}}function d(g){const s=g.properties&&g.properties.className;let t=-1;if(Array.isArray(s))for(;++t<s.length;){const e=String(s[t]);if(e==="no-highlight"||e==="nohighlight")return!1;if(e.slice(0,5)==="lang-")return e.slice(5);if(e.slice(0,9)==="language-")return e.slice(9)}}export{j as r};
