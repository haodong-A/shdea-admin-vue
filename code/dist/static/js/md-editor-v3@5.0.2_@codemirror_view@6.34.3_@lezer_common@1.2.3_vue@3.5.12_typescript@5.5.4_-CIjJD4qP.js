import{U as lt,M as $o,u as To,k as zl,x as So,I as xo,C as Eo,$ as Ao}from"./@vavt_util@2.1.0-D0iSl322.js";import{d as j,y as A,i as u,w as _,o as G,A as he,T as ot,F as Ie,C as ie,b as Q,a1 as _o,n as de,V as Io,k as Ul,E as Lo}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{n as ee,r as R,B as ue,s as ve}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import Ho from"./medium-zoom@1.1.0-CJb2YpQG.js";import{c as Fo}from"./copy-to-clipboard@3.3.3-dKgYEXPT.js";import{M as Ro}from"./markdown-it@14.1.0-D5JcBv3I.js";import{r as Mo}from"./markdown-it-image-figures@2.1.1_markdown-it@14.1.0-BD49Kf-b.js";import{s as No}from"./markdown-it-sub@2.0.0-Bxi31R0z.js";import{s as Po}from"./markdown-it-sup@2.0.0-Bp2DoVCN.js";import{L as Oo}from"./lru-cache@11.0.2-DmfXgoGS.js";import{B as Bo,U as Do,I as jo,S as Vo,H as Wo,a as zo,b as Uo,Q as Go,L as qo,c as Xo,d as Ko,C as Yo,e as ul,f as Zo,g as Qo,T as Jo,R as en,F as tn,h as ln,M as on,i as nn,j as an,E as rn,V as sn,k as cn,l as un,m as dn,n as mn,o as fn,X as gn,p as vn,q as hn,r as pn}from"./lucide-vue-next@0.453.0_vue@3.5.12_typescript@5.5.4_-CXWc0gAD.js";import{E as me,k as bn,d as yn,p as kn}from"./@codemirror_view@6.34.3-jfwbSA-b.js";import{l as wn}from"./@codemirror_language-data@6.5.1_@codemirror_view@6.34.3-D3Wnd_tf.js";import{markdown as Cn}from"./@codemirror_lang-markdown@6.3.1-CG-4KkiA.js";import{j as Ye,E as $e,o as ke,a as $n}from"./@codemirror_state@6.4.1-BMFlvjVs.js";import{h as dl,u as Tn,r as Sn,d as xn,a as En,i as An,b as _n}from"./@codemirror_commands@6.7.1-gj6JYPhV.js";import{H as Gl,u as ql,i as In}from"./@codemirror_language@6.10.3-bWXGUccf.js";import{t as w}from"./@lezer_highlight@1.2.1-DwVMghhY.js";import{a as Ln}from"./@codemirror_autocomplete@6.18.3_@codemirror_language@6.10.3_@codemirror_state@6.4.1_@codemirr_sx5w6mvzjgorrxc7ihdhoe7raa-7aJcrDyA.js";import{s as Hn}from"./@codemirror_search@6.5.7-CkdcjtOD.js";const s="md-editor",D="https://unpkg.com",Fn=`${D}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,ml={main:`${D}/prettier@3.3.3/standalone.js`,markdown:`${D}/prettier@3.3.3/plugins/markdown.js`},Rn={css:`${D}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${D}/cropperjs@1.6.2/dist/cropper.min.js`},Mn=`${D}/screenfull@5.2.0/dist/screenfull.js`,Nn=`${D}/mermaid@11.3.0/dist/mermaid.min.js`,Pn={js:`${D}/katex@0.16.11/dist/katex.min.js`,css:`${D}/katex@0.16.11/dist/katex.min.css`},nt={a11y:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},Xl=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Kl=["markdownTotal","=","scrollSwitch"],fl={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},X={editorExtensions:{highlight:{js:Fn,css:nt},prettier:{standaloneJs:ml.main,parserMarkdownJs:ml.markdown},cropper:{...Rn},screenfull:{js:Mn},mermaid:{js:Nn},katex:{...Pn}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,l)=>l,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},Le=170,oe=({instance:e,ctx:l,props:t={}},o="default")=>{const n=(e==null?void 0:e.$slots[o])||(l==null?void 0:l.slots[o]);return(n?n(e):"")||t[o]},On={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"}},we=j({name:`${s}-dropdown`,props:On,setup(e,l){const t=`${s}-dropdown-hidden`,o=ee({overlayClass:[t],overlayStyle:{},triggerHover:!1,overlayHover:!1}),n=R(),a=R(),d=()=>{var i,r;o.triggerHover=!0;const g=n.value,v=a.value;if(!g||!v)return;const y=g.getBoundingClientRect(),k=g.offsetTop,b=g.offsetLeft,p=y.height,h=y.width,$=g.getRootNode(),C=((i=$.querySelector(e.relative))==null?void 0:i.scrollLeft)||0,S=((r=$.querySelector(e.relative))==null?void 0:r.clientWidth)||0;let x=b-v.offsetWidth/2+h/2-C;x+v.offsetWidth>C+S&&(x=C+S-v.offsetWidth),x<0&&(x=0),o.overlayStyle={...o.overlayStyle,top:k+p+"px",left:x+"px"},e.onChange(!0)},m=()=>{o.overlayHover=!0};_(()=>e.visible,i=>{i?o.overlayClass=o.overlayClass.filter(r=>r!==t):o.overlayClass.push(t)});let f=-1;const c=i=>{n.value===i.target?o.triggerHover=!1:o.overlayHover=!1,clearTimeout(f),f=window.setTimeout(()=>{!o.overlayHover&&!o.triggerHover&&e.onChange(!1)},10)};return G(()=>{n.value.addEventListener("mouseenter",d),n.value.addEventListener("mouseleave",c),a.value.addEventListener("mouseenter",m),a.value.addEventListener("mouseleave",c)}),he(()=>{n.value.removeEventListener("mouseenter",d),n.value.removeEventListener("mouseleave",c),a.value.removeEventListener("mouseenter",m),a.value.removeEventListener("mouseleave",c)}),()=>{const i=oe({ctx:l}),r=oe({props:e,ctx:l},"overlay"),g=ot(i instanceof Array?i[0]:i,{ref:n,key:"cloned-dropdown-trigger"}),v=u("div",{class:[`${s}-dropdown`,o.overlayClass],style:o.overlayStyle,ref:a},[u("div",{class:`${s}-dropdown-overlay`},[r instanceof Array?r[0]:r])]);return[g,v]}}}),Bn={title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},default:{type:[String,Object],default:void 0}},Ne=j({name:"DropdownToolbar",props:Bn,emits:["onChange"],setup(e,l){const t=A("editorId");return()=>{const o=oe({props:e,ctx:l},"trigger"),n=oe({props:e,ctx:l},"overlay"),a=oe({props:e,ctx:l});return u(we,{relative:`#${t}-toolbar-wrapper`,visible:e.visible,onChange:d=>{e.onChange instanceof Function?e.onChange(d):l.emit("onChange",d)},overlay:n},{default:()=>[u("div",{class:`${s}-toolbar-item`,title:e.title||""},[o,a])]})}}});Ne.install=e=>(e.component(Ne.name,Ne),e);var Dn=Object.defineProperty,jn=(e,l,t)=>l in e?Dn(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,Vn=(e,l,t)=>jn(e,l+"",t);class Wn{constructor(){Vn(this,"pools",{})}remove(l,t,o){const a=this.pools[l]&&this.pools[l][t];a&&(this.pools[l][t]=a.filter(d=>d!==o))}clear(l){this.pools[l]={}}on(l,t){return this.pools[l]||(this.pools[l]={}),this.pools[l][t.name]||(this.pools[l][t.name]=[]),this.pools[l][t.name].push(t.callback),this.pools[l][t.name].includes(t.callback)}emit(l,t,...o){this.pools[l]||(this.pools[l]={});const a=this.pools[l][t];a&&a.forEach(d=>{try{d(...o)}catch(m){console.error(`${t} monitor event exception！`,m)}})}}const T=new Wn,Ue="onSave",rt="changeCatalogVisible",Yl="changeFullscreen",gl="pageFullscreenChanged",vl="fullscreenChanged",hl="previewChanged",pl="previewOnlyChanged",bl="htmlPreviewChanged",yl="catalogVisibleChanged",Pe="buildFinished",pe="errorCatcher",P="replace",Ge="uploadImage",at="openModals",Zl="ctrlZ",Ql="ctrlShiftZ",Ae="catalogChanged",Jl="pushCatalog",st="rerender",eo="eventListener",to="taskStateChanged",kl=(e,l)=>{const t=o=>{const n=e.parentElement||document.body,a=n.offsetWidth,d=n.offsetHeight,{clientWidth:m,clientHeight:f}=document.documentElement,c=o.offsetX,i=o.offsetY,r=v=>{let y=v.x+document.body.scrollLeft-document.body.clientLeft-c,k=v.y+document.body.scrollTop-document.body.clientTop-i;y=y<1?1:y<m-a-1?y:m-a-1,k=k<1?1:k<f-d-1?k:f-d-1,l?l(y,k):(n.style.left=`${y}px`,n.style.top=`${k}px`)};document.addEventListener("mousemove",r);const g=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",g)};document.addEventListener("mouseup",g)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}},se=(e,l,t="")=>{var o;const n=document.getElementById(l.id);if(n)t!==""&&(Reflect.get(window,t)?(o=l.onload)==null||o.call(n,new Event("load")):l.onload&&n.addEventListener("load",l.onload));else{const a={...l};a.onload=null;const d=Un(e,a);l.onload&&d.addEventListener("load",l.onload),document.head.appendChild(d)}},zn=(e,l)=>{const t=document.getElementById(l.id);t==null||t.remove(),se(e,l)},Un=(e,l)=>{const t=document.createElement(e);return Object.keys(l).forEach(o=>{l[o]!==void 0&&(t[o]=l[o])}),t},wl=(()=>{const e=t=>{if(!t)return;const o=t.firstChild;let n=1,a=0,d=0,m=!1,f,c,i,r=1;const g=()=>{o.style.transform=`translate(${a}px, ${d}px) scale(${n})`};t.addEventListener("touchstart",v=>{v.touches.length===1?(m=!0,f=v.touches[0].clientX-a,c=v.touches[0].clientY-d):v.touches.length===2&&(i=Math.hypot(v.touches[0].clientX-v.touches[1].clientX,v.touches[0].clientY-v.touches[1].clientY),r=n)},{passive:!1}),t.addEventListener("touchmove",v=>{if(v.preventDefault(),m&&v.touches.length===1)a=v.touches[0].clientX-f,d=v.touches[0].clientY-c,g();else if(v.touches.length===2){const k=Math.hypot(v.touches[0].clientX-v.touches[1].clientX,v.touches[0].clientY-v.touches[1].clientY)/i,b=n;n=r*(1+(k-1));const p=(v.touches[0].clientX+v.touches[1].clientX)/2,h=(v.touches[0].clientY+v.touches[1].clientY)/2,$=o.getBoundingClientRect(),C=(p-$.left)/b,S=(h-$.top)/b;a-=C*(n-b),d-=S*(n-b),g()}},{passive:!1}),t.addEventListener("touchend",()=>{m=!1}),t.addEventListener("wheel",v=>{v.preventDefault();const y=.02,k=n;v.deltaY<0?n+=y:n=Math.max(.1,n-y);const b=o.getBoundingClientRect(),p=v.clientX-b.left,h=v.clientY-b.top;a-=p/k*(n-k),d-=h/k*(n-k),g()},{passive:!1}),t.addEventListener("mousedown",v=>{m=!0,f=v.clientX-a,c=v.clientY-d}),t.addEventListener("mousemove",v=>{m&&(a=v.clientX-f,d=v.clientY-c,g())}),t.addEventListener("mouseup",()=>{m=!1}),t.addEventListener("mouseleave",()=>{m=!1})};return t=>{t.forEach(o=>{e(o)})}})(),Gn=(e,l="image.png")=>{const t=e.split(","),o=t[0].match(/:(.*?);/);if(o){const n=o[1],a=atob(t[1]);let d=a.length;const m=new Uint8Array(d);for(;d--;)m[d]=a.charCodeAt(d);return new File([m],l,{type:n})}return null},qn=(e,l)=>{if(!e)return e;const t=l.split(`
`),o=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{o.push("<span></span>")}),o.push("</span>"),`<span class="${s}-code-block">${e}</span>${o.join("")}`},Xn=(e,l)=>{if(!e||!l)return 0;const t=e==null?void 0:e.getBoundingClientRect();if(l===document.documentElement)return t.top-l.clientTop;const o=l==null?void 0:l.getBoundingClientRect();return t.top-o.top},Cl=(()=>{let e=0;return()=>++e})(),ce={hljs:`${s}-hljs`,hlcss:`${s}-hlCss`,prettier:`${s}-prettier`,prettierMD:`${s}-prettierMD`,cropperjs:`${s}-cropper`,croppercss:`${s}-cropperCss`,screenfull:`${s}-screenfull`,mermaidM:`${s}-mermaid-m`,mermaid:`${s}-mermaid`,katexjs:`${s}-katex`,katexcss:`${s}-katexCss`},Kn=(e,l)=>{const t=A("editorId"),{noImgZoomIn:o}=e,n=zl(()=>{const a=document.querySelectorAll(`#${t}-preview img:not(.not-zoom):not(.medium-zoom-image)`);a.length!==0&&Ho(a,{background:"#00000073"})});G(()=>{!o&&e.setting.preview&&n()}),_([l,ue(e.setting,"preview")],()=>{!o&&e.setting.preview&&n()})},Yn=(e,l,t)=>{const o=A("editorId"),n=A("rootRef"),a=A("usedLanguageText"),d=()=>{n.value.querySelectorAll(`#${o} .${s}-preview .${s}-code`).forEach(c=>{let i=-1;const r=c.querySelector(`.${s}-copy-button`);r&&(r.onclick=g=>{g.preventDefault(),clearTimeout(i);const y=(c.querySelector("input:checked + pre code")||c.querySelector("pre code")).textContent,k=Fo(e.formatCopiedText(y)),{text:b,successTips:p,failTips:h}=a.value.copyCode,$=k?p:h;r.dataset.isIcon?r.dataset.tips=$:r.innerHTML=$,i=window.setTimeout(()=>{r.dataset.isIcon?r.dataset.tips=b:r.innerHTML=b},1500)})})},m=()=>{de(d)},f=c=>{c&&de(d)};_([l,t],m),_(()=>e.setting.preview,f),_(()=>e.setting.htmlPreview,f),_(()=>a.value,d),G(d)},Zn=e=>{const l=A("highlight"),t=ve(X.editorExtensions.highlight.instance);return G(()=>{e.noHighlight||t.value||(se("link",{...l.value.css,rel:"stylesheet",id:ce.hlcss}),se("script",{...l.value.js,id:ce.hljs,onload(){t.value=window.hljs}},"hljs"))}),_(()=>l.value.css,()=>{e.noHighlight||X.editorExtensions.highlight.instance||zn("link",{...l.value.css,rel:"stylesheet",id:ce.hlcss})}),t},Oe=new Oo({max:1e3,ttl:6e5}),Qn=e=>{const l=A("theme"),t=A("rootRef"),{editorExtensions:o,editorExtensionsAttrs:n,mermaidConfig:a}=X,d=ve(o.mermaid.instance),m=ve(-1),f=()=>{const i=d.value;!e.noMermaid&&i&&(i.initialize(a({startOnLoad:!1,theme:l.value==="dark"?"dark":"default"})),m.value=m.value+1)};return _(()=>l.value,()=>{Oe.clear(),f()}),G(()=>{var i,r;if(e.noMermaid||d.value)return;const g=o.mermaid.js;/\.mjs/.test(g)?(se("link",{...(i=n.mermaid)==null?void 0:i.js,rel:"modulepreload",href:g,id:ce.mermaidM}),import(g).then(v=>{d.value=v.default,f()})):se("script",{...(r=n.mermaid)==null?void 0:r.js,src:g,id:ce.mermaid,onload(){d.value=window.mermaid,f()}},"mermaid")}),{mermaidRef:d,reRenderRef:m,replaceMermaid:async()=>{if(!e.noMermaid&&d.value){const i=t.value.querySelectorAll(`div.${s}-mermaid`),r=document.createElement("div"),g=document.body.offsetWidth>1366?document.body.offsetWidth:1366,v=document.body.offsetHeight>768?document.body.offsetHeight:768;r.style.width=g+"px",r.style.height=v+"px",r.style.position="fixed",r.style.zIndex="-10000",r.style.top="-10000";let y=i.length;y>0&&document.body.appendChild(r),await Promise.allSettled(Array.from(i).map(k=>(async p=>{var h;let $=Oe.get(p.innerText);if(!$){const C=lt();let S={svg:""};try{S=await d.value.render(C,p.innerText,r),$=await e.sanitizeMermaid(S.svg);const x=document.createElement("p");x.className=`${s}-mermaid`,x.setAttribute("data-processed",""),x.innerHTML=$,(h=x.children[0])==null||h.removeAttribute("height"),Oe.set(p.innerText,x.innerHTML),p.dataset.line!==void 0&&(x.dataset.line=p.dataset.line),p.replaceWith(x)}catch{}--y===0&&r.remove()}})(k)))}}}},Jn=e=>{const l=ve(X.editorExtensions.katex.instance);return G(()=>{if(e.noKatex||l.value)return;const{editorExtensions:t}=X;se("script",{src:t.katex.js,id:ce.katexjs,onload(){l.value=window.katex}},"katex"),se("link",{rel:"stylesheet",href:t.katex.css,id:ce.katexcss})}),l},ea=(e,l)=>{const t=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(o,n,a,d,m)=>{const f=o[n],c=f.content.trim();if(f.info==="mermaid"){let i;o[n].map&&o[n].level===0&&(i=o[n].map[0],o[n].attrSet("data-line",String(i)));const r=Oe.get(c);return r?`<p class="${s}-mermaid" ${i!==void 0?"data-line="+i:""} data-processed>${r}</p>`:`<div class="${s}-mermaid" ${i!==void 0?"data-line="+i:""} data-mermaid-theme=${l.themeRef.value}>${c}</div>`}return t(o,n,a,d,m)}},We=(e,l)=>{const t=e.attrs?e.attrs.slice():[];return l.forEach(o=>{const n=e.attrIndex(o[0]);n<0?t.push(o):(t[n]=t[n].slice(),t[n][1]+=` ${o[1]}`)}),t},ta=(e,l)=>{const t=[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}];let o,n,a;for(const d of t)if(e.src.startsWith(d.open,e.pos)){const m=e.pos+d.open.length;for(o=m;(o=e.src.indexOf(d.close,o))!==-1;){for(a=o-1;e.src[a]==="\\";)a-=1;if((o-a)%2===1)break;o+=d.close.length}if(o===-1)return l||(e.pending+=d.open),e.pos=m,!0;if(o-m===0)return l||(e.pending+=d.open+d.close),e.pos=m+d.close.length,!0;if(!l){const f=e.src.slice(m,o);n=e.push("math_inline","math",0),n.markup=d.open,n.content=f}return e.pos=o+d.close.length,!0}return!1},la=(e,l,t,o)=>{const n=[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}];let a,d,m,f,c=!1,i=e.bMarks[l]+e.tShift[l],r=e.eMarks[l];for(const g of n)if(e.src.slice(i,i+g.open.length)===g.open&&e.src.slice(r-g.close.length,r)===g.close){if(i+=g.open.length,a=e.src.slice(i,r),o)return!0;for(a.trim().slice(-g.close.length)===g.close&&(a=a.trim().slice(0,-g.close.length),c=!0),m=l;!c&&(m++,!(m>=t||(i=e.bMarks[m]+e.tShift[m],r=e.eMarks[m],i<r&&e.tShift[m]<e.blkIndent)));)e.src.slice(i,r).trim().slice(-g.close.length)===g.close&&(f=e.src.slice(0,r).lastIndexOf(g.close),d=e.src.slice(i,f),c=!0);e.line=m+1;const v=e.push("math_block","math",0);return v.block=!0,v.content=(a&&a.trim()?a+`
`:"")+e.getLines(l+1,m,e.tShift[l],!0)+(d&&d.trim()?d:""),v.map=[l,e.line],v.markup=g.open,!0}return!1},oa=(e,{katexRef:l})=>{const t=(n,a,d,m,f)=>{const c=n[a],i={attrs:We(c,[["class",`${s}-katex-inline`]])};if(l.value){const r=l.value.renderToString(c.content,X.katexConfig({throwOnError:!1}));return`<span ${f.renderAttrs(i)} data-processed>${r}</span>`}else return`<span ${f.renderAttrs(i)}>${c.content}</span>`},o=(n,a,d,m,f)=>{const c=n[a],i={attrs:We(c,[["class",`${s}-katex-block`]])};if(l.value){const r=l.value.renderToString(c.content,X.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${f.renderAttrs(i)} data-processed>${r}</p>`}else return`<p ${f.renderAttrs(i)}>${c.content}</p>`};e.inline.ruler.before("escape","math_inline",ta),e.block.ruler.after("blockquote","math_block",la,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=t,e.renderer.rules.math_block=o},na=(e,l)=>{l=l||{};const t=3,o=l.marker||"!",n=o.charCodeAt(0),a=o.length;let d="",m="";const f=(i,r,g,v,y)=>{const k=i[r];return k.type==="admonition_open"?i[r].attrPush(["class",`${s}-admonition ${s}-admonition-${k.info}`]):k.type==="admonition_title_open"&&i[r].attrPush(["class",`${s}-admonition-title`]),y.renderToken(i,r,g)},c=i=>{const r=i.trim().split(" ",2);m="",d=r[0],r.length>1&&(m=i.substring(d.length+2))};e.block.ruler.before("code","admonition",(i,r,g,v)=>{let y,k,b,p=!1,h=i.bMarks[r]+i.tShift[r],$=i.eMarks[r];if(n!==i.src.charCodeAt(h))return!1;for(y=h+1;y<=$&&o[(y-h)%a]===i.src[y];y++);const C=Math.floor((y-h)/a);if(C!==t)return!1;y-=(y-h)%a;const S=i.src.slice(h,y),x=i.src.slice(y,$);if(c(x),v)return!0;for(k=r;k++,!(k>=g||(h=i.bMarks[k]+i.tShift[k],$=i.eMarks[k],h<$&&i.sCount[k]<i.blkIndent));)if(n===i.src.charCodeAt(h)&&!(i.sCount[k]-i.blkIndent>=4)){for(y=h+1;y<=$&&o[(y-h)%a]===i.src[y];y++);if(!(Math.floor((y-h)/a)<C)&&(y-=(y-h)%a,y=i.skipSpaces(y),!(y<$))){p=!0;break}}const M=i.parentType,I=i.lineMax;return i.parentType="root",i.lineMax=k,b=i.push("admonition_open","div",1),b.markup=S,b.block=!0,b.info=d,b.map=[r,k],m&&(b=i.push("admonition_title_open","p",1),b.markup=S+" "+d,b.map=[r,k],b=i.push("inline","",0),b.content=m,b.map=[r,i.line-1],b.children=[],b=i.push("admonition_title_close","p",-1),b.markup=S+" "+d),i.md.block.tokenize(i,r+1,k),b=i.push("admonition_close","div",-1),b.markup=i.src.slice(h,y),b.block=!0,i.parentType=M,i.lineMax=I,i.line=k+(p?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=f,e.renderer.rules.admonition_title_open=f,e.renderer.rules.admonition_title_close=f,e.renderer.rules.admonition_close=f},aa=(e,l)=>{e.renderer.rules.heading_open=(t,o)=>{var n;const a=t[o],d=((n=t[o+1].children)==null?void 0:n.reduce((f,c)=>f+(["text","code_inline","math_inline"].includes(c.type)&&c.content||""),""))||"",m=a.markup.length;return l.headsRef.value.push({text:d,level:m}),a.map&&a.level===0&&a.attrSet("id",l.mdHeadingId(d,m,l.headsRef.value.length)),e.renderer.renderToken(t,o,l)},e.renderer.rules.heading_close=(t,o,n,a,d)=>d.renderToken(t,o,n)},ia={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${s}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${s}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`},ra=(e,l)=>typeof l[e]=="string"?l[e]:ia[e],sa=ra,ca=(e,l)=>{const t=e.renderer.rules.fence,o=e.utils.unescapeAll,n=/\[(\w*)(?::([\w ]*))?\]/,a=/::(open|close)/,d=r=>r.info?o(r.info).trim():"",m=r=>{const g=d(r),[v=null,y=""]=(n.exec(g)||[]).slice(1);return[v,y]},f=r=>{const g=d(r);return g?g.split(/(\s+)/g)[0]:""},c=r=>{const g=r.info.match(a)||[],v=g[1]==="open"||g[1]!=="close"&&l.codeFoldable&&r.content.trim().split(`
`).length<l.autoFoldThreshold,y=g[1]||l.codeFoldable?"details":"div",k=g[1]||l.codeFoldable?"summary":"div";return{open:v,tagContainer:y,tagHeader:k}},i=(r,g,v,y,k)=>{var b;if(r[g].hidden)return"";const p=(b=l.usedLanguageTextRef.value)==null?void 0:b.copyCode.text,h=l.customIconRef.value.copy||p,$=!!l.customIconRef.value.copy,C=`<span class="${s}-collapse-tips">${sa("collapse-tips",l.customIconRef.value)}</span>`,[S]=m(r[g]);if(S===null){const{open:z,tagContainer:K,tagHeader:ae}=c(r[g]),le=[["class",`${s}-code`]];z&&le.push(["open",""]);const J={attrs:We(r[g],le)};r[g].info=r[g].info.replace(a,"");const W=t(r,g,v,y,k);return`
        <${K} ${k.renderAttrs(J)}>
          <${ae} class="${s}-code-head">
            <div class="${s}-code-flag"><span></span><span></span><span></span></div>
            <div class="${s}-code-action">
              <span class="${s}-code-lang">${r[g].info.trim()}</span>
              <span class="${s}-copy-button" data-tips="${p}"${$?" data-is-icon=true":""}>${h}</span>
              ${K==="details"?C:""}
            </div>
          </${ae}>
          ${W}
        </${K}>
      `}let x,M,I,E,H="",N="",O="";const{open:B,tagContainer:q,tagHeader:U}=c(r[g]),te=[["class",`${s}-code`]];B&&te.push(["open",""]);const ne={attrs:We(r[g],te)};for(let z=g;z<r.length&&(x=r[z],[M,I]=m(x),M===S);z++){x.info=x.info.replace(n,"").replace(a,""),x.hidden=!0;const K=`${s}-codetab-${l.editorId}-${g}-${z-g}`;E=z-g>0?"":"checked",H+=`
        <li>
          <input
            type="radio"
            id="label-${s}-codetab-label-1-${l.editorId}-${g}-${z-g}"
            name="${s}-codetab-label-${l.editorId}-${g}"
            class="${K}"
            ${E}
          >
          <label
            for="label-${s}-codetab-label-1-${l.editorId}-${g}-${z-g}"
            onclick="this.getRootNode().querySelectorAll('.${K}').forEach(e => e.click())"
          >
            ${I||f(x)}
          </label>
        </li>`,N+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${s}-codetab-pre-${l.editorId}-${g}"
            class="${K}"
            ${E}
            role="presentation">
          ${t(r,z,v,y,k)}
        </div>`,O+=`
        <input
          type="radio"
          name="${s}-codetab-lang-${l.editorId}-${g}"
          class="${K}"
          ${E}
          role="presentation">
        <span class=${s}-code-lang role="note">${f(x)}</span>`}return`
      <${q} ${k.renderAttrs(ne)}>
        <${U} class="${s}-code-head">
          <div class="${s}-code-flag">
            <ul class="${s}-codetab-label" role="tablist">${H}</ul>
          </div>
          <div class="${s}-code-action">
            <span class="${s}-codetab-lang">${O}</span>
            <span class="${s}-copy-button" data-tips="${p}"${$?" data-is-icon=true":""}>${h}</span>
            ${q==="details"?C:""}
          </div>
        </${U}>
        ${N}
      </${q}>
    `};e.renderer.rules.fence=i,e.renderer.rules.code_block=i},$l=(e,l,t)=>{const o=e.attrIndex(l),n=[l,t];o<0?e.attrPush(n):(e.attrs=e.attrs||[],e.attrs[o]=n)},ua=e=>e.type==="inline",da=e=>e.type==="paragraph_open",ma=e=>e.type==="list_item_open",fa=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,ga=(e,l)=>ua(e[l])&&da(e[l-1])&&ma(e[l-2])&&fa(e[l]),va=(e,l)=>{const t=e[l].level-1;for(let o=l-1;o>=0;o--)if(e[o].level===t)return o;return-1},ha=e=>{const l=new e("html_inline","",0);return l.content="<label>",l},pa=e=>{const l=new e("html_inline","",0);return l.content="</label>",l},ba=(e,l,t)=>{const o=new t("html_inline","",0);return o.content='<label class="task-list-item-label" for="'+l+'">'+e+"</label>",o.attrs=[{for:l}],o},ya=(e,l,t)=>{const o=new l("html_inline","",0),n=t.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?o.content='<input class="task-list-item-checkbox"'+n+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(o.content='<input class="task-list-item-checkbox" checked=""'+n+'type="checkbox">'),o},ka=(e,l,t)=>{if(e.children=e.children||[],e.children.unshift(ya(e,l,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),t.label)if(t.labelAfter){e.children.pop();const o="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+o+'">',e.children.push(ba(e.content,o,l))}else e.children.unshift(ha(l)),e.children.push(pa(l))},wa=(e,l={})=>{e.core.ruler.after("inline","github-task-lists",t=>{const o=t.tokens;for(let n=2;n<o.length;n++)ga(o,n)&&(ka(o[n],t.Token,l),$l(o[n-2],"class","task-list-item"+(l.enabled?" enabled":" ")),$l(o[va(o,n-2)],"class","contains-task-list"))})},Ca=e=>{e.core.ruler.push("init-line-number",l=>(l.tokens.forEach(t=>{t.map&&(t.attrs||(t.attrs=[]),t.attrs.push(["data-line",t.map[0].toString()]))}),!0))},$a=(e,l)=>{const{editorConfig:t,markdownItConfig:o,markdownItPlugins:n}=X,a=A("editorId"),d=A("language"),m=A("usedLanguageText"),f=A("showCodeRowNumber"),c=A("theme"),i=A("customIcon"),r=A("rootRef"),g=R([]),v=Zn(e),y=Jn(e),{reRenderRef:k,replaceMermaid:b}=Qn(e),p=Ro({html:!0,breaks:!0,linkify:!0});o(p,{editorId:a});const h=[{type:"image",plugin:Mo,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:na,options:{}},{type:"taskList",plugin:wa,options:{}},{type:"heading",plugin:aa,options:{mdHeadingId:e.mdHeadingId,headsRef:g}},{type:"code",plugin:ca,options:{editorId:a,usedLanguageTextRef:m,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:i}},{type:"sub",plugin:No,options:{}},{type:"sup",plugin:Po,options:{}}];e.noKatex||h.push({type:"katex",plugin:oa,options:{katexRef:y}}),e.noMermaid||h.push({type:"mermaid",plugin:ea,options:{themeRef:c}}),n(h,{editorId:a}).forEach(H=>{p.use(H.plugin,H.options)});const $=p.options.highlight;p.set({highlight:(H,N,O)=>{if($){const U=$(H,N,O);if(U)return U}let B;!e.noHighlight&&v.value?v.value.getLanguage(N)?B=v.value.highlight(H,{language:N,ignoreIllegals:!0}).value:B=v.value.highlightAuto(H).value:B=p.utils.escapeHtml(H);const q=f?qn(B.replace(/^\n+|\n+$/g,""),H.replace(/^\n+|\n+$/g,"")):`<span class="${s}-code-block">${B.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${N}" language=${N}>${q}</code></pre>`}}),Ca(p);const C=R(`_article-key_${lt()}`),S=R(e.sanitize(p.render(e.modelValue))),x=()=>{T.emit(a,Pe,S.value),e.onHtmlChanged(S.value),e.onGetCatalog(g.value),T.emit(a,Ae,g.value),de(()=>{b().then(()=>{wl(r.value.querySelectorAll(`#${a} .${s}-mermaid`))})})},M=()=>{g.value=[],S.value=e.sanitize(p.render(e.modelValue)),x()},I=Q(()=>(e.noKatex||y.value)&&(e.noHighlight||v.value));let E=-1;return _([ue(e,"modelValue"),I,k,d],()=>{E=window.setTimeout(()=>{M()},l?0:t.renderDelay)}),_(()=>e.setting.preview,()=>{e.setting.preview&&de(()=>{b().then(()=>{wl(r.value.querySelectorAll(`#${a} .${s}-mermaid`))}),T.emit(a,Ae,g.value)})}),G(x),G(()=>{T.on(a,{name:Jl,callback(){T.emit(a,Ae,g.value)}}),T.on(a,{name:st,callback:()=>{C.value=`_article-key_${lt()}`,M()}})}),he(()=>{clearTimeout(E)}),{html:S,key:C}},Tl={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},Ta=(e,l)=>{const t=A("editorId"),o=A("rootRef");let n=()=>{};const a=()=>{if(!o.value)return!1;const d=o.value.querySelectorAll(".task-list-item.enabled"),m=f=>{var c;f.preventDefault();const i=f.target.checked?"unChecked":"checked",r=(c=f.target.parentElement)==null?void 0:c.dataset.line;if(!r)return;const g=Number(r),v=e.modelValue.split(`
`),y=v[Number(g)].replace(Tl[i].regexp,Tl[i].value);e.previewOnly?(v[Number(g)]=y,e.onChange(v.join(`
`))):T.emit(t,to,g+1,y)};d.forEach(f=>{f.addEventListener("click",m)}),n=()=>{d.forEach(f=>{f.removeEventListener("click",m)})}};he(()=>{n()}),_([l],()=>{n(),de(a)},{immediate:!0})},lo={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number}},Sa={...lo,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e}},oo=j({name:"ContentPreview",props:lo,setup(e){const l=A("editorId"),t=A("previewTheme"),o=A("showCodeRowNumber"),{html:n,key:a}=$a(e,e.previewOnly);return Yn(e,n,a),Kn(e,n),Ta(e,n),()=>u(Ie,null,[e.setting.preview&&u("div",{id:`${l}-preview-wrapper`,class:`${s}-preview-wrapper`,key:"content-preview-wrapper"},[u("div",{key:a.value,id:`${l}-preview`,class:[`${s}-preview`,`${t==null?void 0:t.value}-theme`,o&&`${s}-scrn`],innerHTML:n.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&u("div",{id:`${l}-html-wrapper`,class:`${s}-preview-wrapper`,key:"html-preview-wrapper"},[u("div",{class:`${s}-html`},[n.value])])])}}),xa=(e,l,t)=>{const{editorId:o}=t,n=ee({buildFinished:!1,html:""});_(()=>e.modelValue,()=>{n.buildFinished=!1}),G(()=>{T.on(o,{name:Pe,callback(a){n.buildFinished=!0,n.html=a}}),T.on(o,{name:Ue,callback(){const a=new Promise(d=>{if(n.buildFinished)d(n.html);else{const m=f=>{d(f),T.remove(o,Pe,m)};T.on(o,{name:Pe,callback:m})}});e.onSave?e.onSave(e.modelValue,a):l.emit("onSave",e.modelValue,a)}})})},no=(e,l)=>{const t=X.editorExtensions.highlight,o=X.editorExtensionsAttrs.highlight,n=Fa(e);ie("editorId",n),ie("rootRef",l),ie("theme",Q(()=>e.theme)),ie("language",Q(()=>e.language)),ie("highlight",Q(()=>{const{js:d}=t,m={...nt,...t.css},{js:f,css:c={}}=o||{},i=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,r=m[e.codeTheme]?m[e.codeTheme][i]:nt.atom[i],g=m[e.codeTheme]&&c[e.codeTheme]?c[e.codeTheme][i]:c.atom?c.atom[i]:{};return{js:{src:d,...f},css:{href:r,...g}}})),ie("showCodeRowNumber",e.showCodeRowNumber);const a=Q(()=>{const d={...fl,...X.editorConfig.languageUserDefined};return $o(To(fl["en-US"]),d[e.language]||{})});return ie("usedLanguageText",a),ie("previewTheme",Q(()=>e.previewTheme)),ie("customIcon",Q(()=>e.customIcon)),{editorId:n}},Ea=(e,l)=>(ie("tabWidth",e.tabWidth),no(e,l)),Aa=e=>{const{noPrettier:l,noUploadImg:t}=e,{editorExtensions:o,editorExtensionsAttrs:n}=X,a=l||o.prettier.prettierInstance,d=l||o.prettier.parserMarkdownInstance,m=t||o.cropper.instance;G(()=>{if(!m){const{js:f={},css:c={}}=n.cropper||{};se("link",{...c,rel:"stylesheet",href:o.cropper.css,id:ce.croppercss}),se("script",{...f,src:o.cropper.js,id:ce.cropperjs})}if(!a){const{standaloneJs:f={}}=n.prettier||{};se("script",{...f,src:o.prettier.standaloneJs,id:ce.prettier})}if(!d){const{parserMarkdownJs:f={}}=n.prettier||{};se("script",{...f,src:o.prettier.parserMarkdownJs,id:ce.prettierMD})}})},_a=(e,l,t)=>{const{editorId:o}=t;G(()=>{T.on(o,{name:pe,callback:n=>{e.onError instanceof Function?e.onError(n):l.emit("onError",n)}})})},Ia=(e,l,t)=>{const{editorId:o}=t,n=ee({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),a=ee({...n}),d=(c,i)=>{const r=i===void 0?!n[c]:i;switch(c){case"preview":{n.htmlPreview=!1,n.previewOnly=!1;break}case"htmlPreview":{n.preview=!1,n.previewOnly=!1;break}case"previewOnly":{r?!n.preview&&!n.htmlPreview&&(n.preview=!0):(a.preview||(n.preview=!1),a.htmlPreview||(n.htmlPreview=!1));break}}a[c]=r,n[c]=r};let m="";const f=()=>{n.pageFullscreen||n.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=m};return _(()=>[n.pageFullscreen,n.fullscreen],f),G(()=>{T.on(o,{name:Ge,callback(c,i){const r=g=>{T.emit(o,P,"image",{desc:"",urls:g}),i==null||i()};e.onUploadImg?e.onUploadImg(c,r):l.emit("onUploadImg",c,r)}}),m=document.body.style.overflow,f()}),[n,d]},La=(e,l)=>{const{editorId:t}=l,o=R(!1);return G(()=>{T.on(t,{name:rt,callback:a=>{a===void 0?o.value=!o.value:o.value=a}})}),Q(()=>!e.toolbarsExclude.includes("catalog")&&e.toolbars.includes("catalog")&&o.value)},Ha=(e,l,t)=>{const{editorId:o,catalogVisible:n,setting:a,updateSetting:d,codeRef:m}=t;_(()=>a.pageFullscreen,c=>{T.emit(o,gl,c)}),_(()=>a.fullscreen,c=>{T.emit(o,vl,c)}),_(()=>a.preview,c=>{T.emit(o,hl,c)}),_(()=>a.previewOnly,c=>{T.emit(o,pl,c)}),_(()=>a.htmlPreview,c=>{T.emit(o,bl,c)}),_(n,c=>{T.emit(o,yl,c)});const f={on(c,i){switch(c){case"pageFullscreen":{T.on(o,{name:gl,callback(r){i(r)}});break}case"fullscreen":{T.on(o,{name:vl,callback(r){i(r)}});break}case"preview":{T.on(o,{name:hl,callback(r){i(r)}});break}case"previewOnly":{T.on(o,{name:pl,callback(r){i(r)}});break}case"htmlPreview":{T.on(o,{name:bl,callback(r){i(r)}});break}case"catalog":{T.on(o,{name:yl,callback(r){i(r)}});break}}},togglePageFullscreen(c){d("pageFullscreen",c)},toggleFullscreen(c){T.emit(o,Yl,c)},togglePreview(c){d("preview",c)},togglePreviewOnly(c){d("previewOnly",c)},toggleHtmlPreview(c){d("htmlPreview",c)},toggleCatalog(c){T.emit(o,rt,c)},triggerSave(){T.emit(o,Ue)},insert(c){T.emit(o,P,"universal",{generate:c})},focus(c){var i;(i=m.value)==null||i.focus(c)},rerender(){T.emit(o,st)},getSelectedText(){var c;return(c=m.value)==null?void 0:c.getSelectedText()},resetHistory(){var c;(c=m.value)==null||c.resetHistory()},domEventHandlers(c){T.emit(o,eo,c)},execCommand(c){T.emit(o,P,c)},getEditorView(){var c;return(c=m.value)==null?void 0:c.getEditorView()}};l.expose(f)},Fa=e=>{const l=_o();return e.id||e.editorId||`${s}-${l}`},Ra=e=>e,ao={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:Ra},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30}},Ma={...ao,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:Xl},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:Kl},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e}},io=["onHtmlChanged","onGetCatalog","onChange","update:modelValue"],Na=[...io,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],Pa=(e,l,t)=>{const{editorId:o}=t,n={rerender(){T.emit(o,st)}};l.expose(n)},Be=j({name:"MdPreview",props:ao,emits:io,setup(e,l){const{noKatex:t,noMermaid:o,noHighlight:n}=e,a=R(),{editorId:d}=no(e,a);return Pa(e,l,{editorId:d}),he(()=>{T.clear(d)}),()=>u("div",{id:d,class:[s,e.class,e.theme==="dark"&&`${s}-dark`,`${s}-previewOnly`],style:e.style,ref:a},[u(oo,{modelValue:e.modelValue,onChange:m=>{e.onChange&&e.onChange(m),l.emit("onChange",m),l.emit("update:modelValue",m)},onHtmlChanged:m=>{e.onHtmlChanged?e.onHtmlChanged(m):l.emit("onHtmlChanged",m)},onGetCatalog:m=>{e.onGetCatalog?e.onGetCatalog(m):l.emit("onGetCatalog",m)},mdHeadingId:e.mdHeadingId,noMermaid:o,sanitize:e.sanitize,noKatex:t,formatCopiedText:e.formatCopiedText,noHighlight:n,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null)])}});Be.install=e=>(e.component(Be.name,Be),e);const Oa=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[u("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),u("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),Ba={bold:Bo,underline:Do,italic:jo,"strike-through":Vo,title:Wo,sub:zo,sup:Uo,quote:Go,"unordered-list":qo,"ordered-list":Xo,task:Ko,"code-row":Yo,code:ul,link:Zo,image:Qo,table:Jo,revoke:en,next:tn,save:ln,prettier:ul,minimize:on,maximize:nn,"fullscreen-exit":an,fullscreen:rn,"preview-only":sn,preview:cn,"preview-html":un,catalog:dn,github:Oa,mermaid:mn,formula:fn,close:gn,delete:vn,upload:hn,"collapse-tips":pn},Da=j({name:`${s}-icon-set`,props:{name:{type:String,default:""}},setup(e){return()=>Ul(Ba[e.name],{class:`${s}-icon`})}}),F=j({name:`${s}-icon`,props:{name:{type:String,default:""}},setup(e){const l=A("customIcon");return()=>{const t=l.value[e.name];return typeof t=="object"?typeof t.component=="object"?Ul(t.component,t.props):u("span",{innerHTML:t.component},null):u(Da,{name:e.name},null)}}}),ja={title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},Te=j({name:"MdModal",props:ja,emits:["onClose"],setup(e,l){const t=A("theme"),o=A("rootRef"),n=R(e.visible),a=R([`${s}-modal`]),d=R(),m=R(),f=R(),c=ve();let i=()=>{};const r=ee({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),g=Q(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});_(()=>e.isFullscreen,k=>{k?i():de(()=>{i=kl(m.value,(b,p)=>{r.initPos.left=b+"px",r.initPos.top=p+"px"})})}),_(()=>e.visible,k=>{k?(r.maskStyle.zIndex=X.editorConfig.zIndex+Cl(),r.modalStyle.zIndex=X.editorConfig.zIndex+Cl(),a.value.push("zoom-in"),n.value=k,de(()=>{const b=d.value.offsetWidth/2,p=d.value.offsetHeight/2,h=document.documentElement.clientWidth/2,$=document.documentElement.clientHeight/2;r.initPos.left=h-b+"px",r.initPos.top=$-p+"px",e.isFullscreen||(i=kl(m.value,(C,S)=>{r.initPos.left=C+"px",r.initPos.top=S+"px"}))}),setTimeout(()=>{a.value=a.value.filter(b=>b!=="zoom-in")},140)):(a.value.push("zoom-out"),i(),setTimeout(()=>{a.value=a.value.filter(b=>b!=="zoom-out"),n.value=k},130))});const v=Q(()=>({display:n.value?"block":"none"})),y=Q(()=>typeof e.style=="string"?[e.style,v.value].join("; "):e.style instanceof Object?{...v.value,...e.style}:v.value);return G(()=>{var k;const b=(k=o.value)==null?void 0:k.getRootNode();f.value=b instanceof Document?document.body:b}),()=>{const k=oe({ctx:l}),b=oe({props:e,ctx:l},"title");return f.value?u(Io,{to:f.value},{default:()=>[u("div",{ref:c,class:`${s}-modal-container`,"data-theme":t.value},[u("div",{class:e.class,style:y.value},[e.showMask&&u("div",{class:`${s}-modal-mask`,style:r.maskStyle,onClick:()=>{e.onClose?e.onClose():l.emit("onClose")}},null),u("div",{class:a.value,style:{...r.modalStyle,...r.initPos,...g.value},ref:d},[u("div",{class:`${s}-modal-header`,ref:m},[b||""]),u("div",{class:`${s}-modal-body`},[k]),u("div",{class:`${s}-modal-func`},[e.showAdjust&&u("div",{class:`${s}-modal-adjust`,onClick:p=>{p.stopPropagation(),e.isFullscreen?r.initPos=r.historyPos:(r.historyPos=r.initPos,r.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[u(F,{name:e.isFullscreen?"minimize":"maximize"},null)]),u("div",{class:`${s}-modal-close`,onClick:p=>{p.stopPropagation(),e.onClose?e.onClose():l.emit("onClose")}},[u(F,{name:"close"},null)])])])])])]}):""}}});Te.install=e=>(e.component(Te.name,Te),e);const Va=`.${s}-preview > [data-line]`,Ce=(e,l)=>+getComputedStyle(e).getPropertyValue(l).replace("px",""),Wa=(e,l)=>{const t=zl(()=>{e.removeEventListener("scroll",o),e.addEventListener("scroll",o),l.removeEventListener("scroll",o),l.addEventListener("scroll",o)},50),o=n=>{const a=e.clientHeight,d=l.clientHeight,m=e.scrollHeight,f=l.scrollHeight,c=(m-a)/(f-d);n.target===e?(l.removeEventListener("scroll",o),l.scrollTo({top:e.scrollTop/c}),t()):(e.removeEventListener("scroll",o),e.scrollTo({top:l.scrollTop*c}),t())};return[()=>{t().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",o),l.removeEventListener("scroll",o)}]},za=(e,l,t)=>{const{view:o}=t,n=So(),a=p=>o.lineBlockAt(o.state.doc.line(p+1).from).top,d=p=>o.lineBlockAt(o.state.doc.line(p+1).from).bottom;let m=[],f=[],c=[];const i=()=>{m=[],f=Array.from(l.querySelectorAll(Va)),c=f.map(S=>Number(S.dataset.line));const p=[...c],{lines:h}=o.state.doc;let $=p.shift()||0,C=p.shift()||h;for(let S=0;S<h;S++)S===C&&($=S,C=p.shift()||h),m.push({start:$,end:C-1})},r=(p,h)=>{let $=1;for(let C=f.length-1;C-1>=0;C--){const S=f[C],x=f[C-1];if(S.offsetTop+S.offsetHeight>h&&x.offsetTop<h){$=Number(x.dataset.line);break}}for(let C=m.length-1;C>=0;C--){const S=d(m[C].end),x=a(m[C].start);if(S>p&&x<=p){$=$<m[C].start?$:m[C].start;break}}return $};let g=0,v=0;const y=()=>{var p,h,$;if(v!==0)return!1;g++;const{scrollDOM:C,contentHeight:S}=o;let x=Ce(l,"padding-top");const M=o.lineBlockAtHeight(C.scrollTop),{number:I}=o.state.doc.lineAt(M.from),E=m[I-1];if(!E)return!1;let H=1;const N=l.querySelector(`[data-line="${E.start}"]`)||((p=l.firstElementChild)==null?void 0:p.firstElementChild),O=l.querySelector(`[data-line="${E.end+1}"]`)||((h=l.lastElementChild)==null?void 0:h.lastElementChild),B=C.scrollHeight-C.clientHeight,q=l.scrollHeight-l.clientHeight;let U=a(E.start),te=d(E.end),ne=N.offsetTop,z=O.offsetTop-ne;U===0&&(ne=0,N===O?(x=0,te=S-C.offsetHeight,z=q):z=O.offsetTop),H=(C.scrollTop-U)/(te-U);const K=O==(($=l.lastElementChild)==null?void 0:$.lastElementChild)?O.offsetTop+O.clientHeight:O.offsetTop;if(te>=B||K>q){const le=r(B,q);U=a(le),H=(C.scrollTop-U)/(B-U);const J=l.querySelector(`[data-line="${le}"]`);U>0&&J&&(ne=J.offsetTop),z=q-ne+Ce(l,"padding-top")}const ae=ne-x+z*H;n(l,ae,()=>{g--})},k=()=>{var p,h,$,C,S,x;if(g!==0)return;v++;const{scrollDOM:M}=o,I=l.scrollTop,E=l.scrollHeight,H=M.scrollHeight-M.clientHeight,N=l.scrollHeight-l.clientHeight;let O=(p=l.firstElementChild)==null?void 0:p.firstElementChild,B=(h=l.firstElementChild)==null?void 0:h.lastElementChild;if(c.length>0){let J=Math.ceil(c[c.length-1]*(I/E)),W=c.findLastIndex(Y=>Y<=J);W=W===-1?0:W,J=c[W];for(let Y=W;Y>=0&&Y<c.length;)if(f[Y].offsetTop>I){if(Y-1>=0){Y--;continue}J=-1,W=Y;break}else{if(Y+1<c.length&&f[Y+1].offsetTop<I){Y++;continue}J=c[Y],W=Y;break}switch(W){case-1:{O=($=l.firstElementChild)==null?void 0:$.firstElementChild,B=f[W];break}case c.length-1:{O=f[W],B=(C=l.firstElementChild)==null?void 0:C.lastElementChild;break}default:O=f[W],B=f[W+1===f.length?W:W+1]}}let q=O===((S=l.firstElementChild)==null?void 0:S.firstElementChild)?0:O.offsetTop-Ce(O,"margin-top"),U=B.offsetTop,te=0;const{start:ne,end:z}=m[Number(O.dataset.line||0)];let K=a(ne);const ae=a(z+1===o.state.doc.lines?z:z+1);let le=0;if(ae>H||B.offsetTop+B.offsetHeight>N){const J=r(H,N),W=l.querySelector(`[data-line="${J}"]`);q=W?W.offsetTop-Ce(W,"margin-top"):q,K=a(J),te=(I-q)/(N-q),le=H-K}else O===((x=l.firstElementChild)==null?void 0:x.firstElementChild)?(O===B&&(U=B.offsetTop+B.offsetHeight+ +getComputedStyle(B).marginBottom.replace("px","")),le=ae,te=Math.max(I/U,0)):(te=Math.max((I-q)/(U-q),0),le=ae-K);n(e,K+le*te,()=>{v--})},b=p=>{var h;const{scrollDOM:$,contentHeight:C}=o,S=$.clientHeight;if(C<=S||l.firstElementChild.clientHeight<=l.clientHeight||o.state.doc.lines<=((h=m[m.length-1])==null?void 0:h.end))return!1;p.target===e?y():k()};return[()=>{i(),e.addEventListener("scroll",b),l.addEventListener("scroll",b),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",b),l.removeEventListener("scroll",b)}]},Ua={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},ro=j({props:Ua,setup(e){const l=A("scrollElementRef"),t=A("roorNodeRef"),o=R();return _(()=>e.tocItem.active,n=>{n&&(o.value?e.onActive(e.tocItem,o.value):de(()=>{e.onActive(e.tocItem,o.value)}))},{immediate:!0}),()=>{const{tocItem:n,mdHeadingId:a,onClick:d,scrollElementOffsetTop:m}=e;return u("div",{ref:o,class:[`${s}-catalog-link`,n.active&&`${s}-catalog-active`],onClick:f=>{d(f,n),f.stopPropagation();const c=a(n.text,n.level,n.index),i=t.value.getElementById(c),r=l.value;if(i&&r){let g=i.offsetParent,v=i.offsetTop;if(r.contains(g))for(;g&&r!=g;)v+=g==null?void 0:g.offsetTop,g=g==null?void 0:g.offsetParent;const y=i.previousElementSibling;let k=0;y||(k=Ce(i,"margin-top")),r==null||r.scrollTo({top:v-m-k,behavior:"smooth"})}}},[u("span",{title:n.text},[n.text]),n.children&&n.children.length>0&&u("div",{class:`${s}-catalog-wrapper`},[n.children.map(f=>u(ro,{mdHeadingId:a,key:`${n.text}-link-${f.level}-${f.text}`,tocItem:f,onActive:e.onActive,onClick:d,scrollElementOffsetTop:m},null))])])}}}),Ga={editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1}},_e=j({name:"MdCatalog",props:Ga,emits:["onClick","onActive"],setup(e,l){const t=e.editorId,o=`#${t}-preview-wrapper`,n=ee({list:[],show:!1,scrollElement:e.scrollElement||o}),a=ve(),d=R(),m=R(),f=R(),c=R(),i=R({});ie("scrollElementRef",m),ie("roorNodeRef",c);const r=Q(()=>{const p=[];return n.list.forEach((h,$)=>{const{text:C,level:S}=h,x={level:S,text:C,index:$+1,active:a.value===h};if(p.length===0)p.push(x);else{let M=p[p.length-1];if(x.level>M.level)for(let I=M.level+1;I<=6;I++){const{children:E}=M;if(!E){M.children=[x];break}if(M=E[E.length-1],x.level<=M.level){E.push(x);break}}else p.push(x)}}),p}),g=()=>{var p;if(n.scrollElement instanceof HTMLElement)return n.scrollElement;let h=document;return(n.scrollElement===o||e.isScrollElementInShadow)&&(h=(p=d.value)==null?void 0:p.getRootNode()),h.querySelector(n.scrollElement)},v=p=>{if(p.length===0)return n.list=[],!1;const{activeHead:h}=p.reduce(($,C,S)=>{var x;const M=(x=c.value)==null?void 0:x.getElementById(e.mdHeadingId(C.text,C.level,S+1));if(M instanceof HTMLElement){const I=Xn(M,m.value);if(I<e.offsetTop&&I>$.minTop)return{activeHead:C,minTop:I}}return $},{activeHead:p[0],minTop:Number.MIN_SAFE_INTEGER});a.value=h,n.list=p},y=(p,h)=>{i.value.top=h.offsetTop+Ce(h,"padding-top")+"px",e.onActive?e.onActive(p,h):l.emit("onActive",p,h)},k=()=>{v(n.list)},b=p=>{var h,$;const C=g();m.value=C,f.value=C===document.documentElement?document:C,(h=f.value)==null||h.removeEventListener("scroll",k),v(p),($=f.value)==null||$.addEventListener("scroll",k)};return G(()=>{c.value=d.value.getRootNode(),T.on(t,{name:Ae,callback:b}),T.emit(t,Jl)}),he(()=>{var p;T.remove(t,Ae,b),(p=f.value)==null||p.removeEventListener("scroll",k)}),()=>u("div",{class:[`${s}-catalog`,e.theme==="dark"&&`${s}-catalog-dark`,e.class||""],ref:d},[r.value.length>0&&u(Ie,null,[u("div",{class:`${s}-catalog-indicator`,style:i.value},null),u("div",{class:`${s}-catalog-container`},[r.value.map(p=>u(ro,{mdHeadingId:e.mdHeadingId,tocItem:p,key:`link-${p.level}-${p.text}`,onActive:y,onClick:(h,$)=>{e.onClick?e.onClick(h,$):l.emit("onClick",h,$)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});_e.install=e=>(e.component(_e.name,_e),e);const qa={title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0}},De=j({name:"NormalToolbar",props:qa,emits:["onClick"],setup(e,l){return()=>{const t=oe({props:e,ctx:l},"trigger");return u("div",{class:`${s}-toolbar-item`,title:e.title,onClick:o=>{e.onClick instanceof Function?e.onClick(o):l.emit("onClick",o)}},[t])}}});De.install=e=>(e.component(De.name,De),e);function Xa(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Lo(e)}const Ka={title:{type:String,default:""},modalTitle:{type:String,default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0}},je=j({name:"ModalToolbar",props:Ka,emits:["onClick","onClose","onAdjust"],setup(e,l){return()=>{const t=oe({props:e,ctx:l},"trigger"),o=oe({props:e,ctx:l},"default");return u(Ie,null,[u("div",{class:`${s}-toolbar-item`,title:e.title,onClick:()=>{e.onClick instanceof Function?e.onClick():l.emit("onClick")}},[t]),u(Te,{style:e.style,class:e.class,width:e.width,height:e.height,title:e.modalTitle,visible:e.visible,showMask:e.showMask,onClose:()=>{e.onClose instanceof Function?e.onClose():l.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:n=>{e.onAdjust instanceof Function?e.onAdjust(n):l.emit("onAdjust",n)}},Xa(o)?o:{default:()=>[o]})])}}});je.install=e=>(e.component(je.name,je),e);var Ya=Object.defineProperty,Za=(e,l,t)=>l in e?Ya(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,fe=(e,l,t)=>Za(e,typeof l!="symbol"?l+"":l,t);const Qa=j({name:`${s}-divider`,setup(){return()=>u("div",{class:`${s}-divider`},null)}}),Ja={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String}},ei=e=>{const l=A("editorId"),{editorExtensions:t,editorExtensionsAttrs:o}=X;let n=t.screenfull.instance;const a=R(!1),d=c=>{if(!n){T.emit(l,pe,{name:"fullscreen",message:"fullscreen is undefined"});return}n.isEnabled?(a.value=!0,(c===void 0?!n.isFullscreen:c)?n.request():n.exit()):console.error("browser does not support screenfull!")},m=()=>{n&&n.isEnabled&&n.on("change",()=>{(a.value||e.setting.fullscreen)&&(a.value=!1,e.updateSetting("fullscreen"))})},f=()=>{n=window.screenfull,m()};return G(()=>{var c;m(),n||se("script",{...(c=o.screenfull)==null?void 0:c.js,src:t.screenfull.js,id:ce.screenfull,onload:f},"screenfull")}),G(()=>{T.on(l,{name:Yl,callback:d})}),{fullscreenHandler:d}},ti={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},li=j({name:"TableShape",props:ti,setup(e){const l=ee({x:-1,y:-1}),t=Q(()=>JSON.stringify(e.tableShape)),o=()=>{const a=[...JSON.parse(t.value)];return(!a[2]||a[2]<a[0])&&(a[2]=a[0]),(!a[3]||a[3]<a[3])&&(a[3]=a[1]),a},n=R(o());return _([t],()=>{n.value=o()}),()=>u("div",{class:`${s}-table-shape`,onMouseleave:()=>{n.value=o(),l.x=-1,l.y=-1}},[new Array(n.value[1]).fill("").map((a,d)=>u("div",{class:`${s}-table-shape-row`,key:`table-shape-row-${d}`},[new Array(n.value[0]).fill("").map((m,f)=>u("div",{class:`${s}-table-shape-col`,key:`table-shape-col-${f}`,onMouseenter:()=>{l.x=d,l.y=f,f+1===n.value[0]&&f+1<n.value[2]?n.value[0]++:f+2<n.value[0]&&n.value[0]>e.tableShape[0]&&n.value[0]--,d+1===n.value[1]&&d+1<n.value[3]?n.value[1]++:d+2<n.value[1]&&n.value[1]>e.tableShape[1]&&n.value[1]--},onClick:()=>{e.onSelected(l)}},[u("div",{class:[`${s}-table-shape-col-default`,d<=l.x&&f<=l.y&&`${s}-table-shape-col-include`]},null)]))]))])}}),oi={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},ni=j({name:`${s}-modal-link`,props:oi,setup(e){const l=A("usedLanguageText"),t=A("editorId"),o=Q(()=>{var a,d;switch(e.type){case"link":return(a=l.value.linkModalTips)==null?void 0:a.linkTitle;case"image":return(d=l.value.linkModalTips)==null?void 0:d.imageTitle;default:return""}}),n=ee({desc:"",url:""});return _(()=>e.visible,a=>{a||setTimeout(()=>{n.desc="",n.url=""},200)}),()=>u(Te,{title:o.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var a,d,m,f,c;return[u("div",{class:`${s}-form-item`},[u("label",{class:`${s}-label`,for:`link-desc-${t}`},[(a=l.value.linkModalTips)==null?void 0:a.descLabel]),u("input",{placeholder:(d=l.value.linkModalTips)==null?void 0:d.descLabelPlaceHolder,class:`${s}-input`,id:`link-desc-${t}`,type:"text",value:n.desc,onChange:i=>{n.desc=i.target.value},autocomplete:"off"},null)]),u("div",{class:`${s}-form-item`},[u("label",{class:`${s}-label`,for:`link-url-${t}`},[(m=l.value.linkModalTips)==null?void 0:m.urlLabel]),u("input",{placeholder:(f=l.value.linkModalTips)==null?void 0:f.urlLabelPlaceHolder,class:`${s}-input`,id:`link-url-${t}`,type:"text",value:n.url,onChange:i=>{n.url=i.target.value},autocomplete:"off"},null)]),u("div",{class:`${s}-form-item`},[u("button",{class:[`${s}-btn`,`${s}-btn-row`],type:"button",onClick:()=>{e.onOk(n),n.desc="",n.url=""}},[(c=l.value.linkModalTips)==null?void 0:c.buttonOK])])]}})}}),ai={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},ii=j({name:`${s}-modal-clip`,props:ai,setup(e){const l=A("usedLanguageText"),t=A("editorId"),o=A("rootRef");let n=X.editorExtensions.cropper.instance;const a=R(),d=R(),m=R(),f=ee({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let c=null;_(()=>e.visible,()=>{e.visible&&!f.cropperInited&&(n=n||window.Cropper,a.value.onchange=()=>{if(!n){T.emit(t,pe,{name:"Cropper",message:"Cropper is undefined"});return}const r=a.value.files||[];if(f.imgSelected=!0,(r==null?void 0:r.length)>0){const g=new FileReader;g.onload=v=>{f.imgSrc=v.target.result},g.readAsDataURL(r[0])}})}),_(()=>[f.imgSelected],()=>{m.value.style=""}),_([ue(()=>f.isFullscreen),ue(()=>f.imgSrc)],()=>{f.imgSrc&&de(()=>{c==null||c.destroy(),m.value.style="",d.value&&(c=new n(d.value,{viewMode:2,preview:o.value.getRootNode().querySelector(`.${s}-clip-preview-target`)}))})});const i=()=>{c.clear(),c.destroy(),c=null,a.value.value="",f.imgSelected=!1};return()=>{var r;return u(Te,{class:`${s}-modal-clip`,title:(r=l.value.clipModalTips)==null?void 0:r.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:f.isFullscreen,onAdjust:g=>{f.isFullscreen=g},width:"668px",height:"421px"},{default:()=>{var g,v,y;return[u("div",{class:`${s}-form-item ${s}-clip`},[u("div",{class:`${s}-clip-main`},[f.imgSelected?u("div",{class:`${s}-clip-cropper`},[u("img",{src:f.imgSrc,ref:d,style:{display:"none"},alt:""},null),u("div",{class:`${s}-clip-delete`,onClick:i},[u(F,{name:"delete"},null)])]):u("div",{class:`${s}-clip-upload`,onClick:()=>{a.value.click()},role:"button",tabindex:"0","aria-label":(g=l.value.imgTitleItem)==null?void 0:g.upload},[u(F,{name:"upload"},null)])]),u("div",{class:`${s}-clip-preview`},[u("div",{class:`${s}-clip-preview-target`,ref:m},null)])]),u("div",{class:`${s}-form-item`},[u("button",{class:`${s}-btn`,type:"button",onClick:()=>{if(c){const k=c.getCroppedCanvas();T.emit(t,Ge,[Gn(k.toDataURL("image/png"))],e.onOk),i()}}},[((v=l.value.clipModalTips)==null?void 0:v.buttonUpload)||((y=l.value.linkModalTips)==null?void 0:y.buttonOK)])]),u("input",{ref:a,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),ri={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},si=j({name:`${s}-modals`,props:ri,setup(e){return()=>u(Ie,null,[u(ni,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),u(ii,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),ci=j({name:"MDEditorToolbar",props:Ja,setup(e){const l=A("editorId"),t=A("usedLanguageText"),o=A("theme"),n=A("previewTheme"),a=A("language"),{fullscreenHandler:d}=ei(e),m=`${l}-toolbar-wrapper`,f=R(),c=ee({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),i=(p,h)=>{T.emit(l,P,p,h)},r=ee({type:"link",linkVisible:!1,clipVisible:!1}),g=R();G(()=>{T.on(l,{name:at,callback(p){r.type=p,r.linkVisible=!0}})});const v=Q(()=>{const p=e.toolbars.filter(S=>!e.toolbarsExclude.includes(S)),h=p.indexOf("="),$=h===-1?p:p.slice(0,h+1),C=h===-1?[]:p.slice(h,Number.MAX_SAFE_INTEGER);return[$,C]}),y=R(),k=()=>{T.emit(l,Ge,Array.from(y.value.files||[])),y.value.value=""};G(()=>{y.value.addEventListener("change",k)});const b=p=>{var h,$,C,S,x,M,I,E,H,N,O,B,q,U,te,ne,z,K,ae,le,J,W,Y,Xe,dt,mt,ft,gt,vt,ht,pt,bt,yt,kt,wt,Ct,$t,Tt,St,xt,Et,At,_t,It,Lt,Ht,Ft,Rt,Mt,Nt,Pt,Ot,Bt,Dt,jt,Vt,Wt,zt,Ut,Gt,qt,Xt,Kt,Yt,Zt,Qt,Jt,el,tl,ll,ol,nl,al,il,rl,sl,cl;if(Xl.includes(p))switch(p){case"-":return u(Qa,null,null);case"bold":return u("div",{class:`${s}-toolbar-item`,title:(h=t.value.toolbarTips)==null?void 0:h.bold,onClick:()=>{i("bold")}},[u(F,{name:"bold"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[($=t.value.toolbarTips)==null?void 0:$.bold])]);case"underline":return u("div",{class:`${s}-toolbar-item`,title:(C=t.value.toolbarTips)==null?void 0:C.underline,onClick:()=>{i("underline")}},[u(F,{name:"underline"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(S=t.value.toolbarTips)==null?void 0:S.underline])]);case"italic":return u("div",{class:`${s}-toolbar-item`,title:(x=t.value.toolbarTips)==null?void 0:x.italic,onClick:()=>{i("italic")}},[u(F,{name:"italic"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(M=t.value.toolbarTips)==null?void 0:M.italic])]);case"strikeThrough":return u("div",{class:`${s}-toolbar-item`,title:(I=t.value.toolbarTips)==null?void 0:I.strikeThrough,onClick:()=>{i("strikeThrough")}},[u(F,{name:"strike-through"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(E=t.value.toolbarTips)==null?void 0:E.strikeThrough])]);case"title":return u(we,{relative:`#${m}`,visible:c.title,onChange:L=>{c.title=L},overlay:u("ul",{class:`${s}-menu`,onClick:()=>{c.title=!1},role:"menu"},[u("li",{class:`${s}-menu-item ${s}-menu-item-title`,onClick:()=>{i("h1")},role:"menuitem",tabindex:"0"},[(H=t.value.titleItem)==null?void 0:H.h1]),u("li",{class:`${s}-menu-item ${s}-menu-item-title`,onClick:()=>{i("h2")},role:"menuitem",tabindex:"0"},[(N=t.value.titleItem)==null?void 0:N.h2]),u("li",{class:`${s}-menu-item ${s}-menu-item-title`,onClick:()=>{i("h3")},role:"menuitem",tabindex:"0"},[(O=t.value.titleItem)==null?void 0:O.h3]),u("li",{class:`${s}-menu-item ${s}-menu-item-title`,onClick:()=>{i("h4")},role:"menuitem",tabindex:"0"},[(B=t.value.titleItem)==null?void 0:B.h4]),u("li",{class:`${s}-menu-item ${s}-menu-item-title`,onClick:()=>{i("h5")},role:"menuitem",tabindex:"0"},[(q=t.value.titleItem)==null?void 0:q.h5]),u("li",{class:`${s}-menu-item ${s}-menu-item-title`,onClick:()=>{i("h6")},role:"menuitem",tabindex:"0"},[(U=t.value.titleItem)==null?void 0:U.h6])])},{default:()=>{var L,Z;return[u("div",{class:`${s}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.title},[u(F,{name:"title"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.title])])]}});case"sub":return u("div",{class:`${s}-toolbar-item`,title:(te=t.value.toolbarTips)==null?void 0:te.sub,onClick:()=>{i("sub")}},[u(F,{name:"sub"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(ne=t.value.toolbarTips)==null?void 0:ne.sub])]);case"sup":return u("div",{class:`${s}-toolbar-item`,title:(z=t.value.toolbarTips)==null?void 0:z.sup,onClick:()=>{i("sup")}},[u(F,{name:"sup"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(K=t.value.toolbarTips)==null?void 0:K.sup])]);case"quote":return u("div",{class:`${s}-toolbar-item`,title:(ae=t.value.toolbarTips)==null?void 0:ae.quote,onClick:()=>{i("quote")}},[u(F,{name:"quote"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(le=t.value.toolbarTips)==null?void 0:le.quote])]);case"unorderedList":return u("div",{class:`${s}-toolbar-item`,title:(J=t.value.toolbarTips)==null?void 0:J.unorderedList,onClick:()=>{i("unorderedList")}},[u(F,{name:"unordered-list"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(W=t.value.toolbarTips)==null?void 0:W.unorderedList])]);case"orderedList":return u("div",{class:`${s}-toolbar-item`,title:(Y=t.value.toolbarTips)==null?void 0:Y.orderedList,onClick:()=>{i("orderedList")}},[u(F,{name:"ordered-list"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Xe=t.value.toolbarTips)==null?void 0:Xe.orderedList])]);case"task":return u("div",{class:`${s}-toolbar-item`,title:(dt=t.value.toolbarTips)==null?void 0:dt.task,onClick:()=>{i("task")}},[u(F,{name:"task"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(mt=t.value.toolbarTips)==null?void 0:mt.task])]);case"codeRow":return u("div",{class:`${s}-toolbar-item`,title:(ft=t.value.toolbarTips)==null?void 0:ft.codeRow,onClick:()=>{i("codeRow")}},[u(F,{name:"code-row"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(gt=t.value.toolbarTips)==null?void 0:gt.codeRow])]);case"code":return u("div",{class:`${s}-toolbar-item`,title:(vt=t.value.toolbarTips)==null?void 0:vt.code,onClick:()=>{i("code")}},[u(F,{name:"code"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(ht=t.value.toolbarTips)==null?void 0:ht.code])]);case"link":return u("div",{class:`${s}-toolbar-item`,title:(pt=t.value.toolbarTips)==null?void 0:pt.link,onClick:()=>{r.type="link",r.linkVisible=!0}},[u(F,{name:"link"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(bt=t.value.toolbarTips)==null?void 0:bt.link])]);case"image":return e.noUploadImg?u("div",{class:`${s}-toolbar-item`,title:(yt=t.value.toolbarTips)==null?void 0:yt.image,onClick:()=>{r.type="image",r.linkVisible=!0}},[u(F,{name:"image"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(kt=t.value.toolbarTips)==null?void 0:kt.image])]):u(we,{relative:`#${m}`,visible:c.image,onChange:L=>{c.image=L},overlay:u("ul",{class:`${s}-menu`,onClick:()=>{c.title=!1},role:"menu"},[u("li",{class:`${s}-menu-item ${s}-menu-item-image`,onClick:()=>{r.type="image",r.linkVisible=!0},role:"menuitem",tabindex:"0"},[(wt=t.value.imgTitleItem)==null?void 0:wt.link]),u("li",{class:`${s}-menu-item ${s}-menu-item-image`,onClick:()=>{y.value.click()},role:"menuitem",tabindex:"0"},[(Ct=t.value.imgTitleItem)==null?void 0:Ct.upload]),u("li",{class:`${s}-menu-item ${s}-menu-item-image`,onClick:()=>{r.clipVisible=!0},role:"menuitem",tabindex:"0"},[($t=t.value.imgTitleItem)==null?void 0:$t.clip2upload])])},{default:()=>{var L,Z;return[u("div",{class:`${s}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.image},[u(F,{name:"image"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.image])])]}});case"table":return u(we,{relative:`#${m}`,visible:c.table,onChange:L=>{c.table=L},key:"bar-table",overlay:u(li,{tableShape:e.tableShape,onSelected:L=>{i("table",{selectedShape:L})}},null)},{default:()=>{var L,Z;return[u("div",{class:`${s}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.table},[u(F,{name:"table"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.table])])]}});case"revoke":return u("div",{class:`${s}-toolbar-item`,title:(Tt=t.value.toolbarTips)==null?void 0:Tt.revoke,onClick:()=>{T.emit(l,Zl)}},[u(F,{name:"revoke"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(St=t.value.toolbarTips)==null?void 0:St.revoke])]);case"next":return u("div",{class:`${s}-toolbar-item`,title:(xt=t.value.toolbarTips)==null?void 0:xt.next,onClick:()=>{T.emit(l,Ql)}},[u(F,{name:"next"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Et=t.value.toolbarTips)==null?void 0:Et.next])]);case"save":return u("div",{class:`${s}-toolbar-item`,title:(At=t.value.toolbarTips)==null?void 0:At.save,onClick:()=>{T.emit(l,Ue)}},[u(F,{name:"save"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(_t=t.value.toolbarTips)==null?void 0:_t.save])]);case"prettier":return e.noPrettier?"":u("div",{class:`${s}-toolbar-item`,title:(It=t.value.toolbarTips)==null?void 0:It.prettier,onClick:()=>{i("prettier")}},[u(F,{name:"prettier"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Lt=t.value.toolbarTips)==null?void 0:Lt.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&u("div",{class:[`${s}-toolbar-item`,e.setting.pageFullscreen&&`${s}-toolbar-active`],title:(Ht=t.value.toolbarTips)==null?void 0:Ht.pageFullscreen,onClick:()=>{e.updateSetting("pageFullscreen")}},[u(F,{name:e.setting.pageFullscreen?"minimize":"maximize"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Ft=t.value.toolbarTips)==null?void 0:Ft.pageFullscreen])]);case"fullscreen":return u("div",{class:[`${s}-toolbar-item`,e.setting.fullscreen&&`${s}-toolbar-active`],title:(Rt=t.value.toolbarTips)==null?void 0:Rt.fullscreen,onClick:()=>{d()}},[u(F,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Mt=t.value.toolbarTips)==null?void 0:Mt.fullscreen])]);case"preview":return u("div",{class:[`${s}-toolbar-item`,e.setting.preview&&`${s}-toolbar-active`],title:(Nt=t.value.toolbarTips)==null?void 0:Nt.preview,onClick:()=>{e.updateSetting("preview")}},[u(F,{name:"preview"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Pt=t.value.toolbarTips)==null?void 0:Pt.preview])]);case"previewOnly":return u("div",{class:[`${s}-toolbar-item`,e.setting.previewOnly&&`${s}-toolbar-active`],title:(Ot=t.value.toolbarTips)==null?void 0:Ot.previewOnly,onClick:()=>{e.updateSetting("previewOnly")}},[u(F,{name:"preview-only"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Bt=t.value.toolbarTips)==null?void 0:Bt.previewOnly])]);case"htmlPreview":return u("div",{class:[`${s}-toolbar-item`,e.setting.htmlPreview&&`${s}-toolbar-active`],title:(Dt=t.value.toolbarTips)==null?void 0:Dt.htmlPreview,onClick:()=>{e.updateSetting("htmlPreview")}},[u(F,{name:"preview-html"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(jt=t.value.toolbarTips)==null?void 0:jt.htmlPreview])]);case"catalog":return u("div",{class:[`${s}-toolbar-item`,e.catalogVisible&&`${s}-toolbar-active`],title:(Vt=t.value.toolbarTips)==null?void 0:Vt.catalog,onClick:()=>{T.emit(l,rt)},key:"bar-catalog"},[u(F,{name:"catalog"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Wt=t.value.toolbarTips)==null?void 0:Wt.catalog])]);case"github":return u("div",{class:`${s}-toolbar-item`,title:(zt=t.value.toolbarTips)==null?void 0:zt.github,onClick:()=>Eo("https://github.com/imzbf/md-editor-v3")},[u(F,{name:"github"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Ut=t.value.toolbarTips)==null?void 0:Ut.github])]);case"mermaid":return u(we,{relative:`#${m}`,visible:c.mermaid,onChange:L=>{c.mermaid=L},overlay:u("ul",{class:`${s}-menu`,onClick:()=>{c.mermaid=!1},role:"menu"},[u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("flow")},role:"menuitem",tabindex:"0"},[(Gt=t.value.mermaid)==null?void 0:Gt.flow]),u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("sequence")},role:"menuitem",tabindex:"0"},[(qt=t.value.mermaid)==null?void 0:qt.sequence]),u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("gantt")},role:"menuitem",tabindex:"0"},[(Xt=t.value.mermaid)==null?void 0:Xt.gantt]),u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("class")},role:"menuitem",tabindex:"0"},[(Kt=t.value.mermaid)==null?void 0:Kt.class]),u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("state")},role:"menuitem",tabindex:"0"},[(Yt=t.value.mermaid)==null?void 0:Yt.state]),u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("pie")},role:"menuitem",tabindex:"0"},[(Zt=t.value.mermaid)==null?void 0:Zt.pie]),u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("relationship")},role:"menuitem",tabindex:"0"},[(Qt=t.value.mermaid)==null?void 0:Qt.relationship]),u("li",{class:`${s}-menu-item ${s}-menu-item-mermaid`,onClick:()=>{i("journey")},role:"menuitem",tabindex:"0"},[(Jt=t.value.mermaid)==null?void 0:Jt.journey])]),key:"bar-mermaid"},{default:()=>{var L,Z;return[u("div",{class:`${s}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.mermaid},[u(F,{name:"mermaid"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.mermaid])])]}});case"katex":return u(we,{relative:`#${m}`,visible:c.katex,onChange:L=>{c.katex=L},overlay:u("ul",{class:`${s}-menu`,onClick:()=>{c.katex=!1},role:"menu"},[u("li",{class:`${s}-menu-item ${s}-menu-item-katex`,onClick:()=>{i("katexInline")},role:"menuitem",tabindex:"0"},[(el=t.value.katex)==null?void 0:el.inline]),u("li",{class:`${s}-menu-item ${s}-menu-item-katex`,onClick:()=>{i("katexBlock")},role:"menuitem",tabindex:"0"},[(tl=t.value.katex)==null?void 0:tl.block])]),key:"bar-katex"},{default:()=>{var L,Z;return[u("div",{class:`${s}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.katex},[u(F,{name:"formula"},null),e.showToolbarName&&u("div",{class:`${s}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.katex])])]}})}else if(e.defToolbars instanceof Array){const L=e.defToolbars[p];return L?ot(L,{theme:((ll=L.props)==null?void 0:ll.theme)||o.value,previewTheme:((ol=L.props)==null?void 0:ol.theme)||n.value,language:((nl=L.props)==null?void 0:nl.theme)||a.value,codeTheme:((al=L.props)==null?void 0:al.codeTheme)||e.codeTheme,insert(Ke){T.emit(l,P,"universal",{generate:Ke})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const L=e.defToolbars.children[p];return L?ot(L,{theme:((il=L.props)==null?void 0:il.theme)||o.value,previewTheme:((rl=L.props)==null?void 0:rl.theme)||n.value,language:((sl=L.props)==null?void 0:sl.theme)||a.value,codeTheme:((cl=L.props)==null?void 0:cl.codeTheme)||e.codeTheme,insert(Ke){T.emit(l,P,"universal",{generate:Ke})}}):""}else return""};return _(()=>e.toolbars,()=>{de(()=>{f.value&&xo(f.value)})},{immediate:!0}),()=>{var p;const h=v.value[0].map(C=>b(C)),$=v.value[1].map(C=>b(C));return u(Ie,null,[e.toolbars.length>0&&u("div",{class:`${s}-toolbar-wrapper`,ref:f,id:m},[u("div",{class:[`${s}-toolbar`,e.showToolbarName&&`${s}-stn`]},[u("div",{class:`${s}-toolbar-left`,ref:g},[h]),u("div",{class:`${s}-toolbar-right`},[$])])]),u("label",{for:`${m}_label`,style:{display:"none"},"aria-label":(p=t.value.imgTitleItem)==null?void 0:p.upload},null),u("input",{id:`${m}_label`,ref:y,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),u(si,{linkVisible:r.linkVisible,clipVisible:r.clipVisible,type:r.type,onCancel:()=>{r.linkVisible=!1,r.clipVisible=!1},onOk:C=>{C&&i(r.type,{desc:C.desc,url:C.url,transform:r.type==="image"}),r.linkVisible=!1,r.clipVisible=!1}},null)])}}}),ui=(e,l,t)=>{const o=A("editorId");let n=()=>{},a=()=>{};const d=()=>{var m;n();const f=(m=t.value)==null?void 0:m.view.contentDOM.getRootNode(),c=f.querySelector(`#${o} .cm-scroller`),i=f.querySelector(`[id="${o}-preview-wrapper"]`),r=f.querySelector(`[id="${o}-html-wrapper"]`);(i||r)&&([a,n]=(i?za:Wa)(c,i||r,t.value),e.scrollAuto&&a())};_([l,ue(e.setting,"preview"),ue(e.setting,"htmlPreview"),ue(e.setting,"fullscreen"),ue(e.setting,"pageFullscreen")],()=>{de(d)}),_(()=>e.scrollAuto,m=>{m?a():n()}),_(()=>e.setting.previewOnly,m=>{m?n():a()}),G(d)},Ze=async(e,l,t)=>{var o;let n="",a=0,d=0,m=!0,f=!1;const c=l.getSelectedText(),i=X.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){const r=e.replace(/^h(\d)/,(g,v)=>new Array(Number(v)).fill("#",0,v).join(""));n=`${r} ${c}`,a=r.length+1}else if(e==="prettier"){const r=window.prettier||X.editorExtensions.prettier.prettierInstance,g=[((o=window.prettierPlugins)==null?void 0:o.markdown)||X.editorExtensions.prettier.parserMarkdownInstance];!r||g[0]===void 0?(T.emit(t.editorId,pe,{name:"prettier",message:"prettier is undefined"}),n=l.getValue()):n=await r.format(l.getValue(),{parser:"markdown",plugins:g}),m=!1,f=!0}else switch(e){case"bold":{n=`**${c}**`,a=2,d=-2;break}case"underline":{n=`<u>${c}</u>`,a=3,d=-4;break}case"italic":{n=`*${c}*`,a=1,d=-1;break}case"strikeThrough":{n=`~~${c}~~`,a=2,d=-2;break}case"sub":{n=`~${c}~`,a=1,d=-1;break}case"sup":{n=`^${c}^`,a=1,d=-1;break}case"codeRow":{n="`"+c+"`",a=1,d=-1;break}case"quote":{n=`> ${c}`,a=2;break}case"orderedList":{n=`1. ${c}`,a=3;break}case"unorderedList":{n=`- ${c}`,a=2;break}case"task":{n=`- [ ] ${c}`,a=6;break}case"code":{const r=t.text||c||"",g=t.mode||"language";n=`\`\`\`${g}
${r}
\`\`\`
`,a=3,d=3+g.length-n.length;break}case"table":{n="|";const{selectedShape:r={x:1,y:1}}=t,{x:g,y:v}=r;for(let y=0;y<=v;y++)n+=" col |";n+=`
|`;for(let y=0;y<=v;y++)n+=" - |";for(let y=0;y<=g;y++){n+=`
|`;for(let k=0;k<=v;k++)n+=" content |"}a=2,d=5-n.length;break}case"link":{const{desc:r,url:g}=t;n=`[${r}](${g})`,m=!1;break}case"image":{const{desc:r,url:g,urls:v}=t;v instanceof Array?n=v.reduce((y,k)=>{const{url:b="",alt:p="",title:h=""}=typeof k=="object"?k:{url:k};return y+`![${p}](${b}${h?" '"+h+"'":""})
`},""):n=`![${r}](${g})
`,m=!1;break}case"flow":{n=`\`\`\`mermaid
${(i==null?void 0:i.flow)||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,a=11,d=-5;break}case"sequence":{n=`\`\`\`mermaid
${(i==null?void 0:i.sequence)||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,a=11,d=-5;break}case"gantt":{n=`\`\`\`mermaid
${(i==null?void 0:i.gantt)||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,a=11,d=-5;break}case"class":{n=`\`\`\`mermaid
${(i==null?void 0:i.class)||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,a=11,d=-5;break}case"state":{n=`\`\`\`mermaid
${(i==null?void 0:i.state)||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,a=11,d=-5;break}case"pie":{n=`\`\`\`mermaid
${(i==null?void 0:i.pie)||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,a=11,d=-5;break}case"relationship":{n=`\`\`\`mermaid
${(i==null?void 0:i.relationship)||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,a=11,d=-5;break}case"journey":{n=`\`\`\`mermaid
${(i==null?void 0:i.journey)||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,a=11,d=-5;break}case"katexInline":{n="$$",a=1,d=-1;break}case"katexBlock":{n=`$$

$$
`,a=3,d=-4;break}case"universal":{const{generate:r}=t,g=r(c);n=g.targetValue,m=g.select??!0,a=g.deviationStart||0,d=g.deviationEnd||0}}return{text:n,options:{select:m,deviationStart:a,deviationEnd:d,replaceAll:f}}},di="#e5c07b",Sl="var(--md-color)",mi="#56b6c2",fi="#ffffff",xe="var(--md-color)",xl="#e5c07b",gi="#e5c07b",vi="var(--md-color)",El="#d19a66",hi="#c678dd",pi="#21252b",bi="#2c313a",Al="var(--md-bk-color)",Qe="var(--md-bk-color)",yi="#ceedfa33",_l="#528bff",ki=me.theme({"&":{color:xe,backgroundColor:Al},".cm-content":{caretColor:_l},".cm-cursor, .cm-dropCursor":{borderLeftColor:_l},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:yi},".cm-panels":{backgroundColor:pi,color:xe},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Al,color:xe,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:bi},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Qe},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Qe,borderBottomColor:Qe},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:xe}}},{dark:!0}),wi=Gl.define([{tag:w.keyword,color:hi},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:Sl},{tag:[w.function(w.variableName),w.labelName],color:gi},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:El},{tag:[w.definition(w.name),w.separator],color:xe},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:di},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:mi},{tag:[w.meta,w.comment],color:xl},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:xl,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:Sl},{tag:[w.atom,w.bool,w.special(w.variableName)],color:El},{tag:[w.processingInstruction,w.string,w.inserted],color:vi},{tag:w.invalid,color:fi}]),Il=[ki,ql(wi)],Ci="#e5c07b",Ll="#3f4a54",$i="#56b6c2",Ti="#fff",Ee="#3f4a54",Hl="#2d8cf0",Si="#2d8cf0",xi="#3f4a54",Fl="#d19a66",Ei="#c678dd",Ai="#f6f6f6",_i="#ceedfa33",Rl="var(--md-bk-color)",Je="var(--md-bk-color)",Ii="#bad5fa",Ml="#3f4a54",Li=me.theme({"&":{color:Ee,backgroundColor:Rl},".cm-content":{caretColor:Ml},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ml},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Ii},".cm-panels":{backgroundColor:Ai,color:Ee},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Rl,color:Ee,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:_i},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Je},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Je,borderBottomColor:Je},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Ee}}}),Hi=Gl.define([{tag:w.keyword,color:Ei},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:Ll},{tag:[w.function(w.variableName),w.labelName],color:Si},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:Fl},{tag:[w.definition(w.name),w.separator],color:Ee},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:Ci},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:$i},{tag:[w.meta,w.comment],color:Hl},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:Hl,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:Ll},{tag:[w.atom,w.bool,w.special(w.variableName)],color:Fl},{tag:[w.processingInstruction,w.string,w.inserted],color:xi},{tag:w.invalid,color:Ti}]),Nl=[Li,ql(Hi)],He=(e,l,t,o,n)=>(a,d,m,f)=>{const c=`${e}${l}`.slice(f-m);a.dispatch(a.state.replaceSelection(`${c}${t}${o}`));const i=m+d.label.length+(n==="title"?t.length:0);a.dispatch({selection:$e.create([$e.range(m+d.label.length+(n==="title"?1:-l.length),i),$e.cursor(i)],1)}),a.focus()},Pl=e=>(l,t,o,n)=>{const a=e.slice(n-o);l.dispatch(l.state.replaceSelection(`${a} `))},Ol=e=>{const l=t=>{const o=t.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return o===null||o.from==o.to&&t.explicit?null:{from:o.from,options:[...["h2","h3","h4","h5","h6"].map((n,a)=>{const d=new Array(a+2).fill("#").join("");return{label:d,type:"text",apply:Pl(d)}}),...["unchecked","checked"].map(n=>{const a=n==="checked"?"- [x]":"- [ ]";return{label:a,type:"text",apply:Pl(a)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(n=>({label:`${n[0]}${n[1]}`,type:"text",apply:He(n[0],n[1],"",n[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:He("$","","","$","type")},{label:"$$",type:"text",apply:He("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(n=>({label:`!!! ${n}`,type:"text",apply:He("!!!",` ${n}`," Title",`

!!!`,"title")}))]}};return Ln({override:e?[l,...e]:[l]})},ye=e=>{const l=new ke;return o=>(l.get(e.state)?e.dispatch({effects:l.reconfigure(o)}):e.dispatch({effects:$n.appendConfig.of(l.of(o))}),!0)};class Fi{constructor(l){fe(this,"view"),fe(this,"maxLength",Number.MAX_SAFE_INTEGER),fe(this,"toggleTabSize"),fe(this,"togglePlaceholder"),fe(this,"setExtensions"),fe(this,"toggleDisabled"),fe(this,"toggleReadOnly"),fe(this,"toggleMaxlength"),this.view=l,this.toggleTabSize=ye(this.view),this.togglePlaceholder=ye(this.view),this.setExtensions=ye(this.view),this.toggleDisabled=ye(this.view),this.toggleReadOnly=ye(this.view),this.toggleMaxlength=ye(this.view)}getValue(){return this.view.state.doc.toString()}setValue(l,t=0,o=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:o,insert:l}})}getSelectedText(){const{from:l,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(l,t)}replaceSelectedText(l,t={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},o){try{if(t.replaceAll){if(this.setValue(l),l.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+l.length>this.maxLength)throw new Error("The input text is too long");const{from:n}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(l)),t.select){const a=n+l.length+t.deviationEnd;this.view.dispatch({selection:{anchor:n+t.deviationStart,head:a}})}this.view.focus()}catch(n){if(n.message==="The input text is too long")T.emit(o,pe,{name:"overlength",message:n.message,data:l});else throw n}}setTabSize(l){this.toggleTabSize([Ye.tabSize.of(l),In.of(" ".repeat(l))])}setPlaceholder(l){this.togglePlaceholder(kn(l))}focus(l){if(this.view.focus(),!l)return;let t=0,o=0,n=0;switch(l){case"start":break;case"end":{t=o=n=this.getValue().length;break}default:t=l.rangeAnchor||l.cursorPos,o=l.rangeHead||l.cursorPos,n=l.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:$e.create([$e.range(t,o),$e.cursor(n)],1)})}setDisabled(l){this.toggleDisabled([me.editable.of(!l)])}setReadOnly(l){this.toggleReadOnly([Ye.readOnly.of(l)])}setMaxLength(l){this.maxLength=l,this.toggleMaxlength([Ye.changeFilter.of(t=>t.newDoc.length<=l)])}}const Ri=(e,l)=>{const t=A("editorId"),o=a=>{a instanceof Promise?a.then(d=>{T.emit(t,P,"universal",{generate(){return{targetValue:d}}})}).catch(d=>{console.error(d)}):T.emit(t,P,"universal",{generate(){return{targetValue:a}}})};return a=>{var d,m,f;if(!a.clipboardData)return;if(a.clipboardData.files.length>0){const{files:k}=a.clipboardData;T.emit(t,Ge,Array.from(k).filter(b=>/image\/.*/.test(b.type))),a.preventDefault();return}const c=a.clipboardData.getData("text/plain"),i=((d=l.value)==null?void 0:d.view.state.selection.main.to)||0,r=((m=l.value)==null?void 0:m.view.state.doc.lineAt(i).from)||0,g=((f=l.value)==null?void 0:f.view.state.doc.sliceString(r,i))||"",v=/!\[.*\]\(\s*$/.test(g),y=/!\[.*\]\((.*)\s?.*\)/.test(c);if(v){const k=e.transformImgUrl(c);o(k),a.preventDefault();return}else if(y){const k=c.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));k?Promise.all(k.map(b=>e.transformImgUrl(b))).then(b=>{o(b.reduce((p,h,$)=>p.replace(k[$],h),c))}):o(c),a.preventDefault();return}if(e.autoDetectCode&&a.clipboardData.types.includes("vscode-editor-data")){const k=JSON.parse(a.clipboardData.getData("vscode-editor-data"));T.emit(t,P,"code",{mode:k.mode,text:a.clipboardData.getData("text/plain")}),a.preventDefault();return}e.maxlength&&c.length+e.modelValue.length>e.maxlength&&T.emit(t,pe,{name:"overlength",message:"The input text is too long",data:c})}},Mi=(e,l)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(T.emit(e,P,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:_n,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:C=>(T.emit(e,Ue,C.state.doc.toString()),!0),shift:()=>(T.emit(e,P,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(T.emit(e,P,"underline"),!0),shift:()=>(T.emit(e,P,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(T.emit(e,P,"italic"),!0),shift:()=>(T.emit(e,at,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(T.emit(e,P,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(T.emit(e,P,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(T.emit(e,P,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(T.emit(e,P,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(T.emit(e,P,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(T.emit(e,P,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(T.emit(e,P,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(T.emit(e,P,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(T.emit(e,P,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(T.emit(e,P,"code"),!0),any(C,S){return(S.ctrlKey||S.metaKey)&&S.altKey&&S.code==="KeyC"?(T.emit(e,P,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(T.emit(e,at,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>l.noPrettier?!1:(T.emit(e,P,"prettier"),!0)},{any:(C,S)=>(S.ctrlKey||S.metaKey)&&S.altKey&&S.shiftKey&&S.code==="KeyT"?(T.emit(e,P,"table"),!0):!1},...Hn];me.EDIT_CONTEXT=!1;const Ni=e=>{const l=A("tabWidth"),t=A("editorId"),o=A("theme"),n=R(),a=ve(),d=R(!1),m=new ke,f=new ke,c=new ke,i=new ke,r=new ke,g=Mi(t,e),v=()=>[...g,...xn,...En,An],k={paste:Ri(e,a),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{d.value=!0},compositionend:(h,$)=>{d.value=!1,e.updateModelValue($.state.doc.toString())},input:h=>{e.onInput&&e.onInput(h);const{data:$}=h;e.maxlength&&e.modelValue.length+$.length>e.maxlength&&T.emit(t,pe,{name:"overlength",message:"The input text is too long",data:$})}},b=[bn.of(v()),i.of(dl()),m.of(Cn({codeLanguages:wn})),me.lineWrapping,me.updateListener.of(h=>{h.docChanged&&(e.onChange(h.state.doc.toString()),d.value||e.updateModelValue(h.state.doc.toString()))}),r.of(me.domEventHandlers(k)),yn()],p=()=>{const h=[...b,f.of(o.value==="light"?Nl:Il),c.of(Ol(e.completions))];return X.codeMirrorExtensions(o.value,h,v(),{editorId:t})};return G(()=>{const h=new me({doc:e.modelValue,parent:n.value,extensions:[p()]}),$=new Fi(h);a.value=$,setTimeout(()=>{$.setTabSize(l),$.setDisabled(e.disabled),$.setReadOnly(e.readonly),e.placeholder&&$.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&$.setMaxLength(e.maxlength),e.autofocus&&h.focus()},0),T.on(t,{name:Zl,callback(){Tn(h)}}),T.on(t,{name:Ql,callback(){Sn(h)}}),T.on(t,{name:P,async callback(C,S={}){var x,M;if(C==="image"&&S.transform){const I=e.transformImgUrl(S.url);if(I instanceof Promise)I.then(async E=>{var H;const{text:N,options:O}=await Ze(C,a.value,{...S,url:E});(H=a.value)==null||H.replaceSelectedText(N,O,t)}).catch(E=>{console.error(E)});else{const{text:E,options:H}=await Ze(C,a.value,{...S,url:I});(x=a.value)==null||x.replaceSelectedText(E,H,t)}}else{const{text:I,options:E}=await Ze(C,a.value,S);(M=a.value)==null||M.replaceSelectedText(I,E,t)}}}),T.on(t,{name:eo,callback:Ao(C=>{var S;const x={...k},M=Object.keys(k);for(const I in C){const E=I;M.includes(E)?x[E]=(H,N)=>{C[E](H,N),H.defaultPrevented||k[E](H,N)}:x[E]=C[E]}(S=a.value)==null||S.view.dispatch({effects:r.reconfigure(me.domEventHandlers(x))})})}),T.on(t,{name:to,callback:(C,S)=>{const x=h.state.doc.line(C);h.dispatch(h.state.update({changes:{from:x.from,to:x.to,insert:S}}))}})}),_(o,()=>{var h;(h=a.value)==null||h.view.dispatch({effects:f.reconfigure(o.value==="light"?Nl:Il)})},{deep:!0}),_(()=>e.completions,()=>{var h;(h=a.value)==null||h.view.dispatch({effects:c.reconfigure(Ol(e.completions))})},{deep:!0}),_(()=>e.modelValue,()=>{var h,$;((h=a.value)==null?void 0:h.getValue())!==e.modelValue&&(($=a.value)==null||$.setValue(e.modelValue))}),_(()=>e.placeholder,()=>{var h;(h=a.value)==null||h.setPlaceholder(e.placeholder)}),_(()=>e.disabled,()=>{var h;(h=a.value)==null||h.setDisabled(e.disabled)}),_(()=>e.readonly,()=>{var h;(h=a.value)==null||h.setDisabled(e.readonly)}),_(()=>e.maxlength,()=>{var h;e.maxlength&&((h=a.value)==null||h.setMaxLength(e.maxlength))}),{inputWrapperRef:n,codeMirrorUt:a,resetHistory(){var h,$;(h=a.value)==null||h.view.dispatch({effects:i.reconfigure([])}),($=a.value)==null||$.view.dispatch({effects:i.reconfigure(dl())})}}},Pi=(e,l,t)=>{const o=ee({resizedWidth:e.inputBoxWidth}),n=ee({width:e.inputBoxWidth}),a=ee({left:e.inputBoxWidth,display:"initial"}),d=R(e.setting.preview||e.setting.htmlPreview),m=i=>{var r,g,v;const y=((r=l.value)==null?void 0:r.offsetWidth)||0,k=((g=l.value)==null?void 0:g.getBoundingClientRect().x)||0;let b=i.x-k;b<Le?b=Le:b>y-Le&&(b=y-Le);const p=`${b}px`;n.width=p,a.left=p,o.resizedWidth=p,(v=e.oninputBoxWidthChange)==null||v.call(e,p)},f=()=>{document.addEventListener("mousemove",m)},c=()=>{document.removeEventListener("mousemove",m)};return _([t],()=>{var i,r;(i=t.value)==null||i.addEventListener("mousedown",f),(r=t.value)==null||r.addEventListener("mouseup",c)},{immediate:!0}),he(()=>{var i,r;(i=t.value)==null||i.removeEventListener("mousedown",f),(r=t.value)==null||r.removeEventListener("mouseup",c)}),_(()=>e.inputBoxWidth,i=>{i&&(o.resizedWidth=i,n.width=i,a.left=i)}),_([ue(e.setting,"htmlPreview"),ue(e.setting,"preview"),ue(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(n.width="0%",a.display="none",d.value=!0):!e.setting.htmlPreview&&!e.setting.preview?(n.width="100%",a.display="none",d.value=!1):(n.width=o.resizedWidth,a.display="initial",d.value=!0)},{immediate:!0}),{inputWrapperStyle:n,resizeOperateStyle:a,showPreviewWrapper:d}},Oi=j({name:"MDEditorContent",props:Sa,setup(e,l){const t=A("editorId"),o=R(""),n=R(),a=R(),{inputWrapperRef:d,codeMirrorUt:m,resetHistory:f}=Ni(e),{inputWrapperStyle:c,resizeOperateStyle:i,showPreviewWrapper:r}=Pi(e,n,a);return ui(e,o,m),l.expose({getSelectedText(){var g;return(g=m.value)==null?void 0:g.getSelectedText()},focus(g){var v;(v=m.value)==null||v.focus(g)},resetHistory:f,getEditorView(){var g;return(g=m.value)==null?void 0:g.view}}),()=>u("div",{class:`${s}-content${r.value?" has-preview":""}`,ref:n},[u("div",{class:`${s}-input-wrapper`,style:c,ref:d},null),(e.setting.htmlPreview||e.setting.preview)&&u("div",{class:`${s}-resize-operate`,style:i,ref:a},null),r.value&&u(oo,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:g=>{o.value=g,e.onHtmlChanged(g)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.catalogVisible&&u(_e,{theme:e.theme,class:`${s}-catalog-editor`,editorId:t,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2},null)])}}),Bi=j({props:{modelValue:{type:String,default:""}},setup(e){const l=A("usedLanguageText");return()=>{var t,o;return u("div",{class:`${s}-footer-item`},[u("label",{class:`${s}-footer-label`},[`${(t=l.value.footer)==null?void 0:t.markdownTotal}:`]),u("span",null,[((o=e.modelValue)==null?void 0:o.length)||0])])}}}),Di={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}}},ji=j({name:`${s}-checkbox`,props:Di,setup(e){return()=>u("div",{class:[`${s}-checkbox`,e.checked&&`${s}-checkbox-checked`],onClick:()=>{e.onChange(!e.checked)}},null)}}),Vi={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},Wi=j({props:Vi,setup(e){const l=A("usedLanguageText");return()=>{var t;return u("div",{class:`${s}-footer-item`},[u("label",{class:`${s}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(t=l.value.footer)==null?void 0:t.scrollAuto]),u(ji,{checked:e.scrollAuto,onChange:e.onScrollAutoChange},null)])}}}),zi={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},Ui=j({name:"MDEditorFooter",props:zi,setup(e){const l=Q(()=>{const o=e.footers.indexOf("="),n=o===-1?e.footers:e.footers.slice(0,o),a=o===-1?[]:e.footers.slice(o,Number.MAX_SAFE_INTEGER);return[n,a]}),t=o=>{if(Kl.includes(o))switch(o){case"markdownTotal":return u(Bi,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&u(Wi,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else return e.defFooters instanceof Array?e.defFooters[o]||"":e.defFooters&&e.defFooters.children instanceof Array&&e.defFooters.children[o]||""};return()=>{const o=l.value[0].map(a=>t(a)),n=l.value[1].map(a=>t(a));return u("div",{class:`${s}-footer`},[u("div",{class:`${s}-footer-left`},[o]),u("div",{class:`${s}-footer-right`},[n])])}}}),et=j({name:"MdEditorV3",props:Ma,emits:Na,setup(e,l){const{noKatex:t,noMermaid:o,noPrettier:n,noUploadImg:a,noHighlight:d}=e,m=ee({scrollAuto:e.scrollAuto}),f=R(),c=R(),{editorId:i}=Ea(e,f),[r,g]=Ia(e,l,{editorId:i}),v=La(e,{editorId:i});return xa(e,l,{editorId:i}),Aa(e),_a(e,l,{editorId:i}),Ha(e,l,{editorId:i,catalogVisible:v,setting:r,updateSetting:g,codeRef:c}),he(()=>{T.clear(i)}),()=>{const y=oe({props:e,ctx:l},"defToolbars"),k=oe({props:e,ctx:l},"defFooters");return u("div",{id:i,class:[s,e.class,e.theme==="dark"&&`${s}-dark`,r.fullscreen||r.pageFullscreen?`${s}-fullscreen`:""],style:e.style,ref:f},[e.toolbars.length>0&&u(ci,{noPrettier:n,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:r,updateSetting:g,tableShape:e.tableShape,defToolbars:y,noUploadImg:a,showToolbarName:e.showToolbarName,catalogVisible:v.value,codeTheme:e.codeTheme},null),u(Oi,{ref:c,modelValue:e.modelValue,setting:r,mdHeadingId:e.mdHeadingId,noMermaid:o,noPrettier:n,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:t,scrollAuto:m.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:d,updateModelValue:b=>{l.emit("update:modelValue",b)},onChange:b=>{e.onChange&&e.onChange(b),l.emit("onChange",b)},onHtmlChanged:b=>{e.onHtmlChanged&&e.onHtmlChanged(b),l.emit("onHtmlChanged",b)},onGetCatalog:b=>{e.onGetCatalog&&e.onGetCatalog(b),l.emit("onGetCatalog",b)},onBlur:b=>{e.onBlur&&e.onBlur(b),l.emit("onBlur",b)},onFocus:b=>{e.onFocus&&e.onFocus(b),l.emit("onFocus",b)},onInput:b=>{e.onInput&&e.onInput(b),l.emit("onInput",b)},completions:e.completions,catalogVisible:v.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:b=>{e.onDrop&&e.onDrop(b),l.emit("onDrop",b)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:b=>{e.oninputBoxWidthChange&&e.oninputBoxWidthChange(b),l.emit("oninputBoxWidthChange",b)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.footers.length>0&&u(Ui,{modelValue:e.modelValue,footers:e.footers,defFooters:k,noScrollAuto:!r.preview&&!r.htmlPreview||r.previewOnly,scrollAuto:m.scrollAuto,onScrollAutoChange:b=>m.scrollAuto=b},null)])}}});et.install=e=>(e.component(et.name,et),e.use(De).use(Ne).use(je).use(_e).use(Be),e);const Gi={onClick:{type:Function,default:void 0}},tt=j({name:"NormalFooterToolbar",props:Gi,emits:["onClick"],setup(e,l){return()=>{const t=oe({props:e,ctx:l});return u("div",{class:`${s}-footer-item`,onClick:o=>{e.onClick instanceof Function?e.onClick(o):l.emit("onClick",o)}},[t])}}});tt.install=e=>(e.component(tt.name,tt),e);var Bl={exports:{}},V={},it={exports:{}},be={};function so(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function qi(e,l,t){}function Xi(e,l,t){}var Ki=/javascript\s*\:/img;function Yi(e,l){return Ki.test(l)?"":l}be.whiteList=so();be.getDefaultWhiteList=so;be.onAttr=qi;be.onIgnoreAttr=Xi;be.safeAttrValue=Yi;var Zi={indexOf:function(e,l){var t,o;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,o=e.length;t<o;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var o,n;if(Array.prototype.forEach)return e.forEach(l,t);for(o=0,n=e.length;o<n;o++)l.call(t,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Se=Zi;function Qi(e,l){e=Se.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,o=!1,n=0,a=0,d="";function m(){if(!o){var i=Se.trim(e.slice(n,a)),r=i.indexOf(":");if(r!==-1){var g=Se.trim(i.slice(0,r)),v=Se.trim(i.slice(r+1));if(g){var y=l(n,d.length,g,v,i);y&&(d+=y+"; ")}}}n=a+1}for(;a<t;a++){var f=e[a];if(f==="/"&&e[a+1]==="*"){var c=e.indexOf("*/",a+2);if(c===-1)break;a=c+1,n=a+1,o=!1}else f==="("?o=!0:f===")"?o=!1:f===";"?o||m():f===`
`&&m()}return Se.trim(d)}var Ji=Qi,Fe=be,er=Ji;function Dl(e){return e==null}function tr(e){var l={};for(var t in e)l[t]=e[t];return l}function co(e){e=tr(e||{}),e.whiteList=e.whiteList||Fe.whiteList,e.onAttr=e.onAttr||Fe.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Fe.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Fe.safeAttrValue,this.options=e}co.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,o=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,d=t.safeAttrValue,m=er(e,function(f,c,i,r,g){var v=o[i],y=!1;if(v===!0?y=v:typeof v=="function"?y=v(r):v instanceof RegExp&&(y=v.test(r)),y!==!0&&(y=!1),r=d(i,r),!!r){var k={position:c,sourcePosition:f,source:g,isWhite:y};if(y){var b=n(i,r,k);return Dl(b)?i+":"+r:b}else{var b=a(i,r,k);if(!Dl(b))return b}}});return m};var lr=co;(function(e,l){var t=be,o=lr;function n(d,m){var f=new o(m);return f.process(d)}l=e.exports=n,l.FilterCSS=o;for(var a in t)l[a]=t[a];typeof window<"u"&&(window.filterCSS=e.exports)})(it,it.exports);var ct=it.exports,ut={indexOf:function(e,l){var t,o;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,o=e.length;t<o;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var o,n;if(Array.prototype.forEach)return e.forEach(l,t);for(o=0,n=e.length;o<n;o++)l.call(t,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var l=/\s|\n|\t/,t=l.exec(e);return t?t.index:-1}},or=ct.FilterCSS,nr=ct.getDefaultWhiteList,ze=ut;function uo(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var mo=new or;function ar(e,l,t){}function ir(e,l,t){}function rr(e,l,t){}function sr(e,l,t){}function fo(e){return e.replace(ur,"&lt;").replace(dr,"&gt;")}function cr(e,l,t,o){if(t=yo(t),l==="href"||l==="src"){if(t=ze.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(l==="background"){if(Re.lastIndex=0,Re.test(t))return""}else if(l==="style"){if(jl.lastIndex=0,jl.test(t)||(Vl.lastIndex=0,Vl.test(t)&&(Re.lastIndex=0,Re.test(t))))return"";o!==!1&&(o=o||mo,t=o.process(t))}return t=ko(t),t}var ur=/</g,dr=/>/g,mr=/"/g,fr=/&quot;/g,gr=/&#([a-zA-Z0-9]*);?/gim,vr=/&colon;?/gim,hr=/&newline;?/gim,Re=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,jl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Vl=/u\s*r\s*l\s*\(.*/gi;function go(e){return e.replace(mr,"&quot;")}function vo(e){return e.replace(fr,'"')}function ho(e){return e.replace(gr,function(t,o){return o[0]==="x"||o[0]==="X"?String.fromCharCode(parseInt(o.substr(1),16)):String.fromCharCode(parseInt(o,10))})}function po(e){return e.replace(vr,":").replace(hr," ")}function bo(e){for(var l="",t=0,o=e.length;t<o;t++)l+=e.charCodeAt(t)<32?" ":e.charAt(t);return ze.trim(l)}function yo(e){return e=vo(e),e=ho(e),e=po(e),e=bo(e),e}function ko(e){return e=go(e),e=fo(e),e}function pr(){return""}function br(e,l){typeof l!="function"&&(l=function(){});var t=!Array.isArray(e);function o(d){return t?!0:ze.indexOf(e,d)!==-1}var n=[],a=!1;return{onIgnoreTag:function(d,m,f){if(o(d))if(f.isClosing){var c="[/removed]",i=f.position+c.length;return n.push([a!==!1?a:f.position,i]),a=!1,c}else return a||(a=f.position),"[removed]";else return l(d,m,f)},remove:function(d){var m="",f=0;return ze.forEach(n,function(c){m+=d.slice(f,c[0]),f=c[1]}),m+=d.slice(f),m}}}function yr(e){for(var l="",t=0;t<e.length;){var o=e.indexOf("<!--",t);if(o===-1){l+=e.slice(t);break}l+=e.slice(t,o);var n=e.indexOf("-->",o);if(n===-1)break;t=n+3}return l}function kr(e){var l=e.split("");return l=l.filter(function(t){var o=t.charCodeAt(0);return o===127?!1:o<=31?o===10||o===13:!0}),l.join("")}V.whiteList=uo();V.getDefaultWhiteList=uo;V.onTag=ar;V.onIgnoreTag=ir;V.onTagAttr=rr;V.onIgnoreTagAttr=sr;V.safeAttrValue=cr;V.escapeHtml=fo;V.escapeQuote=go;V.unescapeQuote=vo;V.escapeHtmlEntities=ho;V.escapeDangerHtml5Entities=po;V.clearNonPrintableCharacter=bo;V.friendlyAttrValue=yo;V.escapeAttrValue=ko;V.onIgnoreTagStripAll=pr;V.StripTagBody=br;V.stripCommentTag=yr;V.stripBlankChar=kr;V.attributeWrapSign='"';V.cssFilter=mo;V.getDefaultCSSWhiteList=nr;var qe={},ge=ut;function wr(e){var l=ge.spaceIndex(e),t;return l===-1?t=e.slice(1,-1):t=e.slice(1,l+1),t=ge.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function Cr(e){return e.slice(0,2)==="</"}function $r(e,l,t){var o="",n=0,a=!1,d=!1,m=0,f=e.length,c="",i="";e:for(m=0;m<f;m++){var r=e.charAt(m);if(a===!1){if(r==="<"){a=m;continue}}else if(d===!1){if(r==="<"){o+=t(e.slice(n,m)),a=m,n=m;continue}if(r===">"||m===f-1){o+=t(e.slice(n,a)),i=e.slice(a,m+1),c=wr(i),o+=l(a,o.length,c,i,Cr(i)),n=m+1,a=!1;continue}if(r==='"'||r==="'")for(var g=1,v=e.charAt(m-g);v.trim()===""||v==="=";){if(v==="="){d=r;continue e}v=e.charAt(m-++g)}}else if(r===d){d=!1;continue}}return n<f&&(o+=t(e.substr(n))),o}var Tr=/[^a-zA-Z0-9\\_:.-]/gim;function Sr(e,l){var t=0,o=0,n=[],a=!1,d=e.length;function m(g,v){if(g=ge.trim(g),g=g.replace(Tr,"").toLowerCase(),!(g.length<1)){var y=l(g,v||"");y&&n.push(y)}}for(var f=0;f<d;f++){var c=e.charAt(f),i,r;if(a===!1&&c==="="){a=e.slice(t,f),t=f+1,o=e.charAt(t)==='"'||e.charAt(t)==="'"?t:Er(e,f+1);continue}if(a!==!1&&f===o){if(r=e.indexOf(c,f+1),r===-1)break;i=ge.trim(e.slice(o+1,r)),m(a,i),a=!1,f=r,t=f+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(r=xr(e,f),r===-1){i=ge.trim(e.slice(t,f)),m(i),a=!1,t=f+1;continue}else{f=r-1;continue}else if(r=Ar(e,f-1),r===-1){i=ge.trim(e.slice(t,f)),i=Wl(i),m(a,i),a=!1,t=f+1;continue}else continue}return t<e.length&&(a===!1?m(e.slice(t)):m(a,Wl(ge.trim(e.slice(t))))),ge.trim(n.join(" "))}function xr(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="="?l:-1}}function Er(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="'"||t==='"'?l:-1}}function Ar(e,l){for(;l>0;l--){var t=e[l];if(t!==" ")return t==="="?l:-1}}function _r(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Wl(e){return _r(e)?e.substr(1,e.length-2):e}qe.parseTag=$r;qe.parseAttr=Sr;var Ir=ct.FilterCSS,re=V,wo=qe,Lr=wo.parseTag,Hr=wo.parseAttr,Ve=ut;function Me(e){return e==null}function Fr(e){var l=Ve.spaceIndex(e);if(l===-1)return{html:"",closing:e[e.length-2]==="/"};e=Ve.trim(e.slice(l+1,-1));var t=e[e.length-1]==="/";return t&&(e=Ve.trim(e.slice(0,-1))),{html:e,closing:t}}function Rr(e){var l={};for(var t in e)l[t]=e[t];return l}function Mr(e){var l={};for(var t in e)Array.isArray(e[t])?l[t.toLowerCase()]=e[t].map(function(o){return o.toLowerCase()}):l[t.toLowerCase()]=e[t];return l}function Co(e){e=Rr(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=re.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Mr(e.whiteList||e.allowList):e.whiteList=re.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":re.attributeWrapSign,e.onTag=e.onTag||re.onTag,e.onTagAttr=e.onTagAttr||re.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||re.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||re.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||re.safeAttrValue,e.escapeHtml=e.escapeHtml||re.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Ir(e.css))}Co.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,o=t.whiteList,n=t.onTag,a=t.onIgnoreTag,d=t.onTagAttr,m=t.onIgnoreTagAttr,f=t.safeAttrValue,c=t.escapeHtml,i=l.attributeWrapSign,r=l.cssFilter;t.stripBlankChar&&(e=re.stripBlankChar(e)),t.allowCommentTag||(e=re.stripCommentTag(e));var g=!1;t.stripIgnoreTagBody&&(g=re.StripTagBody(t.stripIgnoreTagBody,a),a=g.onIgnoreTag);var v=Lr(e,function(y,k,b,p,h){var $={sourcePosition:y,position:k,isClosing:h,isWhite:Object.prototype.hasOwnProperty.call(o,b)},C=n(b,p,$);if(!Me(C))return C;if($.isWhite){if($.isClosing)return"</"+b+">";var S=Fr(p),x=o[b],M=Hr(S.html,function(I,E){var H=Ve.indexOf(x,I)!==-1,N=d(b,I,E,H);return Me(N)?H?(E=f(b,I,E,r),E?I+"="+i+E+i:I):(N=m(b,I,E,H),Me(N)?void 0:N):N});return p="<"+b,M&&(p+=" "+M),S.closing&&(p+=" /"),p+=">",p}else return C=a(b,p,$),Me(C)?c(p):C},c);return g&&(v=g.remove(v)),v};var Nr=Co;(function(e,l){var t=V,o=qe,n=Nr;function a(m,f){var c=new n(f);return c.process(m)}l=e.exports=a,l.filterXSS=a,l.FilterXSS=n,function(){for(var m in t)l[m]=t[m];for(var f in o)l[f]=o[f]}(),typeof window<"u"&&(window.filterXSS=e.exports);function d(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}d()&&(self.filterXSS=e.exports)})(Bl,Bl.exports);export{et as E,Be as M};
