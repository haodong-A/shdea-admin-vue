import{u as S,m as Y,a as q}from"./index-CyAmoSeV.js";import"./store@2.0.12-RoMfFez2.js";import{u as R}from"./index-4ocppgba.js";import"./@wangeditor_plugin-link-card@1.0.0_@wangeditor_editor@5.1.23_snabbdom@3.6.2-D_kdJ7Fs.js";import"./@wangeditor_editor@5.1.23-BNs7_II4.js";import{n as J,R as Q}from"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import{O as Z,y as W,c8 as tt,i as et}from"./lodash-es@4.17.21-D6PnhKvy.js";import{d as k,b as T,a as c,c as b,K as M,L as y,_ as h,F as V,X as L,P as ot,w as G,i as l,O as D,f as s,o as z,N as U,E as nt,k as H,M as st,e as rt,a6 as at}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{v as m,r as X,n as lt,m as it}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import{O as I,p as j}from"./@vue_shared@3.5.12-UFe9jxSY.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ct,b as pt}from"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import{_ as ut}from"./logo-CxXS7KxG.js";import{v as _t,w as K,T as mt}from"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import{i as dt}from"./comm-DyJRlPK0.js";import"./@vueuse_core@11.1.0_vue@3.5.12_typescript@5.5.4_-BKaerpSy.js";import"./@vueuse_shared@11.1.0_vue@3.5.12_typescript@5.5.4_-DXriuop5.js";import"./mitt@3.0.1-C1z4c41a.js";import"./axios@1.7.7-CCb-kr4I.js";import"./nprogress@0.2.0-B8S133N7.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./pinia@2.2.4_typescript@5.5.4_vue@3.5.12_typescript@5.5.4_-CVf9nHlw.js";import"./vue-demi@0.14.10_vue@3.5.12_typescript@5.5.4_-DvPnGcuI.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./@bytemd_plugin-math@1.21.0_bytemd@1.21.0-Dc_JUVYX.js";import"./remark-math@5.1.1-C8vps_rM.js";import"./micromark-extension-math@2.1.2-StTlgfH1.js";import"./micromark-factory-space@1.1.0-C57A7NS2.js";import"./micromark-util-character@1.2.0-D-NaLusr.js";import"./katex@0.16.11-CvgdMzdh.js";import"./mdast-util-math@2.0.2-Boy2OOKg.js";import"./longest-streak@3.1.0-BHNUWYJP.js";import"./mdast-util-to-markdown@1.5.0-D9VzXa1u.js";import"./micromark-util-decode-string@1.1.0-CdHYbWAu.js";import"./decode-named-character-reference@1.0.2-C3-224fz.js";import"./micromark-util-decode-numeric-character-reference@1.1.0-DRnCnno4.js";import"./vue-router@4.4.5_vue@3.5.12_typescript@5.5.4_-DGEeQixy.js";import"./mockjs@1.1.0-hXCvQ4kl.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.12_echarts@5.5.1_vue@3.5.12_typescript@5.5.4_-tmE62Ovn.js";import"./echarts@5.5.1-D8FyPvXx.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.0-CH1asNwC.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";const ft={class:"route-nav"},ht={key:0,class:"route-nav__title"},vt=k({name:"route-nav"}),bt=k({...vt,setup($){const{route:p,browser:d}=R(),{menu:u}=S(),o=T(()=>{function i(e){if(p.path==="/")return!1;if(e.path==p.path)return e;if(e.children){const a=e.children.map(i).find(Boolean);return a?[e,a]:!1}else return!1}return Z(u.group.map(i).filter(Boolean))}),v=T(()=>{var i;return(i=W(o.value))==null?void 0:i.name});return(i,e)=>{const a=h("el-breadcrumb-item"),n=h("el-breadcrumb");return c(),b("div",ft,[m(d).isMini?(c(),b("p",ht,I(v.value),1)):(c(),M(n,{key:1,"separator-icon":m(J)},{default:y(()=>[(c(!0),b(V,null,L(o.value,(t,_)=>(c(),M(a,{key:_},{default:y(()=>{var w;return[ot(I(((w=t.meta)==null?void 0:w.label)||t.name),1)]}),_:2},1024))),128))]),_:1},8,["separator-icon"]))])}}}),wt=E(bt,[["__scopeId","data-v-5a55f77d"]]),kt={class:"a-menu"},yt={class:"a-menu__name"},$t=k({name:"a-menu"}),gt=k({...$t,setup($){const{router:p,route:d}=R(),{menu:u}=S(),o=X("0"),v=T(()=>u.group.filter(a=>a.isShow));function i(a){var _;if(String(a)==o.value)return!1;const n=v.value[a],t=u.getPath(n);t?(u.setMenu(a),p.push(t)):ct.warning(`“${(_=n.meta)==null?void 0:_.label}”下没有菜单，请先添加`)}function e(){let a=0;function n(t,_){switch(t.type){case 0:t.children&&t.children.forEach(w=>{n(w,_)});break;case 1:d.path.includes(t.path)&&(a=_);break}}v.value.forEach(n),o.value=String(a),u.setMenu(a)}return G(()=>[d.path,u.group.length],()=>{e()},{immediate:!0}),(a,n)=>{const t=h("cl-svg"),_=h("el-menu-item"),w=h("el-menu");return c(),b("div",kt,[l(w,{"default-active":o.value,mode:"horizontal","background-color":"transparent",onSelect:i},{default:y(()=>[(c(!0),b(V,null,L(v.value,(g,x)=>(c(),M(_,{key:g.id,index:`${x}`},{default:y(()=>{var B;return[g.icon?(c(),M(t,{key:0,name:g.icon,size:18},null,8,["name"])):D("",!0),s("span",yt,I((B=g.meta)==null?void 0:B.label),1)]}),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])])}}}),xt=E(gt,[["__scopeId","data-v-ec469878"]]),Ct={class:"app-topbar"},Mt={class:"app-topbar__tools"},St={key:0,class:"app-topbar__user"},Bt={class:"el-dropdown-link"},Pt={class:"name"},Nt=k({name:"app-topbar"}),It=k({...Nt,setup($){const{router:p,service:d,browser:u}=R(),{user:o,app:v}=S();async function i(n){switch(n){case"my":p.push("/my/info");break;case"exit":pt.confirm("确定退出登录吗？","提示",{type:"warning"}).then(async()=>{await d.base.comm.logout(),o.logout()}).catch(()=>null);break}}const e=lt({list:[],async init(){const n=tt(Y.list.map(t=>t.toolbar).filter(Boolean),"order");this.list=await Promise.all(n.map(async t=>{if(t){const _=await(et(t.component)?t.component():t.component);return{...t,component:it(_.default)}}}))}}),a=T(()=>e.list.filter(n=>u.isMini?(n==null?void 0:n.h5)??!0:(n==null?void 0:n.pc)??!0));return z(()=>{e.init()}),(n,t)=>{const _=h("cl-avatar"),w=h("el-dropdown-item"),g=h("el-dropdown-menu"),x=h("el-dropdown");return c(),b(V,null,[m(v).info.menu.isGroup?(c(),M(xt,{key:0})):D("",!0),s("div",Ct,[s("div",{class:j(["app-topbar__collapse",{unfold:!m(v).isFold}]),onClick:t[0]||(t[0]=B=>m(v).fold())},t[1]||(t[1]=[s("i",{class:"cl-iconfont cl-icon-fold"},null,-1)]),2),l(wt),t[4]||(t[4]=s("div",{class:"flex1"},null,-1)),s("ul",Mt,[(c(!0),b(V,null,L(a.value,(B,f)=>(c(),b("li",{key:f},[(c(),M(U(B.component)))]))),128))]),m(o).info?(c(),b("div",St,[l(x,{trigger:"click","hide-on-click":"",onCommand:i},{dropdown:y(()=>[l(g,null,{default:y(()=>[l(w,{command:"my"},{default:y(()=>t[2]||(t[2]=[s("i",{class:"cl-iconfont cl-icon-user"},null,-1),s("span",null,"个人中心",-1)])),_:1}),l(w,{command:"exit"},{default:y(()=>t[3]||(t[3]=[s("i",{class:"cl-iconfont cl-icon-exit"},null,-1),s("span",null,"退出",-1)])),_:1})]),_:1})]),default:y(()=>[s("span",Bt,[s("span",Pt,I(m(o).info.nickName),1),l(_,{size:32,src:m(o).info.headImg},null,8,["src"])])]),_:1})])):D("",!0)])],64)}}}),Rt=E(It,[["__scopeId","data-v-54ce221f"]]);function Et($){return typeof $=="function"||Object.prototype.toString.call($)==="[object Object]"&&!nt($)}const Ft=k({name:"b-menu",setup(){const{router:$,route:p,browser:d}=R(),{menu:u,app:o}=S();function v(e){e!=p.path&&$.push(e),d.isMini&&o.fold(!0)}function i(){function e(a,n){return a.filter(t=>t.isShow).map(t=>{var w;const _=g=>{var x;return[l(h("el-icon"),null,{default:()=>[l(h("cl-svg"),{name:g.icon},null)]}),st(l("span",null,[(x=g.meta)==null?void 0:x.label]),[[_t,!o.isFold||n!=1]])]};return t.type==0?H(l(h("el-sub-menu"),null,null),{index:String(t.id),key:t.id,popperClass:"app-slider__menu"},{title(){return _(t)},default(){return e(t.children||[],n+1)}}):H(l(h("el-menu-item"),null,null),{index:(w=t.meta)!=null&&w.isHome?"/":t.path,key:t.id},{default(){return _(t)}})})}return e(u.list,1)}return()=>{let e;return l("div",{class:"app-slider__menu"},[l(h("el-menu"),{"default-active":p.path,"background-color":"transparent","collapse-transition":!1,collapse:d.isMini?!1:o.isFold,onSelect:v},Et(e=i())?e:{default:()=>[e]})])}}}),Tt={class:"app-slider"},Vt={class:"app-slider__logo"},Dt={key:0},Lt={class:"app-slider__container"},Ot=k({name:"app-slider"}),zt=k({...Ot,setup($){const{browser:p}=q(),{app:d}=S();return(u,o)=>{const v=h("el-scrollbar");return c(),b("div",Tt,[s("div",Vt,[o[0]||(o[0]=s("img",{src:ut},null,-1)),!m(d).isFold||m(p).isMini?(c(),b("span",Dt,I(m(d).info.name),1)):D("",!0)]),s("div",Lt,[l(v,null,{default:y(()=>[l(m(Ft))]),_:1})])])}}}),jt={class:"app-process"},At={class:"app-process__container"},Ht=["data-index","onClick","onContextmenu"],Kt=k({name:"app-process"}),Wt=k({...Kt,setup($){const{refs:p,setRefs:d,route:u,router:o,mitt:v}=R(),{process:i}=S();function e(){v.emit("view.refresh")}function a(){o.push("/")}function n(){o.back()}function t(){if(!i.list.find(r=>r.active)){const r=W(i.list);o.push(r?r.fullPath:"/")}}function _(f){p.scroller.wrapRef.scrollTo({left:f,behavior:"smooth"})}function w(f){const r=p[`item-${f}`];r&&_(r.offsetLeft-(p.scroller.wrapRef.clientWidth+r.clientWidth)/2)}function g(f,r){w(r),o.push(f.fullPath)}function x(f){i.remove(f),t()}function B(f,r){dt.ContextMenu.open(f,{hover:{target:"app-process__item"},list:[{label:"关闭当前",hidden:r.fullPath!==u.path,callback(C){x(i.list.findIndex(P=>P.fullPath==r.fullPath)),C(),t()}},{label:"关闭其他",callback(C){i.set(i.list.filter(P=>P.fullPath==r.fullPath)),C(),t()}},{label:"关闭所有",callback(C){i.clear(),C(),t()}}]})}return G(()=>u.path,function(f){w(i.list.findIndex(r=>r.fullPath===f)||0)}),z(()=>{var f;(f=p.scroller.wrapRef)==null||f.addEventListener("wheel",function(r){r.preventDefault();const P=r.deltaY*2;_(p.scroller.wrapRef.scrollLeft+P)})}),(f,r)=>{const C=h("el-icon"),P=h("el-scrollbar");return c(),b("div",jt,[s("ul",{class:"app-process__op"},[s("li",{class:"item",onClick:n},r[0]||(r[0]=[s("i",{class:"cl-iconfont cl-icon-back"},null,-1)])),s("li",{class:"item",onClick:e},r[1]||(r[1]=[s("i",{class:"cl-iconfont cl-icon-refresh"},null,-1)])),s("li",{class:"item",onClick:a},r[2]||(r[2]=[s("i",{class:"cl-iconfont cl-icon-home"},null,-1)]))]),s("div",At,[l(P,{ref:m(d)("scroller"),class:"app-process__scroller"},{default:y(()=>[(c(!0),b(V,null,L(m(i).list,(N,F)=>{var A;return c(),b("div",{key:F,ref_for:!0,ref:m(d)(`item-${F}`),class:j(["app-process__item",{active:N.active}]),"data-index":F,onClick:O=>g(N,Number(F)),onContextmenu:K(O=>B(O,N),["stop","prevent"])},[s("span",null,I(((A=N.meta)==null?void 0:A.label)||N.name||N.path),1),l(C,{onMousedown:K(O=>x(Number(F)),["stop"])},{default:y(()=>[l(m(Q))]),_:2},1032,["onMousedown"])],42,Ht)}),128))]),_:1},512)])])}}}),Gt=E(Wt,[["__scopeId","data-v-5c5d402b"]]),Ut={class:"app-views"},Xt=k({name:"app-views"}),Yt=k({...Xt,setup($){const{mitt:p}=R(),{process:d,app:u}=S(),o=X(1),v=T(()=>d.list.filter(e=>{var a;return(a=e.meta)==null?void 0:a.keepAlive}).map(e=>e.path.substring(1,e.path.length).replace(/\//g,"-")));function i(){o.value+=1}return z(()=>{p.on("view.refresh",i)}),rt(()=>{p.off("view.refresh")}),(e,a)=>{const n=h("router-view");return c(),b("div",Ut,[l(n,null,{default:y(({Component:t})=>[l(mt,{name:m(u).info.router.transition||"none"},{default:y(()=>[(c(),M(at,{key:o.value,include:v.value},[(c(),M(U(t)))],1032,["include"]))]),_:2},1032,["name"])]),_:1})])}}}),qt=E(Yt,[["__scopeId","data-v-4cc9a434"]]),Jt={class:"app-layout__left"},Qt={class:"app-layout__right"},Zt=k({name:"app-layout"}),te=k({...Zt,setup($){const{app:p}=S();return(d,u)=>(c(),b("div",{class:j(["app-layout",{collapse:m(p).isFold}])},[s("div",{class:"app-layout__mask",onClick:u[0]||(u[0]=o=>m(p).fold(!0))}),s("div",Jt,[l(zt)]),s("div",Qt,[l(Rt),l(Gt),l(qt)])],2))}}),eo=E(te,[["__scopeId","data-v-fead7c0a"]]);export{eo as default};
