import{i as v}from"./comm-DyJRlPK0.js";import{i as g,bg as V}from"./lodash-es@4.17.21-D6PnhKvy.js";import{a as c}from"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import{d as h,w as C,i as b,_ as w}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{r as n}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import"./@vue_shared@3.5.12-UFe9jxSY.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";const O=h({name:"cl-switch",props:{scope:null,column:null,modelValue:[Number,String,Boolean],activeValue:{type:[Number,String,Boolean],default:1},inactiveValue:{type:[Number,String,Boolean],default:0},api:Function},emits:["update:modelValue","change"],setup(t,{emit:a}){const s=v.useCrud(),i=n(),o=n(),u=n();C(()=>t.modelValue,e=>{if(i.value=e,e!==void 0&&V(e))return o.value=!0,u.value=!1,!0;o.value=t.activeValue,u.value=t.inactiveValue},{immediate:!0});function p(e){var r;if(t.column&&t.scope){if(e!==void 0&&(i.value===o.value||i.value===u.value)){const l={id:t.scope.id,[t.column.property]:e},m=g(t.api)?t.api(l):(r=s.value)==null?void 0:r.service.update(l);m&&m.then(()=>{a("update:modelValue",e),a("change",e),c.success("更新成功")}).catch(f=>{c.error(f.message)})}}else a("update:modelValue",e),a("change",e)}function d(e){e.stopPropagation()}return()=>b(w("el-switch"),{"model-value":i.value,"active-value":o.value,"inactive-value":u.value,onChange:p,onClick:d},null)}});export{O as default};
