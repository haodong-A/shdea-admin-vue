import{i as d}from"./comm-DyJRlPK0.js";import"./index-CmZ4zCGF.js";import"./store@2.0.12-RoMfFez2.js";import{u as U}from"./index-CO9VWbz1.js";import"./@wangeditor_plugin-link-card@1.0.0_@wangeditor_editor@5.1.23_snabbdom@3.6.2-D_kdJ7Fs.js";import"./@wangeditor_editor@5.1.23-BNs7_II4.js";import{_ as W}from"./spec.vue_vue_type_script_setup_true_name_cl-spec_lang-DwLPU05T.js";import{d as g,i as e,P as q,_ as t,b as v,o as N,a as A,K as L,L as a}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{r as _}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import"./lodash-es@4.17.21-D6PnhKvy.js";import"./@vue_shared@3.5.12-UFe9jxSY.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./@vueuse_core@11.1.0_vue@3.5.12_typescript@5.5.4_-BKaerpSy.js";import"./@vueuse_shared@11.1.0_vue@3.5.12_typescript@5.5.4_-DXriuop5.js";import"./mitt@3.0.1-C1z4c41a.js";import"./axios@1.7.7-CCb-kr4I.js";import"./nprogress@0.2.0-B8S133N7.js";import"./pinia@2.2.4_typescript@5.5.4_vue@3.5.12_typescript@5.5.4_-CVf9nHlw.js";import"./vue-demi@0.14.10_vue@3.5.12_typescript@5.5.4_-DvPnGcuI.js";import"./@bytemd_plugin-math@1.21.0_bytemd@1.21.0-Dc_JUVYX.js";import"./remark-math@5.1.1-C8vps_rM.js";import"./micromark-extension-math@2.1.2-StTlgfH1.js";import"./micromark-factory-space@1.1.0-C57A7NS2.js";import"./micromark-util-character@1.2.0-D-NaLusr.js";import"./katex@0.16.11-CvgdMzdh.js";import"./mdast-util-math@2.0.2-Boy2OOKg.js";import"./longest-streak@3.1.0-BHNUWYJP.js";import"./mdast-util-to-markdown@1.5.0-D9VzXa1u.js";import"./micromark-util-decode-string@1.1.0-CdHYbWAu.js";import"./decode-named-character-reference@1.0.2-C3-224fz.js";import"./micromark-util-decode-numeric-character-reference@1.1.0-DRnCnno4.js";import"./vue-router@4.4.5_vue@3.5.12_typescript@5.5.4_-DGEeQixy.js";import"./mockjs@1.1.0-hXCvQ4kl.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.12_echarts@5.5.1_vue@3.5.12_typescript@5.5.4_-tmE62Ovn.js";import"./echarts@5.5.1-D8FyPvXx.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.0-CH1asNwC.js";import"./index-DQKPLNU9.js";const P=g({name:"goods-info"}),Me=g({...P,setup(S){const{service:f}=U(),b=[{label:"下架",value:0},{label:"上架",value:1}],i=_([]),y=d.useUpsert({items:[{label:"编号",renderLabel:e(t("el-tooltip"),{content:"该编号主要用于标记产品，例如产品编号 sd-1001a, sd-1001b, 则可以输入sd-1000"},{default:()=>[q("编号")]}),prop:"goodsId",required:!0,span:16,component:{name:"el-input",props:{placeholder:"请输入编号"}}},{label:"标题",prop:"title",required:!0,span:16,component:{name:"el-input"}},{label:"示例图",prop:"cover",required:!0,component:{name:"cl-upload"}},{label:"分类",prop:"category",required:!0,span:16,hook:{bind:["split","number"],submit:["join"]},component:{name:"el-cascader",props:{options:v(()=>i.value)}}},{label:"品牌",prop:"brand",span:16,component:{name:"el-input",props:{placeholder:"请输入品牌名称，默认SHDEA"}}},{label:"描述",prop:"description",span:16,component:{name:"el-input",props:{type:"textarea",showWordLimit:!0,maxlength:400,autosize:{minRows:3,maxRows:10},placeholder:"请输入描述"}}},{label:"状态",prop:"status",span:16,value:1,component:{name:"el-switch",props:{inlinePrompt:!0,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},activeValue:1,inactiveValue:0,activeText:"上架",inactiveText:"下架"}}}]});N(async()=>{const l=await f.goods.category.list()||[],o=l.filter(r=>!r.parentCategoryId);i.value=o.map(r=>{const n=l.filter(p=>r.id==p.parentCategoryId).map(p=>({label:p.categoryName,value:p.id}));return{label:r.categoryName,value:r.id,children:n}})});const c=_(!1),m=_(),x=d.useTable({contextMenu:["delete","check","edit",l=>({label:"规格",callback(o){c.value=!0,m.value=l.id,o()}})],columns:[{type:"selection"},{label:"编号",prop:"goodsId"},{label:"标题",prop:"title"},{label:"示例图",prop:"cover",minWidth:140,component:{name:"cl-image"}},{label:"分类",prop:"category",dict:v(()=>{const l=[];function o(r){r.forEach(n=>{n.children&&n.children.length&&o(n.children),l.push({label:n.label,value:n.value.toString()})})}return o(i.value),l}),minWidth:120},{label:"品牌",prop:"brand",minWidth:120},{label:"状态",prop:"status",dict:b,minWidth:120,component:{name:"cl-switch",props:{inlinePrompt:!0,activeText:"上架",inactiveText:"下架",style:"--el-switch-on-color: #13ce66; --el-switch-off-color: #ff4949"}}}]}),w=d.useCrud({service:f.goods.info},l=>{l.refresh()});return(l,o)=>{const r=t("cl-refresh-btn"),n=t("cl-add-btn"),p=t("cl-multi-delete-btn"),h=t("cl-flex1"),C=t("cl-select"),E=t("cl-filter"),F=t("cl-search-key"),s=t("cl-row"),k=t("cl-upsert"),V=t("cl-table"),T=t("cl-dialog"),B=t("cl-pagination"),I=t("cl-crud");return A(),L(I,{ref_key:"Crud",ref:w},{default:a(()=>[e(s,null,{default:a(()=>[e(r),e(n),e(p),e(h),e(E,null,{default:a(()=>[e(C,{prop:"status",options:b})]),_:1}),e(F,{placeholder:"搜索关键字"})]),_:1}),e(s,null,{default:a(()=>[e(k,{ref_key:"Upsert",ref:y},null,512),e(V,{ref_key:"Table",ref:x},null,512),e(T,{title:"规格列表",modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=u=>c.value=u),width:"80%"},{default:a(()=>[e(W,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=u=>m.value=u)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(h),e(B)]),_:1})]),_:1},512)}}});export{Me as default};
