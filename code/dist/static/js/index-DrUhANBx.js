import{d as D}from"./vuedraggable@4.1.0_vue@3.5.12_typescript@5.5.4_-ClfVxlJ-.js";import{s as C}from"./index-CmZ4zCGF.js";import"./@wangeditor_plugin-link-card@1.0.0_@wangeditor_editor@5.1.23_snabbdom@3.6.2-D_kdJ7Fs.js";import"./@wangeditor_editor@5.1.23-BNs7_II4.js";import{bg as E,h as $,c8 as w}from"./lodash-es@4.17.21-D6PnhKvy.js";import{d as U,b as x,w as A,n as I,a as F,c as S,i as l,L as n,_ as v,P as c,f as V}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{r as B}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{O as q}from"./@vue_shared@3.5.12-UFe9jxSY.js";import"./sortablejs@1.14.0-CkefhRDt.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";import"./@vueuse_core@11.1.0_vue@3.5.12_typescript@5.5.4_-BKaerpSy.js";import"./@vueuse_shared@11.1.0_vue@3.5.12_typescript@5.5.4_-DXriuop5.js";import"./store@2.0.12-RoMfFez2.js";import"./mitt@3.0.1-C1z4c41a.js";import"./axios@1.7.7-CCb-kr4I.js";import"./nprogress@0.2.0-B8S133N7.js";import"./pinia@2.2.4_typescript@5.5.4_vue@3.5.12_typescript@5.5.4_-CVf9nHlw.js";import"./vue-demi@0.14.10_vue@3.5.12_typescript@5.5.4_-DvPnGcuI.js";import"./@bytemd_plugin-math@1.21.0_bytemd@1.21.0-Dc_JUVYX.js";import"./remark-math@5.1.1-C8vps_rM.js";import"./micromark-extension-math@2.1.2-StTlgfH1.js";import"./micromark-factory-space@1.1.0-C57A7NS2.js";import"./micromark-util-character@1.2.0-D-NaLusr.js";import"./katex@0.16.11-CvgdMzdh.js";import"./mdast-util-math@2.0.2-Boy2OOKg.js";import"./longest-streak@3.1.0-BHNUWYJP.js";import"./mdast-util-to-markdown@1.5.0-D9VzXa1u.js";import"./micromark-util-decode-string@1.1.0-CdHYbWAu.js";import"./decode-named-character-reference@1.0.2-C3-224fz.js";import"./micromark-util-decode-numeric-character-reference@1.1.0-DRnCnno4.js";import"./vue-router@4.4.5_vue@3.5.12_typescript@5.5.4_-DGEeQixy.js";import"./mockjs@1.1.0-hXCvQ4kl.js";import"./comm-DyJRlPK0.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.12_echarts@5.5.1_vue@3.5.12_typescript@5.5.4_-tmE62Ovn.js";import"./echarts@5.5.1-D8FyPvXx.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.0-CH1asNwC.js";const L=U({name:"cl-column-custom",components:{Draggable:D},props:{name:String,columns:{type:Array,required:!0,default:()=>[]}},setup(r){const e=B(!1),f=`column-custom__${r.name||location.pathname}`,p=B([]),s=x(()=>r.columns.filter(o=>!o.type&&o.prop));function _(){I(()=>{s.value.forEach(o=>{var t;o.hidden=!((t=p.value.find(m=>m.prop==o.prop))!=null&&t.checked),o.orderNum=p.value.findIndex(m=>m.prop==o.prop)})})}function a(){C.set(f,p.value),_(),u()}function g(){s.value.forEach(o=>{o.orderNum!==void 0&&(o.hidden=!1,o.orderNum=0)}),C.remove(f),d(),u()}function k(){e.value=!0,d()}function u(){e.value=!1}function i(o){return w(o,"orderNum","asc")}function d(){if(!r.columns)return!1;const o=C.get(f);p.value=i(s.value.map(t=>{var y;let m=!0,h=t.orderNum||0;return E(t.hidden)&&(m=!t.hidden),o&&(m=(y=o.find(b=>b.prop==t.prop))==null?void 0:y.checked,h=o.findIndex(b=>b.prop==t.prop)),{label:t.label,prop:t.prop,checked:m,orderNum:h}})),_()}function N(o){return i(s.value.filter(t=>!t.hidden)).map(t=>$(o,t.prop)?o[t.prop]:"")}return A(()=>r.columns,()=>{d()}),{visible:e,list:p,open:k,close:u,save:a,reset:g,summary:N}}}),O={class:"cl-column-custom__wrap"},P={class:"cl-column-custom__dialog"},j={class:"left"};function z(r,e,f,p,s,_){const a=v("el-button"),g=v("el-checkbox"),k=v("draggable"),u=v("cl-dialog");return F(),S("div",O,[l(a,{onClick:r.open},{default:n(()=>e[2]||(e[2]=[c("筛选")])),_:1},8,["onClick"]),l(u,{modelValue:r.visible,"onUpdate:modelValue":e[1]||(e[1]=i=>r.visible=i),title:"自定义列"},{footer:n(()=>[l(a,{onClick:r.close},{default:n(()=>e[4]||(e[4]=[c("取消")])),_:1},8,["onClick"]),l(a,{type:"danger",onClick:r.reset},{default:n(()=>e[5]||(e[5]=[c("重置")])),_:1},8,["onClick"]),l(a,{type:"success",onClick:r.save},{default:n(()=>e[6]||(e[6]=[c("保存")])),_:1},8,["onClick"])]),default:n(()=>[V("div",P,[V("div",j,[l(k,{modelValue:r.list,"onUpdate:modelValue":e[0]||(e[0]=i=>r.list=i),"item-key":"prop"},{item:n(({element:i})=>[l(g,{modelValue:i.checked,"onUpdate:modelValue":d=>i.checked=d,border:""},{default:n(()=>[c(q(i.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),e[3]||(e[3]=V("div",{class:"right"},null,-1))])]),_:1},8,["modelValue"])])}const Ho=T(L,[["render",z],["__scopeId","data-v-4b5a6a54"]]);export{Ho as default};
