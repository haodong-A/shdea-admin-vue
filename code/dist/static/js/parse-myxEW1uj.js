import{v as O}from"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import{i as d}from"./comm-DyJRlPK0.js";import{bB as c,q as v}from"./lodash-es@4.17.21-D6PnhKvy.js";import{a as N}from"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import{d as h,w as u,o as E,n as I,a as w,c as F,M,i as l,_ as b}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{j as S}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import"./@vue_shared@3.5.12-UFe9jxSY.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";const V={style:{width:"100%"}},f=h({name:"cl-parse-input"}),ee=h({...f,props:{modelValue:{type:[String,Object],default:""},fieldOptions:{type:[Array,String],required:!0,default:""}},emits:["update:modelValue"],setup(n,{expose:g,emit:_}){const k=_,s=n;function m(r){let e={};switch(r.name){case"text":e={name:"el-input"};break;case"textarea":e={name:"el-input",props:{type:"textarea"}};break;case"number":e={name:"el-input-number",props:{max:Math.max(...r.props.range)==Number.NEGATIVE_INFINITY?1e3:Math.max(...r.props.range),min:Math.min(...r.props.range)==Number.POSITIVE_INFINITY?0:Math.min(...r.props.range)}};break;case"time":e={name:"el-date-picker"};break;case"radio":e={name:"el-radio-group"};break;case"checkbox":e={name:"el-checkbox-group"};break;default:e={name:"el-input"}}return e}const o=d.useForm();function x(r){function e(t){return typeof t>"u"||t===null||t===""}return Object.keys(r).forEach(t=>{e(r[t])&&delete r[t]}),r}function p(r){if(v(r))return r.map(e=>{var t;return e.isGroup||e.name=="group"?{component:{name:"cl-form-card",props:{label:e.label,expand:!0}},children:p(e.children)}:{label:e==null?void 0:e.label,prop:(e==null?void 0:e.prop)||(e==null?void 0:e.props.paramName),required:e==null?void 0:e.props.required,span:24,component:{name:m(e).name,props:{...Object.assign(x(e.props),((t=m(e))==null?void 0:t.props)||{})},options:e.props.options||[]}}});if(r&&c(r))try{const e=JSON.parse(r);return p(e)}catch{N.error("模板出错，请重新获取编辑页面")}}u(()=>s.modelValue,r=>{var e;if(r&&c(r)){const t=JSON.parse(r),a=(e=o.value)==null?void 0:e.form;Object.keys(a).forEach(i=>{a[i]=t[i]})}}),u(()=>{var r;return(r=o.value)==null?void 0:r.form},()=>{var r,e;(r=o.value)==null||r.getForm(),k("update:modelValue",(e=o.value)==null?void 0:e.getForm())},{deep:!0}),E(()=>{I(()=>{var e;const r=S(s.fieldOptions);(e=o.value)==null||e.open({op:{hidden:!0},items:p(r)})})});async function y(){var e;let r=!0;return await((e=o.value)==null?void 0:e.validate((t,a)=>{r=t})),r}return g({validate:y}),(r,e)=>{const t=b("el-empty"),a=b("cl-form");return w(),F("div",V,[M(l(t,{"image-size":100,description:"请先设计字段"},null,512),[[O,!n.fieldOptions||n.fieldOptions.length===0]]),l(a,{ref_key:"Form",ref:o,inner:""},null,512)])}}});export{ee as default};
