import{c as Me,a as Up}from"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import{r as Hp}from"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import{r as Wp}from"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";var nt={exports:{}};nt.exports;(function(Q,te){(function($t,rt){Q.exports=rt(Hp(),Wp)})(typeof self<"u"?self:Me,function($t,rt){return function(){var gr={515:function(e){e.exports=$t},274:function(e){e.exports=rt}},It={};function q(e){var t=It[e];if(t!==void 0)return t.exports;var n=It[e]={exports:{}};return gr[e](n,n.exports,q),n.exports}(function(){q.d=function(e,t){for(var n in t)q.o(t,n)&&!q.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),function(){q.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){q.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){q.p=""}();var ot={};if(q.r(ot),q.d(ot,{ContextMenu:function(){return pr},crudList:function(){return Qe},default:function(){return Dp},emitter:function(){return Qn},locale:function(){return vr},registerFormHook:function(){return Bf},setFocus:function(){return Fp},useAdvSearch:function(){return Zd},useBrowser:function(){return xe},useConfig:function(){return B},useCore:function(){return M},useCrud:function(){return er},useDialog:function(){return nr},useElApi:function(){return Ze},useEventListener:function(){return tf},useForm:function(){return tr},useProxy:function(){return kt},useRefs:function(){return Be},useSearch:function(){return ef},useTable:function(){return Qd},useUpsert:function(){return Yd}}),typeof window<"u"){var Lt=window.document.currentScript,Rt=Lt&&Lt.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);Rt&&(q.p=Rt[1])}var o=q(274);function yr(){this.__data__=[],this.size=0}var wr=yr;function _r(e,t){return e===t||e!==e&&t!==t}var Se=_r;function jr(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}var De=jr,Cr=Array.prototype,xr=Cr.splice;function Sr(e){var t=this.__data__,n=De(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():xr.call(t,n,1),--this.size,!0}var Vr=Sr;function Nr(e){var t=this.__data__,n=De(t,e);return n<0?void 0:t[n][1]}var Or=Nr;function kr(e){return De(this.__data__,e)>-1}var zr=kr;function Er(e,t){var n=this.__data__,r=De(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Ar=Er;function fe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fe.prototype.clear=wr,fe.prototype.delete=Vr,fe.prototype.get=Or,fe.prototype.has=zr,fe.prototype.set=Ar;var $e=fe;function Tr(){this.__data__=new $e,this.size=0}var Pr=Tr;function Br(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Fr=Br;function Mr(e){return this.__data__.get(e)}var Dr=Mr;function $r(e){return this.__data__.has(e)}var Ir=$r,Lr=typeof Me=="object"&&Me&&Me.Object===Object&&Me,Ut=Lr,Rr=typeof self=="object"&&self&&self.Object===Object&&self,Ur=Ut||Rr||Function("return this")(),J=Ur,Hr=J.Symbol,K=Hr,Ht=Object.prototype,Wr=Ht.hasOwnProperty,qr=Ht.toString,Ve=K?K.toStringTag:void 0;function Kr(e){var t=Wr.call(e,Ve),n=e[Ve];try{e[Ve]=void 0;var r=!0}catch{}var a=qr.call(e);return r&&(t?e[Ve]=n:delete e[Ve]),a}var Gr=Kr,Jr=Object.prototype,Xr=Jr.toString;function Yr(e){return Xr.call(e)}var Qr=Yr,Zr="[object Null]",eo="[object Undefined]",Wt=K?K.toStringTag:void 0;function to(e){return e==null?e===void 0?eo:Zr:Wt&&Wt in Object(e)?Gr(e):Qr(e)}var Z=to;function no(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var R=no,ro="[object AsyncFunction]",oo="[object Function]",ao="[object GeneratorFunction]",io="[object Proxy]";function co(e){if(!R(e))return!1;var t=Z(e);return t==oo||t==ao||t==ro||t==io}var U=co,lo=J["__core-js_shared__"],at=lo,qt=function(){var e=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function so(e){return!!qt&&qt in e}var uo=so,fo=Function.prototype,po=fo.toString;function vo(e){if(e!=null){try{return po.call(e)}catch{}try{return e+""}catch{}}return""}var ae=vo,mo=/[\\^$.*+?()[\]{}|]/g,ho=/^\[object .+?Constructor\]$/,bo=Function.prototype,go=Object.prototype,yo=bo.toString,wo=go.hasOwnProperty,_o=RegExp("^"+yo.call(wo).replace(mo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jo(e){if(!R(e)||uo(e))return!1;var t=U(e)?_o:ho;return t.test(ae(e))}var Co=jo;function xo(e,t){return e==null?void 0:e[t]}var So=xo;function Vo(e,t){var n=So(e,t);return Co(n)?n:void 0}var ie=Vo,No=ie(J,"Map"),Ne=No,Oo=ie(Object,"create"),Oe=Oo;function ko(){this.__data__=Oe?Oe(null):{},this.size=0}var zo=ko;function Eo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ao=Eo,To="__lodash_hash_undefined__",Po=Object.prototype,Bo=Po.hasOwnProperty;function Fo(e){var t=this.__data__;if(Oe){var n=t[e];return n===To?void 0:n}return Bo.call(t,e)?t[e]:void 0}var Mo=Fo,Do=Object.prototype,$o=Do.hasOwnProperty;function Io(e){var t=this.__data__;return Oe?t[e]!==void 0:$o.call(t,e)}var Lo=Io,Ro="__lodash_hash_undefined__";function Uo(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Oe&&t===void 0?Ro:t,this}var Ho=Uo;function pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=zo,pe.prototype.delete=Ao,pe.prototype.get=Mo,pe.prototype.has=Lo,pe.prototype.set=Ho;var Kt=pe;function Wo(){this.size=0,this.__data__={hash:new Kt,map:new(Ne||$e),string:new Kt}}var qo=Wo;function Ko(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Go=Ko;function Jo(e,t){var n=e.__data__;return Go(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ie=Jo;function Xo(e){var t=Ie(this,e).delete(e);return this.size-=t?1:0,t}var Yo=Xo;function Qo(e){return Ie(this,e).get(e)}var Zo=Qo;function ea(e){return Ie(this,e).has(e)}var ta=ea;function na(e,t){var n=Ie(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var ra=na;function ve(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ve.prototype.clear=qo,ve.prototype.delete=Yo,ve.prototype.get=Zo,ve.prototype.has=ta,ve.prototype.set=ra;var Le=ve,oa=200;function aa(e,t){var n=this.__data__;if(n instanceof $e){var r=n.__data__;if(!Ne||r.length<oa-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Le(r)}return n.set(e,t),this.size=n.size,this}var ia=aa;function me(e){var t=this.__data__=new $e(e);this.size=t.size}me.prototype.clear=Pr,me.prototype.delete=Fr,me.prototype.get=Dr,me.prototype.has=Ir,me.prototype.set=ia;var he=me;function ca(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var la=ca,sa=function(){try{var e=ie(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Re=sa;function ua(e,t,n){t=="__proto__"&&Re?Re(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var it=ua,da=Object.prototype,fa=da.hasOwnProperty;function pa(e,t,n){var r=e[t];fa.call(e,t)&&Se(r,n)&&(n!==void 0||t in e)||it(e,t,n)}var Gt=pa;function va(e,t,n,r){var a=!n;n||(n={});for(var i=-1,c=t.length;++i<c;){var l=t[i],s=r?r(n[l],e[l],l,n,e):void 0;s===void 0&&(s=e[l]),a?it(n,l,s):Gt(n,l,s)}return n}var ke=va;function ma(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ha=ma;function ba(e){return e!=null&&typeof e=="object"}var H=ba,ga="[object Arguments]";function ya(e){return H(e)&&Z(e)==ga}var Jt=ya,Xt=Object.prototype,wa=Xt.hasOwnProperty,_a=Xt.propertyIsEnumerable,ja=Jt(function(){return arguments}())?Jt:function(e){return H(e)&&wa.call(e,"callee")&&!_a.call(e,"callee")},be=ja,Ca=Array.isArray,O=Ca;function xa(){return!1}var Sa=xa,Yt=te&&!te.nodeType&&te,Qt=Yt&&!0&&Q&&!Q.nodeType&&Q,Va=Qt&&Qt.exports===Yt,Zt=Va?J.Buffer:void 0,Na=Zt?Zt.isBuffer:void 0,Oa=Na||Sa,ge=Oa,ka=9007199254740991,za=/^(?:0|[1-9]\d*)$/;function Ea(e,t){var n=typeof e;return t=t??ka,!!t&&(n=="number"||n!="symbol"&&za.test(e))&&e>-1&&e%1==0&&e<t}var ct=Ea,Aa=9007199254740991;function Ta(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Aa}var lt=Ta,Pa="[object Arguments]",Ba="[object Array]",Fa="[object Boolean]",Ma="[object Date]",Da="[object Error]",$a="[object Function]",Ia="[object Map]",La="[object Number]",Ra="[object Object]",Ua="[object RegExp]",Ha="[object Set]",Wa="[object String]",qa="[object WeakMap]",Ka="[object ArrayBuffer]",Ga="[object DataView]",Ja="[object Float32Array]",Xa="[object Float64Array]",Ya="[object Int8Array]",Qa="[object Int16Array]",Za="[object Int32Array]",ei="[object Uint8Array]",ti="[object Uint8ClampedArray]",ni="[object Uint16Array]",ri="[object Uint32Array]",E={};function oi(e){return H(e)&&lt(e.length)&&!!E[Z(e)]}E[Ja]=E[Xa]=E[Ya]=E[Qa]=E[Za]=E[ei]=E[ti]=E[ni]=E[ri]=!0,E[Pa]=E[Ba]=E[Ka]=E[Fa]=E[Ga]=E[Ma]=E[Da]=E[$a]=E[Ia]=E[La]=E[Ra]=E[Ua]=E[Ha]=E[Wa]=E[qa]=!1;var ai=oi;function ii(e){return function(t){return e(t)}}var Ue=ii,en=te&&!te.nodeType&&te,ze=en&&!0&&Q&&!Q.nodeType&&Q,ci=ze&&ze.exports===en,st=ci&&Ut.process,li=function(){try{var e=ze&&ze.require&&ze.require("util").types;return e||st&&st.binding&&st.binding("util")}catch{}}(),ye=li,tn=ye&&ye.isTypedArray,si=tn?Ue(tn):ai,He=si,ui=Object.prototype,di=ui.hasOwnProperty;function fi(e,t){var n=O(e),r=!n&&be(e),a=!n&&!r&&ge(e),i=!n&&!r&&!a&&He(e),c=n||r||a||i,l=c?ha(e.length,String):[],s=l.length;for(var u in e)!t&&!di.call(e,u)||c&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ct(u,s))||l.push(u);return l}var nn=fi,pi=Object.prototype;function vi(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||pi;return e===n}var We=vi;function mi(e,t){return function(n){return e(t(n))}}var rn=mi,hi=rn(Object.keys,Object),bi=hi,gi=Object.prototype,yi=gi.hasOwnProperty;function wi(e){if(!We(e))return bi(e);var t=[];for(var n in Object(e))yi.call(e,n)&&n!="constructor"&&t.push(n);return t}var on=wi;function _i(e){return e!=null&&lt(e.length)&&!U(e)}var ce=_i;function ji(e){return ce(e)?nn(e):on(e)}var Ee=ji;function Ci(e,t){return e&&ke(t,Ee(t),e)}var xi=Ci;function Si(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Vi=Si,Ni=Object.prototype,Oi=Ni.hasOwnProperty;function ki(e){if(!R(e))return Vi(e);var t=We(e),n=[];for(var r in e)(r!="constructor"||!t&&Oi.call(e,r))&&n.push(r);return n}var zi=ki;function Ei(e){return ce(e)?nn(e,!0):zi(e)}var Ae=Ei;function Ai(e,t){return e&&ke(t,Ae(t),e)}var Ti=Ai,an=te&&!te.nodeType&&te,cn=an&&!0&&Q&&!Q.nodeType&&Q,Pi=cn&&cn.exports===an,ln=Pi?J.Buffer:void 0,sn=ln?ln.allocUnsafe:void 0;function Bi(e,t){if(t)return e.slice();var n=e.length,r=sn?sn(n):new e.constructor(n);return e.copy(r),r}var un=Bi;function Fi(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var dn=Fi;function Mi(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var c=e[n];t(c,n,e)&&(i[a++]=c)}return i}var Di=Mi;function $i(){return[]}var fn=$i,Ii=Object.prototype,Li=Ii.propertyIsEnumerable,pn=Object.getOwnPropertySymbols,Ri=pn?function(e){return e==null?[]:(e=Object(e),Di(pn(e),function(t){return Li.call(e,t)}))}:fn,ut=Ri;function Ui(e,t){return ke(e,ut(e),t)}var Hi=Ui;function Wi(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var dt=Wi,qi=rn(Object.getPrototypeOf,Object),ft=qi,Ki=Object.getOwnPropertySymbols,Gi=Ki?function(e){for(var t=[];e;)dt(t,ut(e)),e=ft(e);return t}:fn,vn=Gi;function Ji(e,t){return ke(e,vn(e),t)}var Xi=Ji;function Yi(e,t,n){var r=t(e);return O(e)?r:dt(r,n(e))}var mn=Yi;function Qi(e){return mn(e,Ee,ut)}var pt=Qi;function Zi(e){return mn(e,Ae,vn)}var ec=Zi,tc=ie(J,"DataView"),vt=tc,nc=ie(J,"Promise"),mt=nc,rc=ie(J,"Set"),ht=rc,oc=ie(J,"WeakMap"),bt=oc,hn="[object Map]",ac="[object Object]",bn="[object Promise]",gn="[object Set]",yn="[object WeakMap]",wn="[object DataView]",ic=ae(vt),cc=ae(Ne),lc=ae(mt),sc=ae(ht),uc=ae(bt),le=Z;(vt&&le(new vt(new ArrayBuffer(1)))!=wn||Ne&&le(new Ne)!=hn||mt&&le(mt.resolve())!=bn||ht&&le(new ht)!=gn||bt&&le(new bt)!=yn)&&(le=function(e){var t=Z(e),n=t==ac?e.constructor:void 0,r=n?ae(n):"";if(r)switch(r){case ic:return wn;case cc:return hn;case lc:return bn;case sc:return gn;case uc:return yn}return t});var we=le,dc=Object.prototype,fc=dc.hasOwnProperty;function pc(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&fc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var vc=pc,mc=J.Uint8Array,qe=mc;function hc(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}var gt=hc;function bc(e,t){var n=t?gt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var gc=bc,yc=/\w*$/;function wc(e){var t=new e.constructor(e.source,yc.exec(e));return t.lastIndex=e.lastIndex,t}var _c=wc,_n=K?K.prototype:void 0,jn=_n?_n.valueOf:void 0;function jc(e){return jn?Object(jn.call(e)):{}}var Cc=jc;function xc(e,t){var n=t?gt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Cn=xc,Sc="[object Boolean]",Vc="[object Date]",Nc="[object Map]",Oc="[object Number]",kc="[object RegExp]",zc="[object Set]",Ec="[object String]",Ac="[object Symbol]",Tc="[object ArrayBuffer]",Pc="[object DataView]",Bc="[object Float32Array]",Fc="[object Float64Array]",Mc="[object Int8Array]",Dc="[object Int16Array]",$c="[object Int32Array]",Ic="[object Uint8Array]",Lc="[object Uint8ClampedArray]",Rc="[object Uint16Array]",Uc="[object Uint32Array]";function Hc(e,t,n){var r=e.constructor;switch(t){case Tc:return gt(e);case Sc:case Vc:return new r(+e);case Pc:return gc(e,n);case Bc:case Fc:case Mc:case Dc:case $c:case Ic:case Lc:case Rc:case Uc:return Cn(e,n);case Nc:return new r;case Oc:case Ec:return new r(e);case kc:return _c(e);case zc:return new r;case Ac:return Cc(e)}}var Wc=Hc,xn=Object.create,qc=function(){function e(){}return function(t){if(!R(t))return{};if(xn)return xn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Kc=qc;function Gc(e){return typeof e.constructor!="function"||We(e)?{}:Kc(ft(e))}var Sn=Gc,Jc="[object Map]";function Xc(e){return H(e)&&we(e)==Jc}var Yc=Xc,Vn=ye&&ye.isMap,Qc=Vn?Ue(Vn):Yc,Zc=Qc,el="[object Set]";function tl(e){return H(e)&&we(e)==el}var nl=tl,Nn=ye&&ye.isSet,rl=Nn?Ue(Nn):nl,ol=rl,al=1,il=2,cl=4,On="[object Arguments]",ll="[object Array]",sl="[object Boolean]",ul="[object Date]",dl="[object Error]",kn="[object Function]",fl="[object GeneratorFunction]",pl="[object Map]",vl="[object Number]",zn="[object Object]",ml="[object RegExp]",hl="[object Set]",bl="[object String]",gl="[object Symbol]",yl="[object WeakMap]",wl="[object ArrayBuffer]",_l="[object DataView]",jl="[object Float32Array]",Cl="[object Float64Array]",xl="[object Int8Array]",Sl="[object Int16Array]",Vl="[object Int32Array]",Nl="[object Uint8Array]",Ol="[object Uint8ClampedArray]",kl="[object Uint16Array]",zl="[object Uint32Array]",z={};function Ke(e,t,n,r,a,i){var c,l=t&al,s=t&il,u=t&cl;if(n&&(c=a?n(e,r,a,i):n(e)),c!==void 0)return c;if(!R(e))return e;var d=O(e);if(d){if(c=vc(e),!l)return dn(e,c)}else{var f=we(e),m=f==kn||f==fl;if(ge(e))return un(e,l);if(f==zn||f==On||m&&!a){if(c=s||m?{}:Sn(e),!l)return s?Xi(e,Ti(c,e)):Hi(e,xi(c,e))}else{if(!z[f])return a?e:{};c=Wc(e,f,l)}}i||(i=new he);var v=i.get(e);if(v)return v;i.set(e,c),ol(e)?e.forEach(function(h){c.add(Ke(h,t,n,h,e,i))}):Zc(e)&&e.forEach(function(h,b){c.set(b,Ke(h,t,n,b,e,i))});var _=u?s?ec:pt:s?Ae:Ee,p=d?void 0:_(e);return la(p||e,function(h,b){p&&(b=h,h=e[b]),Gt(c,b,Ke(h,t,n,b,e,i))}),c}z[On]=z[ll]=z[wl]=z[_l]=z[sl]=z[ul]=z[jl]=z[Cl]=z[xl]=z[Sl]=z[Vl]=z[pl]=z[vl]=z[zn]=z[ml]=z[hl]=z[bl]=z[gl]=z[Nl]=z[Ol]=z[kl]=z[zl]=!0,z[dl]=z[kn]=z[yl]=!1;var El=Ke,Al=1,Tl=4;function Pl(e){return El(e,Al|Tl)}var re=Pl,ne=q(515),Bl="[object Number]";function Fl(e){return typeof e=="number"||H(e)&&Z(e)==Bl}var Ml=Fl,En=K?K.isConcatSpreadable:void 0;function Dl(e){return O(e)||be(e)||!!(En&&e&&e[En])}var $l=Dl;function An(e,t,n,r,a){var i=-1,c=e.length;for(n||(n=$l),a||(a=[]);++i<c;){var l=e[i];t>0&&n(l)?t>1?An(l,t-1,n,r,a):dt(a,l):r||(a[a.length]=l)}return a}var Il=An;function Ll(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var Te=Ll,Rl="__lodash_hash_undefined__";function Ul(e){return this.__data__.set(e,Rl),this}var Hl=Ul;function Wl(e){return this.__data__.has(e)}var ql=Wl;function Ge(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Le;++t<n;)this.add(e[t])}Ge.prototype.add=Ge.prototype.push=Hl,Ge.prototype.has=ql;var Kl=Ge;function Gl(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Jl=Gl;function Xl(e,t){return e.has(t)}var Yl=Xl,Ql=1,Zl=2;function es(e,t,n,r,a,i){var c=n&Ql,l=e.length,s=t.length;if(l!=s&&!(c&&s>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,v=n&Zl?new Kl:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var _=e[f],p=t[f];if(r)var h=c?r(p,_,f,t,e,i):r(_,p,f,e,t,i);if(h!==void 0){if(h)continue;m=!1;break}if(v){if(!Jl(t,function(b,y){if(!Yl(v,y)&&(_===b||a(_,b,n,r,i)))return v.push(y)})){m=!1;break}}else if(_!==p&&!a(_,p,n,r,i)){m=!1;break}}return i.delete(e),i.delete(t),m}var Tn=es;function ts(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var ns=ts;function rs(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var os=rs,as=1,is=2,cs="[object Boolean]",ls="[object Date]",ss="[object Error]",us="[object Map]",ds="[object Number]",fs="[object RegExp]",ps="[object Set]",vs="[object String]",ms="[object Symbol]",hs="[object ArrayBuffer]",bs="[object DataView]",Pn=K?K.prototype:void 0,yt=Pn?Pn.valueOf:void 0;function gs(e,t,n,r,a,i,c){switch(n){case bs:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hs:return!(e.byteLength!=t.byteLength||!i(new qe(e),new qe(t)));case cs:case ls:case ds:return Se(+e,+t);case ss:return e.name==t.name&&e.message==t.message;case fs:case vs:return e==t+"";case us:var l=ns;case ps:var s=r&as;if(l||(l=os),e.size!=t.size&&!s)return!1;var u=c.get(e);if(u)return u==t;r|=is,c.set(e,t);var d=Tn(l(e),l(t),r,a,i,c);return c.delete(e),d;case ms:if(yt)return yt.call(e)==yt.call(t)}return!1}var ys=gs,ws=1,_s=Object.prototype,js=_s.hasOwnProperty;function Cs(e,t,n,r,a,i){var c=n&ws,l=pt(e),s=l.length,u=pt(t),d=u.length;if(s!=d&&!c)return!1;for(var f=s;f--;){var m=l[f];if(!(c?m in t:js.call(t,m)))return!1}var v=i.get(e),_=i.get(t);if(v&&_)return v==t&&_==e;var p=!0;i.set(e,t),i.set(t,e);for(var h=c;++f<s;){m=l[f];var b=e[m],y=t[m];if(r)var j=c?r(y,b,m,t,e,i):r(b,y,m,e,t,i);if(!(j===void 0?b===y||a(b,y,n,r,i):j)){p=!1;break}h||(h=m=="constructor")}if(p&&!h){var w=e.constructor,C=t.constructor;w==C||!("constructor"in e)||!("constructor"in t)||typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C||(p=!1)}return i.delete(e),i.delete(t),p}var xs=Cs,Ss=1,Bn="[object Arguments]",Fn="[object Array]",Je="[object Object]",Vs=Object.prototype,Mn=Vs.hasOwnProperty;function Ns(e,t,n,r,a,i){var c=O(e),l=O(t),s=c?Fn:we(e),u=l?Fn:we(t);s=s==Bn?Je:s,u=u==Bn?Je:u;var d=s==Je,f=u==Je,m=s==u;if(m&&ge(e)){if(!ge(t))return!1;c=!0,d=!1}if(m&&!d)return i||(i=new he),c||He(e)?Tn(e,t,n,r,a,i):ys(e,t,s,n,r,a,i);if(!(n&Ss)){var v=d&&Mn.call(e,"__wrapped__"),_=f&&Mn.call(t,"__wrapped__");if(v||_){var p=v?e.value():e,h=_?t.value():t;return i||(i=new he),a(p,h,n,r,i)}}return!!m&&(i||(i=new he),xs(e,t,n,r,a,i))}var Os=Ns;function Dn(e,t,n,r,a){return e===t||(e==null||t==null||!H(e)&&!H(t)?e!==e&&t!==t:Os(e,t,n,r,Dn,a))}var $n=Dn,ks=1,zs=2;function Es(e,t,n,r){var a=n.length,i=a,c=!r;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var s=l[0],u=e[s],d=l[1];if(c&&l[2]){if(u===void 0&&!(s in e))return!1}else{var f=new he;if(r)var m=r(u,d,s,e,t,f);if(!(m===void 0?$n(d,u,ks|zs,r,f):m))return!1}}return!0}var As=Es;function Ts(e){return e===e&&!R(e)}var In=Ts;function Ps(e){for(var t=Ee(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,In(a)]}return t}var Bs=Ps;function Fs(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}}var Ln=Fs;function Ms(e){var t=Bs(e);return t.length==1&&t[0][2]?Ln(t[0][0],t[0][1]):function(n){return n===e||As(n,e,t)}}var Ds=Ms,$s="[object Symbol]";function Is(e){return typeof e=="symbol"||H(e)&&Z(e)==$s}var _e=Is,Ls=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rs=/^\w*$/;function Us(e,t){if(O(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!_e(e))||Rs.test(e)||!Ls.test(e)||t!=null&&e in Object(t)}var wt=Us,Hs="Expected a function";function _t(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Hs);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var c=e.apply(this,r);return n.cache=i.set(a,c)||i,c};return n.cache=new(_t.Cache||Le),n}_t.Cache=Le;var Ws=_t,qs=500;function Ks(e){var t=Ws(e,function(r){return n.size===qs&&n.clear(),r}),n=t.cache;return t}var Gs=Ks,Js=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xs=/\\(\\)?/g,Ys=Gs(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Js,function(n,r,a,i){t.push(a?i.replace(Xs,"$1"):r||n)}),t}),Qs=Ys,Zs=1/0,Rn=K?K.prototype:void 0,Un=Rn?Rn.toString:void 0;function Hn(e){if(typeof e=="string")return e;if(O(e))return Te(e,Hn)+"";if(_e(e))return Un?Un.call(e):"";var t=e+"";return t=="0"&&1/e==-Zs?"-0":t}var eu=Hn;function tu(e){return e==null?"":eu(e)}var nu=tu;function ru(e,t){return O(e)?e:wt(e,t)?[e]:Qs(nu(e))}var Wn=ru,ou=1/0;function au(e){if(typeof e=="string"||_e(e))return e;var t=e+"";return t=="0"&&1/e==-ou?"-0":t}var Xe=au;function iu(e,t){t=Wn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Xe(t[n++])];return n&&n==r?e:void 0}var jt=iu;function cu(e,t,n){var r=e==null?void 0:jt(e,t);return r===void 0?n:r}var lu=cu;function su(e,t){return e!=null&&t in Object(e)}var uu=su;function du(e,t,n){t=Wn(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var c=Xe(t[r]);if(!(i=e!=null&&n(e,c)))break;e=e[c]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&lt(a)&&ct(c,a)&&(O(e)||be(e)))}var fu=du;function pu(e,t){return e!=null&&fu(e,t,uu)}var vu=pu,mu=1,hu=2;function bu(e,t){return wt(e)&&In(t)?Ln(Xe(e),t):function(n){var r=lu(n,e);return r===void 0&&r===t?vu(n,e):$n(t,r,mu|hu)}}var gu=bu;function yu(e){return e}var Ye=yu;function wu(e){return function(t){return t==null?void 0:t[e]}}var _u=wu;function ju(e){return function(t){return jt(t,e)}}var Cu=ju;function xu(e){return wt(e)?_u(Xe(e)):Cu(e)}var Su=xu;function Vu(e){return typeof e=="function"?e:e==null?Ye:typeof e=="object"?O(e)?gu(e[0],e[1]):Ds(e):Su(e)}var qn=Vu;function Nu(e){return function(t,n,r){for(var a=-1,i=Object(t),c=r(t),l=c.length;l--;){var s=c[e?l:++a];if(n(i[s],s,i)===!1)break}return t}}var Ou=Nu,ku=Ou(),Kn=ku;function zu(e,t){return e&&Kn(e,t,Ee)}var Eu=zu;function Au(e,t){return function(n,r){if(n==null)return n;if(!ce(n))return e(n,r);for(var a=n.length,i=t?a:-1,c=Object(n);(t?i--:++i<a)&&r(c[i],i,c)!==!1;);return n}}var Tu=Au,Pu=Tu(Eu),Bu=Pu;function Fu(e,t){var n=-1,r=ce(e)?Array(e.length):[];return Bu(e,function(a,i,c){r[++n]=t(a,i,c)}),r}var Gn=Fu;function Mu(e,t){var n=O(e)?Te:Gn;return n(e,qn(t))}var Du=Mu;function $u(e,t){return Il(Du(e,t),1)}var Iu=$u;function Lu(e,t,n){(n!==void 0&&!Se(e[t],n)||n===void 0&&!(t in e))&&it(e,t,n)}var Ct=Lu;function Ru(e){return H(e)&&ce(e)}var Uu=Ru,Hu="[object Object]",Wu=Function.prototype,qu=Object.prototype,Jn=Wu.toString,Ku=qu.hasOwnProperty,Gu=Jn.call(Object);function Ju(e){if(!H(e)||Z(e)!=Hu)return!1;var t=ft(e);if(t===null)return!0;var n=Ku.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Jn.call(n)==Gu}var Xu=Ju;function Yu(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]}var xt=Yu;function Qu(e){return ke(e,Ae(e))}var Zu=Qu;function ed(e,t,n,r,a,i,c){var l=xt(e,n),s=xt(t,n),u=c.get(s);if(u)Ct(e,n,u);else{var d=i?i(l,s,n+"",e,t,c):void 0,f=d===void 0;if(f){var m=O(s),v=!m&&ge(s),_=!m&&!v&&He(s);d=s,m||v||_?O(l)?d=l:Uu(l)?d=dn(l):v?(f=!1,d=un(s,!0)):_?(f=!1,d=Cn(s,!0)):d=[]:Xu(s)||be(s)?(d=l,be(l)?d=Zu(l):R(l)&&!U(l)||(d=Sn(s))):f=!1}f&&(c.set(s,d),a(d,s,r,i,c),c.delete(s)),Ct(e,n,d)}}var td=ed;function Xn(e,t,n,r,a){e!==t&&Kn(t,function(i,c){if(a||(a=new he),R(i))td(e,t,c,n,Xn,r,a);else{var l=r?r(xt(e,c),i,c+"",e,t,a):void 0;l===void 0&&(l=i),Ct(e,c,l)}},Ae)}var nd=Xn;function rd(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var od=rd,Yn=Math.max;function ad(e,t,n){return t=Yn(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=Yn(r.length-t,0),c=Array(i);++a<i;)c[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(c),od(e,this,l)}}var id=ad;function cd(e){return function(){return e}}var ld=cd,sd=Re?function(e,t){return Re(e,"toString",{configurable:!0,enumerable:!1,value:ld(t),writable:!0})}:Ye,ud=sd,dd=800,fd=16,pd=Date.now;function vd(e){var t=0,n=0;return function(){var r=pd(),a=fd-(r-n);if(n=r,a>0){if(++t>=dd)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var md=vd,hd=md(ud),bd=hd;function gd(e,t){return bd(id(e,t,Ye),e+"")}var yd=gd;function wd(e,t,n){if(!R(n))return!1;var r=typeof t;return!!(r=="number"?ce(n)&&ct(t,n.length):r=="string"&&t in n)&&Se(n[t],e)}var _d=wd;function jd(e){return yd(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,c&&_d(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var l=n[r];l&&e(t,l,r,i)}return t})}var Cd=jd,xd=Cd(function(e,t,n,r){nd(e,t,n,r)}),Sd=xd,Vd="[object String]";function Nd(e){return typeof e=="string"||!O(e)&&H(e)&&Z(e)==Vd}var X=Nd;function St(e){return e!==null&&typeof e=="object"}function Od(e){return Ml(e)?`${e}px`:e}function kd(e,t,n){const r=n===void 0;let a=e;const i=Iu(t.split(".").map(c=>c.includes("[")?c.split("[").map(l=>l.replace(/"/g,"")):c));try{for(let c=0;c<i.length;c++){const l=i[c];let s=null;if(l.includes("]")){const[u,d]=l.replace("]","").split(":");s=d?a.findIndex(f=>f[u]==d):Number(u)}else s=l;if(c!=i.length-1)a=a[s];else{if(r)return a[s];St(n)?Object.assign(a[s],n):a[s]=n}}return e}catch{return console.error("[dataset] format error",`${t}`),{}}}function zd(e,t){return e!==t&&e&&e.contains(t)}function Vt(e,t){return t?(0,o.mergeProps)(e,t):e}function se(e,t){return Sd(e,t,(n,r)=>{if(O(r))return r})}function Nt(e,t){X(e==null?void 0:e.className)&&(e.className.includes(t)||(e.className+=" "+t))}function Ed(e,t){X(e==null?void 0:e.className)&&(e.className=e.className.replace(t,""))}function je(e,t){return(0,o.isRef)(e)?e.value:U(e)?e(t):e}function Ad(e,t,n){const{allLevels:r=!0}=n||{};function a(i,c){for(const l of i){if(l.value===e)return r?{...l,label:[...c,l.label].join(" / ")}:l;if(l.children){const s=a(l.children,[...c,l.label]);if(s!==void 0)return s}}}return a(t,[])}function Td(e="-"){const t=[],n="0123456789abcdef";for(let r=0;r<36;r++)t[r]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]=e,t.join("")}function Pd({config:e,crud:t,mitt:n}){const r=(0,o.ref)(0);function a(b){return!!t.permission[b]}function i(b){const{pagination:y,search:j,sort:w}=t.dict,C={...b},x={...y,...j,...w};for(const S in x)C[S]&&S!=x[S]&&(C[`_${x[S]}`]=C[S],delete C[S]);for(const S in C)S[0]==="_"&&(C[S.substr(1)]=C[S],delete C[S]);return C}function c(b){const{service:y,dict:j}=t;return new Promise((w,C)=>{const x=i(Object.assign(t.params,b));t.loading=!0;const S=r.value=Math.random();function k(){t.loading=!1}function A(G,D){const Y={list:G,pagination:D};k(),w(Y),n.emit("crud.refresh",Y)}function $(G){return new Promise(async(D,Y)=>{await y[j.api.page](G).then(W=>{if(S!=r.value)return!1;O(W)?A(W):A(W.list,W.pagination),w(W),D(W)}).catch(W=>{ne.ElMessage.error(W.message),C(W),Y(W)}),k()})}e.onRefresh?e.onRefresh(x,{next:$,done:k,render:A}):$(x)})}function l(b){n.emit("crud.proxy",{name:"info",data:[b]})}function s(){n.emit("crud.proxy",{name:"add"})}function u(b){n.emit("crud.proxy",{name:"edit",data:[b]})}function d(b){n.emit("crud.proxy",{name:"append",data:[b]})}function f(){n.emit("crud.proxy",{name:"close"})}function m(...b){const{service:y,dict:j}=t,w={ids:b.map(x=>x[j.primaryId])};async function C(x){return new Promise((S,k)=>{(0,ne.ElMessageBox)({type:"warning",title:j.label.tips,message:j.label.deleteConfirm,confirmButtonText:j.label.confirm,cancelButtonText:j.label.close,showCancelButton:!0,async beforeClose(A,$,G){A==="confirm"&&($.confirmButtonLoading=!0,await y[j.api.delete]({...w,...x}).then(D=>{ne.ElMessage.success(j.label.deleteSuccess),c(),S(D)}).catch(D=>{ne.ElMessage.error(D.message),k(D)}),$.confirmButtonLoading=!1),G()}}).catch(()=>null)})}e.onDelete?e.onDelete(b,{next:C}):C(w)}function v(b,y){n.emit("crud.proxy",{name:b,data:y})}function _(){return t.params}function p(b,y){if(!y)return!1;switch(b){case"service":if(Object.assign(t.service,y),t.service.__proto__=y.__proto__,y._permission)for(const j in y._permission)t.permission[j]=y._permission[j];break;case"permission":U(y)?se(t.permission,y(t)):se(t.permission,y);break;default:se(t[b],y);break}}function h(b,y){n.on(`${b}-${t.id}`,y)}return p("dict",e.dict),p("service",e.service),p("permission",e.permission),{proxy:v,set:p,on:h,rowInfo:l,rowAdd:s,rowEdit:u,rowAppend:d,rowDelete:m,rowClose:f,refresh:c,getPermission:a,paramsReplace:i,getParams:_}}function Pe(e){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(e)}function Bd(e,t){if(Pe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fd(e){var t=Bd(e,"string");return Pe(t)=="symbol"?t:t+""}function Md(e,t,n){return(t=Fd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dd(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ot=Dd();class $d{constructor(t){Md(this,"id",void 0),this.id=t||0}send(t,n,...r){Ot[t](`${this.id}__${n}`,...r)}emit(t,...n){this.send("emit",t,...n)}off(t,n){this.send("off",t,n)}on(t,n){this.send("on",t,n)}}const Qe=[],Qn={list:[],init(e){for(const t in e)this.on(t,e[t])},emit(e,t){this.list.forEach(n=>{const[r]=n.name.split("-");e==r&&n.callback(t,{crudList:Qe,refresh(a){Qe.forEach(i=>i.refresh(a))}})})},on(e,t){this.list.push({name:e,callback:t})}};function Id(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Ld=Id;function Rd(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=_e(e),c=t!==void 0,l=t===null,s=t===t,u=_e(t);if(!l&&!u&&!i&&e>t||i&&c&&s&&!l&&!u||r&&c&&s||!n&&s||!a)return 1;if(!r&&!i&&!u&&e<t||u&&n&&a&&!r&&!i||l&&n&&a||!c&&a||!s)return-1}return 0}var Ud=Rd;function Hd(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,c=a.length,l=n.length;++r<c;){var s=Ud(a[r],i[r]);if(s){if(r>=l)return s;var u=n[r];return s*(u=="desc"?-1:1)}}return e.index-t.index}var Wd=Hd;function qd(e,t,n){t=t.length?Te(t,function(i){return O(i)?function(c){return jt(c,i.length===1?i[0]:i)}:i}):[Ye];var r=-1;t=Te(t,Ue(qn));var a=Gn(e,function(i,c,l){var s=Te(t,function(u){return u(i)});return{criteria:s,index:++r,value:i}});return Ld(a,function(i,c){return Wd(i,c,n)})}var Kd=qd;function Gd(e,t,n,r){return e==null?[]:(O(t)||(t=t==null?[]:[t]),n=r?void 0:n,O(n)||(n=n==null?[]:[n]),Kd(e,t,n))}var Zn=Gd;const ue=[{id:1,name:"楚行云",createTime:"1996-09-14",wages:73026,status:1,account:"chuxingyun",occupation:4,phone:13797353874},{id:2,name:"秦尘",createTime:"1977-11-09",wages:74520,status:0,account:"qincheng",occupation:3,phone:18593911044},{id:3,name:"叶凡",createTime:"1982-11-28",wages:81420,status:0,account:"yefan",occupation:1,phone:16234136338},{id:4,name:"白小纯",createTime:"2012-12-17",wages:65197,status:1,account:"baixiaochun",occupation:2,phone:16325661110},{id:5,name:"韩立",createTime:"1982-07-10",wages:99107,status:1,account:"hanli",occupation:2,phone:18486594866},{id:6,name:"唐三",createTime:"2019-07-31",wages:80658,status:1,account:"tangsan",occupation:5,phone:15565014642},{id:7,name:"王林",createTime:"2009-07-26",wages:57408,status:1,account:"wanglin",occupation:1,phone:13852767084},{id:8,name:"李强",createTime:"2016-04-26",wages:71782,status:1,account:"liqiang",occupation:3,phone:18365332834},{id:9,name:"秦羽",createTime:"1984-01-18",wages:87860,status:1,account:"qinyu",occupation:0,phone:18149247129}];class Jd{async page(t){const{keyWord:n,page:r,size:a,sort:i,order:c}=t||{},l=["phone","name"],s=["createTime","occupation","status"],u=["phone","name"],d=Zn(ue,c,i).filter(f=>{let m=!0;return n!==void 0&&(m=!!l.find(v=>String(f[v]).includes(String(t.keyWord)))),s.forEach(v=>{m&&t[v]!==void 0&&(m=f[v]==t[v])}),u.forEach(v=>{m&&t[v]!==void 0&&(m=String(f[v]).includes(String(t[v])))}),m});return new Promise(f=>{setTimeout(()=>{f({list:d.slice((r-1)*a,r*a),pagination:{total:d.length,page:r,size:a},subData:{wages:d.reduce((m,v)=>m+v.wages,0)}})},500)})}async update(t){const n=ue.find(r=>r.id==t.id);n&&Object.assign(n,t)}async add(t){const n=Td();return ue.push({id:n,...t}),n}async info(t){const{id:n}=t||{};return ue.find(r=>r.id==n)}async delete(t){const{ids:n=[]}=t||{};n.forEach(r=>{const a=ue.findIndex(i=>i.id==r);ue.splice(a,1)})}async list(){return ue}}function Ce(e,t){var r,a,i;const n=(0,o.getCurrentInstance)();if(n){let c=(r=n.proxy)==null?void 0:r.$.parent;if(c){for(;c&&((a=c.type)==null?void 0:a.name)!=e&&((i=c.type)==null?void 0:i.name)!="cl-crud";)c=c==null?void 0:c.parent;c&&c.type.name==e&&(t.value=c.exposed)}}}function Xd(e,{r:t,options:n,clear:r,isChild:a}){t.__ev||(t.__ev={});const i={},c=t.__ev;return e.forEach(l=>{c[l]||(c[l]=[]),n[l]&&c[l].push({fn:n[l],isChild:a}),i[l]=(...s)=>{if(c[l].forEach(u=>{u.fn&&u.fn(...s)}),r==l)for(const u in c)c[u]=c[u].filter(d=>!d.isChild)}}),i}function er(e,t){const n=(0,o.ref)();return Ce("cl-crud",n),e&&(e.service=="test"&&(e.service=new Jd),(0,o.provide)("useCrud__options",e)),(0,o.watch)(n,r=>{r&&t&&t(r)}),n}function Yd(e){const t=(0,o.ref)();Ce("cl-upsert",t);const n=!!t.value;return e&&(0,o.provide)("useUpsert__options",e),(0,o.watch)(t,r=>{if(r&&e){const a=Xd(["onOpen","onOpened","onClosed"],{r,options:e,clear:"onClosed",isChild:n});Object.assign(r.config,a)}},{immediate:!0}),t}function Qd(e){const t=(0,o.ref)();return Ce("cl-table",t),e&&(0,o.provide)("useTable__options",e),t}function tr(e){const t=(0,o.ref)();return Ce("cl-form",t),(0,o.nextTick)(()=>{e&&t.value&&e(t.value)}),t}function Zd(e){const t=(0,o.ref)();return Ce("cl-adv-search",t),e&&(0,o.provide)("useAdvSearch__options",e),t}function ef(e){const t=(0,o.ref)();return Ce("cl-search",t),e&&(0,o.provide)("useSearch__options",e),t}function nr(e){const t=(0,o.inject)("dialog");return(0,o.watch)(()=>t==null?void 0:t.fullscreen.value,n=>{e==null||e.onFullscreen(n)}),t}function M(){const e=(0,o.inject)("crud"),t=(0,o.inject)("mitt");return{crud:e,mitt:t}}function B(){return(0,o.inject)("__config__")}function xe(){return(0,o.inject)("__browser__")}function Be(){const e=(0,o.reactive)({});function t(n){return r=>{e[n]=r}}return{refs:e,setRefs:t}}function kt(e){const{type:t}=(0,o.getCurrentInstance)(),{mitt:n,crud:r}=M();return r[t.name]=e,n.on("crud.proxy",({name:a,data:i=[],callback:c})=>{if(e[a]){let l=null;l=U(e[a])?e[a](...i):e[a],c&&c(l)}}),e}function Ze(e,t){const n={};return e.forEach(r=>{n[r]=(...a)=>t.value[r](...a)}),n}function tf(e,t){window.removeEventListener(e,t),window.addEventListener(e,t),t()}var nf=(0,o.defineComponent)({name:"cl-crud",props:{name:String,border:Boolean,padding:{type:String,default:"10px"}},setup(e,{slots:t,expose:n}){const r=(0,o.getCurrentInstance)(),a=(0,o.reactive)(Vt((0,o.inject)("useCrud__options")||{})),i=new $d(r==null?void 0:r.uid),{dict:c,permission:l}=B(),s=(0,o.reactive)(se({id:e.name||(r==null?void 0:r.uid),routePath:location.pathname||"/",loading:!1,selection:[],params:{page:1,size:20},service:{},dict:{},permission:{}},re({dict:c,permission:l})));return se(s,Pd({config:a,crud:s,mitt:i})),Qe.push(s),(0,o.provide)("crud",s),(0,o.provide)("mitt",i),n(s),()=>{var u;return(0,o.createVNode)("div",{class:["cl-crud",{"is-border":e.border}],style:{padding:e.padding}},[(u=t.default)==null?void 0:u.call(t)])}}}),rf=(0,o.defineComponent)({name:"cl-add-btn",setup(e,{slots:t}){const{crud:n}=M(),{style:r}=B();return()=>n.getPermission("add")&&(0,o.createVNode)((0,o.resolveComponent)("el-button"),{type:"primary",size:r.size,onClick:n.rowAdd},{default:()=>{var a;return[((a=t.default)==null?void 0:a.call(t))||n.dict.label.add]}})}}),of=(0,o.defineComponent)({name:"ArrowDown",__name:"arrow-down",setup(e){return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[(0,o.createElementVNode)("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),af=of,cf=(0,o.defineComponent)({name:"ArrowRight",__name:"arrow-right",setup(e){return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[(0,o.createElementVNode)("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),lf=cf,sf=(0,o.defineComponent)({name:"ArrowUp",__name:"arrow-up",setup(e){return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[(0,o.createElementVNode)("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),uf=sf,df=(0,o.defineComponent)({name:"Close",__name:"close",setup(e){return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[(0,o.createElementVNode)("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),et=df,ff=(0,o.defineComponent)({name:"FullScreen",__name:"full-screen",setup(e){return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[(0,o.createElementVNode)("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),rr=ff,pf=(0,o.defineComponent)({name:"Minus",__name:"minus",setup(e){return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[(0,o.createElementVNode)("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),or=pf,vf=(0,o.defineComponent)({name:"Search",__name:"search",setup(e){return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[(0,o.createElementVNode)("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),zt=vf,mf=(0,o.defineComponent)({name:"cl-adv-btn",components:{Search:zt},setup(e,{slots:t}){const{crud:n,mitt:r}=M(),{style:a}=B();function i(){r.emit("crud.openAdvSearch")}return()=>(0,o.createVNode)((0,o.resolveComponent)("el-button"),{size:a.size,onClick:i,class:"cl-adv-btn"},{default:()=>{var c;return[(0,o.createVNode)((0,o.resolveComponent)("el-icon"),null,{default:()=>[(0,o.createVNode)(zt,null,null)]}),((c=t.default)==null?void 0:c.call(t))||n.dict.label.advSearch]}})}}),hf="[object Boolean]";function bf(e){return e===!0||e===!1||H(e)&&Z(e)==hf}var tt=bf;function ar(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,o.isVNode)(e)}function gf(e,{scope:t}){return tt(e)?e:!!U(e)&&e({scope:t})}function yf(e,t){const{style:n}=B(),r=re(je(t.dict||[])),a=t.dictSeparator===void 0?",":t.dictSeparator;t.dictColor&&r.forEach((l,s)=>{l.color||(l.color=n.colors[s])});let i=[];i=O(e)?e:X(e)&&a?e.split(a):[e];const c=i.filter(l=>l!=null&&l!=="").map(l=>({...Ad(l,r,{allLevels:t.dictAllLevels})||{label:l,value:l},children:[]}));return t.dictFormatter?t.dictFormatter(c):c.map(l=>(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("el-tag"),{"disable-transitions":!0,style:"margin: 2px; border: 0"},null),{type:l.type,closable:l.closable,hit:l.hit,color:l.color,size:l.size,effect:l.effect||"dark",round:l.round},{default:()=>(0,o.createVNode)("span",null,[l.label])}))}function wf(e,{scope:t}){const{crud:n}=M(),{style:r}=B(),a=(0,o.useSlots)();return(je(e,{scope:t})||["edit","delete"]).map(c=>c==="info"?(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-button"),{text:!0,bg:!0,size:r.size,onClick:()=>{n.rowInfo(t.row)}},{default:()=>{var l;return[(l=n.dict.label)==null?void 0:l.info]}}),[[o.vShow,n.getPermission("info")]]):c==="edit"?(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-button"),{text:!0,bg:!0,type:"primary",size:r.size,onClick:()=>{n.rowEdit(t.row)}},{default:()=>{var l;return[(l=n.dict.label)==null?void 0:l.update]}}),[[o.vShow,n.getPermission("update")]]):c==="delete"?(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-button"),{text:!0,bg:!0,type:"danger",size:r.size,onClick:()=>{n.rowDelete(t.row)}},{default:()=>{var l;return[(l=n.dict.label)==null?void 0:l.delete]}}),[[o.vShow,n.getPermission("delete")]]):!c.hidden&&oe(c,{scope:t,slots:a,custom(l){return(0,o.createVNode)((0,o.resolveComponent)("el-button"),(0,o.mergeProps)({text:!0,type:l.type,bg:!0},l==null?void 0:l.props,{onClick:()=>{l.onClick({scope:t})}}),{default:()=>[l.label]})}}))}function _f(e){if(["el-select","el-radio-group","el-checkbox-group"].includes(e.name)){const t=je(e.options)||[];return{children:(0,o.createVNode)("div",null,[t.map((r,a)=>{let i,c;if(X(r))i=c=r;else{if(!St(r))return(0,o.createVNode)((0,o.resolveComponent)("cl-error-message"),{title:"Component options error"},null);i=r.label,c=r.value}switch(e.name){case"el-select":return(0,o.createVNode)((0,o.resolveComponent)("el-option"),(0,o.mergeProps)({key:a,label:i,value:c},r.props),null);case"el-radio-group":return(0,o.createVNode)((0,o.resolveComponent)("el-radio"),(0,o.mergeProps)({key:a,value:c},r.props),ar(i)?i:{default:()=>[i]});case"el-checkbox-group":return(0,o.createVNode)((0,o.resolveComponent)("el-checkbox"),(0,o.mergeProps)({key:a,label:c},r.props),ar(i)?i:{default:()=>[i]});default:return null}})])}}return{}}var ir={get vue(){return window.__CrudApp__},get(e){return window[e]},set(e,t){window[e]=t}};const Et=new Map;function At(e,t){var u;const{scope:n,prop:r,slots:a,children:i,_data:c}=t||[];let l=null;if((u=e.name)!=null&&u.includes("slot-")){const d=a[e.name];return d?d({scope:n,prop:r,...c}):(0,o.createVNode)((0,o.resolveComponent)("cl-error-message"),{title:`${e.name} is not found`},null)}e.vm&&!Et.get(e.name)&&(ir.vue.component(e.name,{...e.vm}),Et.set(e.name,{...e.vm})),U(e.props)&&(e.props=e.props({scope:n,prop:r,...c}));const s={...e.props,...c,prop:r,scope:n};if(s.disabled=(c==null?void 0:c.isDisabled)||s.disabled,s&&n&&r&&(s.modelValue=n[r],s["onUpdate:modelValue"]=function(d){n[r]=d}),e.vm)l=(0,o.h)(Et.get(e.name),s);else{const d={...e.slots};i&&(d.default=()=>i),l=(0,o.h)((0,o.toRaw)((0,o.resolveComponent)(e.name)),s,d)}return U(e.ref)&&setTimeout(()=>{var d;e.ref((d=l==null?void 0:l.component)==null?void 0:d.exposed)},0),l}function oe(e,t){var s,u,d;const n=B(),{item:r,scope:a,children:i,_data:c,render:l}=t||{};if(!e)return null;if(e.__v_isVNode)return e;if(r&&r.component){r.component.props||(r.component.props={});let f="";switch((s=r.component)==null?void 0:s.name){case"el-input":f=n.dict.label.placeholder;break;case"el-select":f=n.dict.label.placeholderSelect;break}f&&(r.component.props.placeholder||(r.component.props.placeholder=f+r.label))}return e.vm?(e.name||(e.name=((u=e.vm)==null?void 0:u.name)||((d=e.vm)==null?void 0:d.__hmrId)),At(e,t)):X(e)?l!="slot"||e.includes("slot-")?At({name:e},t):e:U(e)?e({scope:a,h:o.h,...c}):St(e)?e.name?At(e,{...t,children:i,..._f(e)}):t.custom?t.custom(e):(0,o.createVNode)((0,o.resolveComponent)("cl-error-message"),{title:"Error，name is required"},null):void 0}function jf({config:e,form:t,Form:n}){function r({prop:p,key:h,path:b},y){const j=b||"";if(b)kd(e,j,y);else{let w;if(p){let C=function(x){x.forEach(S=>{S.prop==p?w=S:S.children&&C(S.children)})};C(e.items)}if(w)switch(h){case"options":w.component.options=y;break;case"props":Object.assign(w.component.props,y);break;case"hidden":w.hidden=y;break;case"hidden-toggle":w.hidden=y===void 0?!w.hidden:!y;break;default:Object.assign(w,y);break}else console.error(`[set] ${p} is not found`)}}function a(p){return p?t[p]:t}function i(p,h){t[p]=h}function c(p,h){r({path:p},h)}function l(p,h){r({prop:p},h)}function s(p,h){r({prop:p,key:"options"},h)}function u(p,h){r({prop:p,key:"props"},h)}function d(p,h){r({prop:p,key:"hidden-toggle"},h)}function f(...p){p.forEach(h=>{r({prop:h,key:"hidden"},!0)})}function m(...p){p.forEach(h=>{r({prop:h,key:"hidden"},!1)})}function v(p){e.title=p}function _(p){var h;(h=n.value)==null||h.clearValidate(p.prop),p.collapse=!p.collapse}return{getForm:a,setForm:i,setData:l,setConfig:c,setOptions:s,setProps:u,toggleItem:d,hideItem:f,showItem:m,setTitle:v,collapseItem:_}}function Tt({Form:e}){return Ze(["open","close","clear","reset","submit","bindForm","changeTab","setTitle","showLoading","hideLoading","collapseItem","getForm","setForm","invokeData","setData","setConfig","setOptions","setProps","toggleItem","hideItem","showItem","validate","validateField","resetFields","scrollToField","clearValidate"],e)}function Cf(e,{visible:t}){const n=(0,o.getCurrentInstance)(),{style:r}=B(),a={onOpen:[],onClose:[],onSubmit:[]};let i=null;function c(s=[]){if(!e)return!1;for(const u in a)a[u]=[];i&&i(),[...r.form.plugins||[],...s].forEach(u=>{const d={exposed:n.exposed};for(const f in a)d[f]=m=>{a[f].push(m)};u(d)}),i=(0,o.watch)(t,u=>{u?setTimeout(()=>{a.onOpen.forEach(d=>d())},10):a.onClose.forEach(d=>d())},{immediate:!0})}async function l(s){let u=s;for(let d=0;d<a.onSubmit.length;d++){const f=await a.onSubmit[d](u);f&&(u=f)}return u}return{create:c,submit:l}}function xf({config:e,Form:t}){const n=(0,o.ref)(),r=(0,o.computed)(()=>{var v,_;return((_=(v=s())==null?void 0:v.props)==null?void 0:_.labels)||[]});function a(v){return r.value.find(_=>_.value==v)}function i(v){const _=a(v);return!(_!=null&&_.lazy)||_.loaded}function c(v){const _=a(v);_.loaded=!0}function l(v){if(n.value){let _;const p=v.refs.form.querySelector(`[data-prop="${v.prop}"]`);if(p)_=p==null?void 0:p.getAttribute("data-group");else{let h=function(b){b.prop==v.prop?_=b.group:b.children&&b.children.forEach(h)};e.items.forEach(h)}_&&u(_)}}function s(){return e.items.find(v=>v.type==="tabs")}function u(v){n.value=v}function d(){n.value=void 0,r.value.forEach(v=>{v.lazy&&v.loaded&&(v.loaded=void 0)})}function f(v,_=!0){return new Promise((p,h)=>{function b(){n.value=v,p()}if(_){let y=!1;const j=e.items.filter(w=>w.group==n.value&&!w._hidden&&w.prop).map(w=>new Promise(C=>{t.value.validateField(w.prop,x=>{x&&(y=!0),C(x)})}));Promise.all(j).then(w=>{y?h(w.filter(Boolean)):b()})}else b()})}function m(v){const _=s();if(_&&_.props){const{mergeProp:p,labels:h=[]}=_.props;if(p){const b=h.find(y=>y.value==v.group);b&&b.name&&(v.prop=`${b.name}-${v.prop}`)}}}return{active:n,list:r,isLoaded:i,onLoad:c,get:s,set:u,change:f,clear:d,mergeProp:m,toGroup:l}}function Sf(){const{dict:e}=B(),t=(0,o.reactive)({title:"-",height:void 0,width:"50%",props:{labelWidth:100},on:{},op:{hidden:!1,saveButtonText:e.label.save,closeButtonText:e.label.close,buttons:["close","save"]},dialog:{closeOnClickModal:!1,appendToBody:!0},items:[],form:{},_data:{}}),n=(0,o.ref)(),r=(0,o.reactive)({}),a=(0,o.ref)({}),i=(0,o.ref)(!1),c=(0,o.ref)(!1),l=(0,o.ref)(!1),s=(0,o.ref)(!1);return(0,o.watch)(()=>r,u=>{var d,f;if((d=t.on)!=null&&d.change)for(const m in u)r[m]!==a.value[m]&&((f=t.on)==null||f.change(u,m));a.value=re(u)},{deep:!0}),{Form:n,config:t,form:r,visible:i,saving:c,loading:l,disabled:s}}var Vf=(0,o.defineComponent)({name:"cl-adv-search",components:{Close:et},props:{items:{type:Array,default:()=>[]},title:String,size:{type:[Number,String],default:"30%"},op:{type:Array,default:()=>["clear","reset","close","search"]},onSearch:Function},emits:["reset","clear"],setup(e,{emit:t,slots:n,expose:r}){const{crud:a,mitt:i}=M(),{style:c}=B(),l=xe(),s=(0,o.reactive)((0,o.mergeProps)(e,(0,o.inject)("useAdvSearch__options")||{})),u=(0,o.ref)(),d=(0,o.ref)(),f=(0,o.ref)(!1);function m(){f.value=!0,(0,o.nextTick)(function(){var j;(j=u.value)==null||j.open({items:s.items||[],op:{hidden:!0},isReset:!1})})}function v(){d.value.handleClose()}function _(){var j;(j=u.value)==null||j.reset(),t("reset"),h()}function p(){var j;(j=u.value)==null||j.clear(),t("clear")}function h(){var j;(j=u.value)==null||j.submit(w=>{function C(x){var S;return(S=u.value)==null||S.done(),v(),a.refresh({...x,page:1})}s.onSearch?s.onSearch(w,{next:C,close:v}):C(w)})}function b(){return(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("cl-form"),{ref:u,inner:!0,"enable-plugin":!1},null),{},n)}function y(){var w;const j={search:h,reset:_,clear:p,close:v};return(w=s.op)==null?void 0:w.map(C=>{var x;switch(C){case"search":case"reset":case"clear":case"close":return(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("el-button"),null,null),{type:C=="search"?"primary":null,size:c.size,onClick:j[C]},{default:()=>a.dict.label[C]});default:return oe(C,{scope:(x=u.value)==null?void 0:x.getForm(),slots:n})}})}return i.on("crud.openAdvSearch",m),r({open:m,close:v,clear:p,...Tt({Form:u}),reset:_,Form:u}),()=>(0,o.createVNode)((0,o.resolveComponent)("el-drawer"),{ref:d,"modal-class":"cl-adv-search",modelValue:f.value,"onUpdate:modelValue":j=>f.value=j,direction:"rtl","with-header":!1,size:l.isMini?"100%":s.size},{default:()=>[(0,o.createVNode)("div",{class:"cl-adv-search__header"},[(0,o.createVNode)("span",{class:"text"},[s.title||a.dict.label.advSearch]),(0,o.createVNode)((0,o.resolveComponent)("el-icon"),{size:20,onClick:v},{default:()=>[(0,o.createVNode)(et,null,null)]})]),(0,o.createVNode)("div",{class:"cl-adv-search__container"},[b()]),(0,o.createVNode)("div",{class:"cl-adv-search__footer"},[y()])]})}}),Nf=(0,o.defineComponent)({name:"cl-flex1",setup(){return()=>(0,o.createVNode)("div",{class:"cl-flex1"},null)}}),Of="[object Map]",kf="[object Set]",zf=Object.prototype,Ef=zf.hasOwnProperty;function Af(e){if(e==null)return!0;if(ce(e)&&(O(e)||typeof e=="string"||typeof e.splice=="function"||ge(e)||He(e)||be(e)))return!e.length;var t=we(e);if(t==Of||t==kf)return!e.size;if(We(e))return!on(e).length;for(var n in e)if(Ef.call(e,n))return!1;return!0}var de=Af;const Pt={number(e){return e&&(O(e)?e.map(Number):Number(e))},string(e){return e&&(O(e)?e.map(String):String(e))},split(e){return X(e)?e.split(",").filter(Boolean):O(e)?e:[]},join(e){return O(e)?e.join(","):e},boolean(e){return!!e},booleanNumber(e){return e?1:0},datetimeRange(e,{form:t,method:n,prop:r}){const a=r.charAt(0).toUpperCase()+r.slice(1),i=`start${a}`,c=`end${a}`;if(n=="bind")return[t[i],t[c]];{const[l,s]=e||[];return t[i]=l,void(t[c]=s)}},splitJoin(e,{method:t}){return t=="bind"?X(e)?e.split(",").filter(Boolean):e:O(e)?e.join(","):e},json(e,{method:t}){if(t!="bind")return JSON.stringify(e);try{return JSON.parse(e)}catch{return{}}},empty(e){return X(e)?e===""?void 0:e:O(e)&&de(e)?void 0:e}};function Tf({value:e,form:t,prop:n}){if(n){const[r,a]=n.split("-");t[n]=a?t[r]?t[r][a]:t[r]:e}}function cr(e,{value:t,hook:n,form:r,prop:a}){if(Tf({value:t,method:e,form:r,prop:a}),!n)return!1;let i=[];X(n)?Pt[n]?i=[n]:console.error(`[hook] ${n} is not found`):O(n)?i=n:R(n)?i=O(n[e])?n[e]:[n[e]]:U(n)?i=[n]:console.error(`[hook] ${n} format error`);let c=t;i.forEach(l=>{let s=null;X(l)?s=Pt[l]:U(l)&&(s=l),s&&(c=s(c,{method:e,form:r,prop:a}))}),a&&(r[a]=c)}const Pf={bind(e){cr("bind",e)},submit(e){cr("submit",e)}};function Bf(e,t){Pt[e]=t}var Bt=Pf;function Fe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,o.isVNode)(e)}var Ff=(0,o.defineComponent)({name:"cl-form",props:{inner:Boolean,inline:Boolean,enablePlugin:{type:Boolean,default:!0}},setup(e,{expose:t,slots:n}){const{refs:r,setRefs:a}=Be(),{style:i,dict:c}=B(),l=xe(),{Form:s,config:u,form:d,visible:f,saving:m,loading:v,disabled:_}=Sf();let p,h="close";const b=xf({config:u,Form:s}),y=jf({config:u,form:d,Form:s}),j=Ze(["validate","validateField","resetFields","scrollToField","clearValidate"],s),w=Cf(e.enablePlugin,{visible:f});function C(){v.value=!0}function x(){v.value=!1}function S(g=!0){_.value=g}function k(){m.value=!1}function A(g){g&&(h=g),$(()=>{f.value=!1,k()})}function $(g){var P;(P=u.on)!=null&&P.close?u.on.close(h,g):g()}function G(){var g;b.clear(),(g=s.value)==null||g.clearValidate()}function D(){for(const g in d)delete d[g];setTimeout(()=>{var g;(g=s.value)==null||g.clearValidate()},0)}function Y(){if(p)for(const g in p)d[g]=re(p[g])}function W(g){for(const P in g)if(P.includes("-")){const[V,...T]=P.split("-"),N=T.pop()||"";g[V]||(g[V]={});let I=g[V];T.forEach(F=>{I[F]||(I[F]={}),I=I[F]}),I[N]=g[P],delete g[P]}}function Dt(g){s.value.validate(async(P,V)=>{var T;if(P){m.value=!0;const N=re(d);u.items.forEach(F=>{function ee(L){L.prop&&(L._hidden&&L.prop&&delete N[L.prop],L.hook&&Bt.submit({...L,value:L.prop?N[L.prop]:void 0,form:N})),L.children&&L.children.forEach(ee)}ee(F)}),W(N);const I=g||((T=u.on)==null?void 0:T.submit);I?I(await w.submit(N),{close(){A("save")},done:k}):k()}else b.toGroup({refs:r,config:u,prop:Object.keys(V)[0]})})}function $p(g,P){if(!g)return console.error("Options is not null");g.isReset!==!1&&D(),f.value=!0,h="close";for(const V in u)switch(V){case"items":let T=function(N){return N.map(I=>{const F=je(I);return{...F,children:F!=null&&F.children?T(F.children):void 0}})};u.items=T(g.items||[]);break;case"on":case"op":case"props":case"dialog":case"_data":se(u[V],g[V]||{});break;default:u[V]=g[V];break}if(g!=null&&g.form)for(const V in g.form)d[V]=g.form[V];u.items.forEach(V=>{function T(N){N.prop&&(N.prop.includes(".")&&(N.prop=N.prop.replace(/\./g,"-")),b.mergeProp(N),Bt.bind({...N,value:d[N.prop]!==void 0?d[N.prop]:re(N.value),form:d}),N.required&&(N.rules={required:!0,message:`${N.label}${c.label.nonEmpty}`})),N.type=="tabs"&&b.set(N.value),N.children&&N.children.forEach(T)}T(V)}),p||(p=re(d)),w.create(P),(0,o.nextTick)(()=>{setTimeout(()=>{var V;(V=u.on)!=null&&V.open&&u.on.open(d)},10)})}function Ip(g){u.items.forEach(P=>{function V(T){Bt.bind({...T,value:T.prop?g[T.prop]:void 0,form:g}),T.children&&T.children.forEach(V)}V(P)}),Object.assign(d,g)}function mr(g){const{isDisabled:P}=u._data;if(g.type=="tabs")return(0,o.createVNode)((0,o.resolveComponent)("cl-form-tabs"),(0,o.mergeProps)({modelValue:b.active.value,"onUpdate:modelValue":ee=>b.active.value=ee},g.props,{onChange:b.onLoad}),null);g._hidden=gf(g.hidden,{scope:d});const V=!g.group||g.group===b.active.value,T=g.component&&b.isLoaded(g.group),N=(0,o.h)((0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-form-item"),{class:{"no-label":!(g.renderLabel||g.label),"has-children":!!g.children},key:g.prop,"data-group":g.group||"-","data-prop":g.prop||"-","label-width":e.inline?"auto":"",label:g.label,prop:g.prop,rules:P?null:g.rules,required:!g._hidden&&g.required},null),[[o.vShow,V&&!g._hidden]]),g.props,{label(){return g.renderLabel?oe(g.renderLabel,{scope:d,render:"slot",slots:n}):g.label},default(){return(0,o.createVNode)("div",null,[(0,o.createVNode)("div",{class:"cl-form-item"},[["prepend","component","append"].filter(ee=>g[ee]).map(ee=>{let L;const Lp=g.children&&(0,o.createVNode)("div",{class:"cl-form-item__children"},[(0,o.createVNode)((0,o.resolveComponent)("el-row"),{gutter:10},Fe(L=g.children.map(mr))?L:{default:()=>[L]})]),Rp=oe(g[ee],{item:g,prop:g.prop,scope:d,slots:n,children:Lp,_data:{isDisabled:P}});return(0,o.withDirectives)((0,o.createVNode)("div",{class:[`cl-form-item__${ee}`,{flex1:g.flex!==!1}],style:g[ee].style},[Rp]),[[o.vShow,!g.collapse]])})]),tt(g.collapse)&&(0,o.createVNode)("div",{class:"cl-form-item__collapse",onClick:()=>{y.collapseItem(g)}},[(0,o.createVNode)((0,o.resolveComponent)("el-divider"),{"content-position":"center"},{default:()=>[g.collapse?c.label.seeMore:c.label.hideContent]})])])}});let I=g.span||i.form.span;l.isMini&&(I=24);const F=e.inline?N:(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-col"),(0,o.mergeProps)({span:I},g.col),Fe(N)?N:{default:()=>[N]}),[[o.vShow,V&&!g._hidden]]);return T?F:null}function hr(){const g=u.items.map(mr),P=l.isMini&&!e.inline?"top":u.props.labelPosition||i.form.labelPosition;return(0,o.createVNode)("div",{class:"cl-form__container",ref:a("form")},[(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("el-form"),{ref:s,size:i.size,"label-width":i.form.labelWidth,inline:e.inline,disabled:m.value,"scroll-to-error":!0,model:d,onSubmit:V=>{Dt(),V.preventDefault()}},null),{...u.props,labelPosition:P},{default:()=>{const V=[n.prepend&&n.prepend({scope:d}),g,n.append&&n.append({scope:d})];return(0,o.withDirectives)((0,o.createVNode)("div",{class:"cl-form__items"},[e.inline?V:(0,o.createVNode)((0,o.resolveComponent)("el-row"),{gutter:10},Fe(V)?V:{default:()=>[V]})]),[[(0,o.resolveDirective)("loading"),v.value]])}})])}function br(){const{hidden:g,buttons:P,saveButtonText:V,closeButtonText:T,justify:N}=u.op;if(g)return null;const I=P==null?void 0:P.map(F=>{switch(F){case"save":return(0,o.createVNode)((0,o.resolveComponent)("el-button"),{type:"success",size:i.size,disabled:v.value,loading:m.value,onClick:()=>{Dt()}},Fe(V)?V:{default:()=>[V]});case"close":return(0,o.createVNode)((0,o.resolveComponent)("el-button"),{size:i.size,onClick:()=>{A("close")}},Fe(T)?T:{default:()=>[T]});default:return oe(F,{scope:d,slots:n,custom(){return(0,o.createVNode)((0,o.resolveComponent)("el-button"),(0,o.mergeProps)({text:!0,type:F.type,bg:!0},F.props,{onClick:()=>{F.onClick({scope:d})}}),{default:()=>[F.label]})}})}});return(0,o.createVNode)("div",{class:"cl-form__footer",style:{justifyContent:N||"flex-end"}},[I])}return t({refs:r,Form:s,visible:f,saving:m,form:d,config:u,loading:v,disabled:_,open:$p,close:A,done:k,clear:D,reset:Y,submit:Dt,invokeData:W,bindForm:Ip,showLoading:C,hideLoading:x,setDisabled:S,Tabs:b,...y,...j}),()=>e.inner?f.value&&(0,o.createVNode)("div",{class:"cl-form"},[hr(),br()]):(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("cl-dialog"),{modelValue:f.value,"onUpdate:modelValue":g=>f.value=g,class:"cl-form"},null),{title:u.title,height:u.height,width:u.width,...u.dialog,beforeClose:$,onClosed:G,keepAlive:!1},{default(){return hr()},footer(){return br()}})}});function Mf(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,o.isVNode)(e)}var Df=(0,o.defineComponent)({name:"cl-form-tabs",props:{modelValue:[String,Number],labels:{type:Array,default:()=>[]},justify:{type:String,default:"center"},type:{type:String,default:"default"}},emits:["update:modelValue","change"],setup(e,{emit:t,expose:n}){const{refs:r,setRefs:a}=Be(),i=(0,o.ref)(""),c=(0,o.ref)([]),l=(0,o.reactive)({width:"",offsetLeft:"",transform:"",backgroundColor:""});function s(u){if(!u)return!1;(0,o.nextTick)(()=>{const d=c.value.findIndex(m=>m.value===u),f=r[`tab-${d}`];if(f){l.width=f.offsetWidth+"px",l.transform=`translateX(${f.offsetLeft}px)`;let m=f.offsetLeft+f.clientWidth/2-207+15;m<0&&(m=0),r.tabs.scrollLeft=m}}),i.value=u,t("update:modelValue",u)}return(0,o.watch)(()=>e.modelValue,s),(0,o.watch)(()=>i.value,u=>{t("change",u)}),nr({onFullscreen(){s(i.value)}}),(0,o.onMounted)(function(){de(e.labels)||(c.value=e.labels,s(de(e.modelValue)?c.value[0].value:e.modelValue))}),n({active:i,list:c,line:l,update:s}),()=>(0,o.createVNode)("div",{class:["cl-form-tabs",`cl-form-tabs--${e.type}`]},[(0,o.createVNode)("div",{class:"cl-form-tabs__wrap",style:{textAlign:e.justify},ref:a("tabs")},[(0,o.createVNode)("ul",null,[c.value.map((u,d)=>{let f;return(0,o.createVNode)("li",{ref:a(`tab-${d}`),class:{"is-active":u.value===i.value},onClick:()=>{s(u.value)}},[u.icon&&(0,o.createVNode)((0,o.resolveComponent)("el-icon"),null,Mf(f=(0,o.h)((0,o.toRaw)(u.icon)))?f:{default:()=>[f]}),(0,o.createVNode)("span",null,[u.label])])}),l.width&&(0,o.createVNode)("div",{class:"cl-form-tabs__line",style:l},null)])])])}}),$f=(0,o.defineComponent)({name:"cl-form-card",components:{ArrowDown:af,ArrowUp:uf},props:{label:String,expand:{type:Boolean,default:!0},isExpand:{type:Boolean,default:!0}},setup(e,{slots:t}){const n=(0,o.ref)(e.expand);function r(){e.isExpand&&(n.value=!n.value)}return()=>{var a;return(0,o.createVNode)("div",{class:["cl-form-card",{"is-expand":n.value}]},[(0,o.withDirectives)((0,o.createVNode)("div",{class:"cl-form-card__header",onClick:r},[(0,o.createVNode)("span",null,[e.label]),(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-icon"),null,{default:()=>[(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("arrow-down"),null,null),[[o.vShow,!n.value]]),(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("arrow-up"),null,null),[[o.vShow,n.value]])]}),[[o.vShow,e.isExpand]])]),[[o.vShow,e.label]]),(0,o.createVNode)("div",{class:"cl-form-card__container"},[(a=t.default)==null?void 0:a.call(t)])])}}}),If=(0,o.defineComponent)({name:"cl-multi-delete-btn",setup(e,{slots:t}){const{crud:n}=M(),{style:r}=B();return()=>n.getPermission("delete")&&(0,o.createVNode)((0,o.resolveComponent)("el-button"),{type:"danger",size:r.size,disabled:n.selection.length===0,onClick:()=>{n.rowDelete(...n.selection)}},{default:()=>{var a;return[((a=t.default)==null?void 0:a.call(t))||n.dict.label.multiDelete]}})}}),Lf=(0,o.defineComponent)({name:"cl-pagination",setup(e,{expose:t}){const{crud:n,mitt:r}=M(),{style:a}=B(),i=xe(),c=(0,o.ref)(0),l=(0,o.ref)(1),s=(0,o.ref)(20);function u(v){n.refresh({page:v})}function d(v){n.refresh({page:1,size:v})}function f(v){v&&(l.value=v.currentPage||v.page||1,s.value=v.pageSize||v.size||20,c.value=v.total||0,n.params.size=s.value)}function m(v){f(v.pagination)}return(0,o.onMounted)(()=>{r.on("crud.refresh",m)}),(0,o.onUnmounted)(()=>{r.off("crud.refresh",m)}),t({total:c,currentPage:l,pageSize:s,setPagination:f}),()=>(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("el-pagination"),{size:i.isMini?"small":a.size,background:!0,"page-sizes":[10,20,30,40,50,100],"pager-count":i.isMini?5:7,layout:i.isMini?"total, pager":"total, sizes, prev, pager, next, jumper"},null),{onSizeChange:d,onCurrentChange:u,total:c.value,currentPage:l.value,pageSize:s.value})}}),Rf=(0,o.defineComponent)({name:"cl-refresh-btn",setup(e,{slots:t}){const{crud:n}=M(),{style:r}=B();return()=>(0,o.createVNode)((0,o.resolveComponent)("el-button"),{size:r.size,onClick:()=>{n.refresh()}},{default:()=>{var a;return[((a=t.default)==null?void 0:a.call(t))||n.dict.label.refresh]}})}}),Uf=function(){return J.Date.now()},Ft=Uf,Hf=/\s/;function Wf(e){for(var t=e.length;t--&&Hf.test(e.charAt(t)););return t}var qf=Wf,Kf=/^\s+/;function Gf(e){return e&&e.slice(0,qf(e)+1).replace(Kf,"")}var Jf=Gf,lr=NaN,Xf=/^[-+]0x[0-9a-f]+$/i,Yf=/^0b[01]+$/i,Qf=/^0o[0-7]+$/i,Zf=parseInt;function ep(e){if(typeof e=="number")return e;if(_e(e))return lr;if(R(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=R(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Jf(e);var n=Yf.test(e);return n||Qf.test(e)?Zf(e.slice(2),n?2:8):Xf.test(e)?lr:+e}var sr=ep,tp="Expected a function",np=Math.max,rp=Math.min;function op(e,t,n){var r,a,i,c,l,s,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(tp);function v(x){var S=r,k=a;return r=a=void 0,u=x,c=e.apply(k,S),c}function _(x){return u=x,l=setTimeout(b,t),d?v(x):c}function p(x){var S=x-s,k=x-u,A=t-S;return f?rp(A,i-k):A}function h(x){var S=x-s,k=x-u;return s===void 0||S>=t||S<0||f&&k>=i}function b(){var x=Ft();if(h(x))return y(x);l=setTimeout(b,p(x))}function y(x){return l=void 0,m&&r?v(x):(r=a=void 0,c)}function j(){l!==void 0&&clearTimeout(l),u=0,r=s=a=l=void 0}function w(){return l===void 0?c:y(Ft())}function C(){var x=Ft(),S=h(x);if(r=arguments,a=this,s=x,S){if(l===void 0)return _(s);if(f)return clearTimeout(l),l=setTimeout(b,t),v(s)}return l===void 0&&(l=setTimeout(b,t)),c}return t=sr(t)||0,R(n)&&(d=!!n.leading,f="maxWait"in n,i=f?np(sr(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m),C.cancel=j,C.flush=w,C}var ur=op;function ap(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,o.isVNode)(e)}var ip=(0,o.defineComponent)({name:"cl-search-key",props:{modelValue:String,field:{type:String,default:"keyWord"},fieldList:{type:Array,default:()=>[]},onSearch:Function,placeholder:String,width:{type:[String,Number],default:260},refreshOnInput:Boolean},emits:["update:modelValue","change","field-change"],setup(e,{emit:t,expose:n}){const{crud:r}=M(),{style:a}=B(),i=(0,o.ref)(e.field),c=(0,o.ref)(!1),l=(0,o.computed)(()=>{if(e.placeholder)return e.placeholder;{const p=e.fieldList.find(h=>h.value==i.value);return p?r.dict.label.placeholder+p.label:r.dict.label.searchKey}}),s=(0,o.useModel)(e,"modelValue");let u=!1;function d(){if(!u){const p={};async function h(b){c.value=!0,await r.refresh({page:1,...p,[i.value]:s.value||void 0,...b}),c.value=!1}e.fieldList.forEach(b=>{p[b.value]=void 0}),e.onSearch?e.onSearch(p,{next:h}):h()}}function f({key:p}){p==="Enter"&&d()}function m(p){e.refreshOnInput||(d(),u=!0,setTimeout(()=>{u=!1},300),t("change",p))}const v=ur(p=>{t("change",p),e.refreshOnInput&&d()},300);function _(){t("field-change",i.value),s.value=void 0}return n({search:d}),()=>{let p;return(0,o.createVNode)("div",{class:"cl-search-key"},[(0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-select"),{class:"cl-search-key__select",size:a.size,modelValue:i.value,"onUpdate:modelValue":h=>i.value=h,onChange:_},ap(p=e.fieldList.map((h,b)=>(0,o.createVNode)((0,o.resolveComponent)("el-option"),{key:b,label:h.label,value:h.value},null)))?p:{default:()=>[p]}),[[o.vShow,e.fieldList.length>0]]),(0,o.createVNode)("div",{class:"cl-search-key__wrap",style:{width:Od(e.width)}},[(0,o.createVNode)((0,o.resolveComponent)("el-input"),{modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,size:a.size,placeholder:l.value,onKeydown:f,onChange:m,onInput:v,clearable:!0},null),(0,o.createVNode)((0,o.resolveComponent)("el-button"),{size:a.size,type:"primary",loading:c.value,onClick:d},{default:()=>[r.dict.label.search]})])])}}});function cp({config:e,Table:t}){const{mitt:n,crud:r}=M(),a=(0,o.ref)([]);function i(c){a.value=c}return n.on("crud.refresh",({list:c})=>{a.value=c,(0,o.nextTick)(()=>{r.selection.forEach(l=>{const s=c.find(u=>u[e.rowKey]==l[e.rowKey]);s&&t.value.toggleRowSelection(s,!0)})})}),{data:a,setData:i}}function lp(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var sp=lp;function up({config:e,Table:t}){const n=(0,o.ref)(0),r=ur(async()=>{var i,c;await(0,o.nextTick)();let a=t.value;if(a){for(;!((c=(i=a.$parent)==null?void 0:i.$el.className)!=null&&c.includes("cl-crud"));)a=a.$parent;if(a){const l=a.$parent.$el;await(0,o.nextTick)();let s=0;a.$el.className.includes("cl-row")&&(s+=10),s+=a.$el.offsetTop;let u=a.$el.nextSibling;const d=[a.$el];for(;u;)u.offsetHeight>0&&(s+=u.offsetHeight||0,d.push(u),u.className.includes("cl-row--last")&&(s+=10)),u=u.nextSibling;const f=sp(d);f!=null&&f.className.includes("cl-row")&&(Nt(f,"cl-row--last"),s-=10),s+=parseInt(window.getComputedStyle(l).paddingTop,10),e.autoHeight&&(n.value=l.clientHeight-s)}}},100);return Ot.on("resize",()=>{r()}),(0,o.onMounted)(function(){r()}),(0,o.onActivated)(function(){r()}),{maxHeight:n,calcMaxHeight:r}}function dp({config:e}){const{mitt:t}=M(),n=(0,o.ref)(!0);async function r(l){n.value=!1,await(0,o.nextTick)(),l&&l(),n.value=!0,await(0,o.nextTick)(),t.emit("resize")}function a(l,s){const u=O(l)?l:[l];function d(f){f.forEach(m=>{m.prop&&u.includes(m.prop)&&(m.hidden=!!tt(s)&&!s),m.children&&d(m.children)})}d(e.columns)}function i(l){a(l,!1)}function c(l){l&&r(()=>{e.columns.splice(0,e.columns.length,...l)})}return{visible:n,reBuild:r,showColumn:a,hideColumn:i,setColumns:c}}function fp(e,{scope:t,slots:n}){const r=er(),a=n[`header-${e.prop}`];if(a)return a({scope:t});if(!e.search||!e.search.component)return t.column.label;function i(s){e.search.isInput=!0,s.stopPropagation()}const c=(0,o.createVNode)("div",{onClick:i},[(0,o.createVNode)((0,o.resolveComponent)("el-icon"),{class:"icon"},{default:()=>[(0,o.createVNode)(zt,null,null)]}),(0,o.createVNode)("span",null,[t.column.label])]),l=(0,o.h)(oe(e.search.component,{prop:e.prop}),{clearable:!0,modelValue:e.search.value,onVnodeMounted(s){var u,d,f;(f=(d=(u=s.component)==null?void 0:u.exposed)==null?void 0:d.focus)==null||f.call(d)},onInput(s){e.search.value=s},onChange(s){var u;e.search.refreshOnChange&&((u=r.value)==null||u.refresh({page:1,[e.prop]:s===""?void 0:s}))}});return(0,o.createVNode)("div",{class:["cl-table-header__search",{"is-input":e.search.isInput}]},[e.search.isInput?l:c])}function pp(){const e=xe(),t=(0,o.useSlots)(),{crud:n}=M(),{style:r}=B();function a(l){const s=l.map(u=>{const d=je(u);return d.orderNum||(d.orderNum=0),d});return Zn(s,"orderNum","asc").map((u,d)=>{if(u.hidden)return null;const f=(0,o.createVNode)((0,o.resolveComponent)("el-table-column"),{key:`cl-table-column__${d}`,align:r.table.column.align,"header-align":r.table.column.headerAlign,minWidth:r.table.column.minWidth},null);if(u.type==="op")return(0,o.h)(f,{label:n.dict.label.op,width:r.table.column.opWidth,fixed:e.isMini?null:"right",...u},{default:m=>(0,o.createVNode)("div",{class:"cl-table__op"},[wf(u.buttons,{scope:m})])});if(["selection","index"].includes(u.type))return(0,o.h)(f,u);{let m=function(v){if(v.hidden)return null;const _=re(v);return delete _.children,(0,o.h)(f,_,{header(p){return fp(v,{scope:p,slots:t})},default(p){if(v.children)return v.children.map(m);const h=t[`column-${v.prop}`];if(h)return h({scope:p,item:v});{let b=p.row[v.prop];return v.formatter&&(b=v.formatter(p.row,p.column,b,p.$index)),v.component?oe(v.component,{prop:v.prop,scope:p.row,_data:{column:p.column,index:p.$index,row:p.row}}):v.dict?yf(b,v):de(b)?p.emptyText:b}}})};return m(u)}}).filter(Boolean)}function i(l){return(0,o.createVNode)("div",{class:"cl-table__empty"},[t.empty?t.empty():(0,o.createVNode)((0,o.resolveComponent)("el-empty"),{"image-size":100,description:l},null)])}function c(){return(0,o.createVNode)("div",{class:"cl-table__append"},[t.append&&t.append()])}return{renderColumn:a,renderEmpty:i,renderAppend:c}}function dr(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,o.isVNode)(e)}const fr=(0,o.defineComponent)({name:"cl-context-menu",props:{show:Boolean,options:{type:Object,default:()=>({})},event:{type:Object,default:()=>({})}},setup(e,{expose:t,slots:n}){const{refs:r,setRefs:a}=Be(),i=(0,o.ref)(e.show||!1),c=(0,o.ref)([]),l=(0,o.reactive)({left:"0px",top:"0px"}),s=(0,o.ref)("");function u(p){p.preventDefault&&p.preventDefault(),p.stopPropagation&&p.stopPropagation()}function d(p){function h(b){b.forEach(y=>{y.showChildren=!1,y.children&&h(y.children)})}return h(p),p}let f;function m(){i.value=!1,s.value="",f&&Ed(f,"cl-context-menu__target")}function v(p,h={}){return u(p),i.value=!0,(0,o.nextTick)(()=>{var k;const b=r["context-menu"].querySelector(".cl-context-menu__box");let y=p.pageX,j=p.pageY;e.show||(y=p.offsetX,j=p.offsetY);const{clientHeight:w,clientWidth:C}=(k=p.target)==null?void 0:k.ownerDocument.body,{clientHeight:x,clientWidth:S}=b;if(j+x>w&&(j=w-x-5),y+S>C&&(y=C-S-5),l.left=y+"px",l.top=j+"px",h==null?void 0:h.hover){const A=h.hover===!0?{}:h.hover;if(f=p.target,f&&X(f.className)){if(A.target)for(;!f.className.includes(A.target);)f=f.parentNode;Nt(f,A.className||"cl-context-menu__target")}}h!=null&&h.class&&Nt(b,h.class),h!=null&&h.list&&(c.value=d(h.list))}),{close:m}}function _(p,h){return s.value=h,!p.disabled&&(p.callback?p.callback(m):void(p.children?p.showChildren=!p.showChildren:m()))}return t({open:v,close:m}),(0,o.onMounted)(function(){if(i.value){const{body:p,documentElement:h}=e.event.target.ownerDocument;p.appendChild(r["context-menu"]),(h||p).addEventListener("mousedown",b=>{const y=r["context-menu"];zd(y,b.target)||y==b.target||m()}),v(e.event,e==null?void 0:e.options)}}),()=>{function p(h,b,y){return(0,o.createVNode)("div",{class:["cl-context-menu__box",y>1&&"is-append"]},[h.filter(j=>!j.hidden).map((j,w)=>{let C,x;const S=`${b}-${w}`;return j.suffixIcon||j.children&&(j.suffixIcon=lf),(0,o.createVNode)("div",{class:{"is-active":s.value.includes(S),"is-ellipsis":j.ellipsis??!0,"is-disabled":j.disabled}},[j.prefixIcon&&(0,o.createVNode)(ne.ElIcon,null,dr(C=(0,o.h)((0,o.toRaw)(j.prefixIcon)))?C:{default:()=>[C]}),(0,o.createVNode)("span",{onClick:()=>{_(j,S)}},[j.label]),j.suffixIcon&&(0,o.createVNode)(ne.ElIcon,null,dr(x=(0,o.h)((0,o.toRaw)(j.suffixIcon)))?x:{default:()=>[x]}),j.children&&j.showChildren&&p(j.children,S,y+1)])})])}return i.value&&(0,o.createVNode)("div",{class:"cl-context-menu",ref:a("context-menu"),style:l,onContextmenu:u},[n.default?n.default():p(c.value,"0",1)])}}}),pr={open(e,t){var r;const n=(0,o.h)(fr,{show:!0,event:e,options:t});return(0,o.render)(n,e.target.ownerDocument.createElement("div")),(r=n.component)==null?void 0:r.exposed}};var vp=fr;function mp({Table:e,config:t,Sort:n}){const{crud:r}=M();function a(i,c,l){const s=t.contextMenu;if(!de(s)){e.value.setCurrentRow(i);const d=s.map(f=>{switch(f){case"refresh":return{label:r.dict.label.refresh,callback(m){r.refresh(),m()}};case"edit":case"update":return{label:r.dict.label.update,hidden:!r.getPermission("update"),callback(m){r.rowEdit(i),m()}};case"delete":return{label:r.dict.label.delete,hidden:!r.getPermission("delete"),callback(m){r.rowDelete(i),m()}};case"info":return{label:r.dict.label.info,hidden:!r.getPermission("info"),callback(m){r.rowInfo(i),m()}};case"check":return{label:r.selection.find(m=>m.id==i.id)?r.dict.label.deselect:r.dict.label.select,hidden:!t.columns.find(m=>m.type==="selection"),callback(m){e.value.toggleRowSelection(i),m()}};case"order-desc":return{label:`${c.label} - ${r.dict.label.desc}`,hidden:!c.sortable,callback(m){n.changeSort(c.property,"desc"),m()}};case"order-asc":return{label:`${c.label} - ${r.dict.label.asc}`,hidden:!c.sortable,callback(m){n.changeSort(c.property,"asc"),m()}};default:return U(f)?f(i,c,l):f}}).filter(f=>!!f&&!f.hidden);de(d)||pr.open(l,{list:d})}t.onRowContextmenu&&t.onRowContextmenu(i,c,l)}return{onRowContextMenu:a}}function hp({emit:e}){const{crud:t}=M();function n(r){t.selection.splice(0,t.selection.length,...r),e("selection-change",t.selection)}return{selection:t.selection,onSelectionChange:n}}function bp({config:e,Table:t,emit:n}){const{crud:r}=M(),a=function(){let{prop:l,order:s}=e.defaultSort||{};const u=e.columns.find(d=>["desc","asc","descending","ascending"].find(f=>f==d.sortable));return u&&(l=u.prop,s=["descending","desc"].find(d=>d==u.sortable)?"descending":"ascending"),s&&l?(r.params.order=["descending","desc"].includes(s)?"desc":"asc",r.params.prop=l,{prop:l,order:s}):{}}();function i({prop:l,order:s}){e.sortRefresh&&(s==="descending"&&(s="desc"),s==="ascending"&&(s="asc"),s||(l=void 0),r.refresh({prop:l,order:s,page:1})),n("sort-change",{prop:l,order:s})}function c(l,s){var u;s==="desc"&&(s="descending"),s==="asc"&&(s="ascending"),(u=t.value)==null||u.sort(l,s)}return{defaultSort:a,onSortChange:i,changeSort:c}}function gp(e){const{style:t}=B(),n=(0,o.ref)(),r=(0,o.reactive)(Vt(e,(0,o.inject)("useTable__options")||{}));return r.columns=(r.columns||[]).map(a=>je(a)),r.autoHeight=r.autoHeight??t.table.autoHeight,r.contextMenu=r.contextMenu??t.table.contextMenu,{Table:n,config:r}}function yp(){const e=(0,o.getCurrentInstance)(),{style:t}=B();function n(r=[]){[...t.table.plugins||[],...r].forEach(a=>{a({exposed:e.exposed})})}return{create:n}}var wp=(0,o.defineComponent)({name:"cl-table",props:{columns:{type:Array,default:()=>[]},autoHeight:{type:Boolean,default:null},height:null,contextMenu:{type:[Array,Boolean],default:null},defaultSort:Object,sortRefresh:{type:Boolean,default:!0},emptyText:String,rowKey:{type:String,default:"id"}},emits:["selection-change","sort-change"],setup(e,{emit:t,expose:n}){const{crud:r}=M(),{style:a}=B(),{Table:i,config:c}=gp(e),l=yp(),s=bp({config:c,emit:t,Table:i}),u=mp({config:c,Table:i,Sort:s}),d=up({config:c,Table:i}),f=cp({config:c,Table:i}),m=hp({emit:t}),v=dp({config:c}),_=Ze(["clearSelection","getSelectionRows","toggleRowSelection","toggleAllSelection","toggleRowExpansion","setCurrentRow","clearSort","clearFilter","doLayout","sort","scrollTo","setScrollTop","setScrollLeft"],i),p={Table:i,columns:c.columns,...m,...f,...s,...u,...d,...v,..._};return kt(p),n(p),l.create(c.plugins),()=>{const{renderColumn:h,renderAppend:b,renderEmpty:y}=pp();return p.visible.value&&(0,o.h)((0,o.withDirectives)((0,o.createVNode)((0,o.resolveComponent)("el-table"),{class:"cl-table",ref:i},null),[[(0,o.resolveDirective)("loading"),r.loading]]),{maxHeight:c.autoHeight?p.maxHeight.value:null,height:c.autoHeight?c.height:null,rowKey:c.rowKey,defaultSort:p.defaultSort,data:p.data.value,onRowContextmenu:p.onRowContextMenu,onSelectionChange:p.onSelectionChange,onSortChange:p.onSortChange,size:a.size,border:a.table.border,highlightCurrentRow:a.table.highlightCurrentRow,resizable:a.table.resizable,stripe:a.table.stripe},{default(){return h(p.columns)},empty(){return y(c.emptyText||r.dict.label.empty)},append(){return b()}})}}}),_p=(0,o.defineComponent)({name:"cl-upsert",props:{items:{type:Array,default:()=>[]},props:Object,sync:Boolean,op:Object,dialog:Object,onOpen:Function,onOpened:Function,onClose:Function,onClosed:Function,onInfo:Function,onSubmit:Function},emits:["opened","closed"],setup(e,{slots:t,expose:n}){const{crud:r}=M(),a=(0,o.reactive)(Vt(e,(0,o.inject)("useUpsert__options")||{})),i=(0,o.ref)(),c=(0,o.ref)("info");function l(w){var C;(C=i.value)==null||C.close(w)}function s(){var w;(w=i.value)==null||w.hideLoading(),a.onClosed&&a.onClosed()}function u(w,C){function x(){C(),s()}a.onClose?a.onClose(w,x):x()}function d(w){const{service:C,dict:x,refresh:S}=r;function k(){var $;($=i.value)==null||$.done()}function A($){return new Promise((G,D)=>{C[x.api[c.value]]($).then(Y=>{ne.ElMessage.success(x.label.saveSuccess),k(),l("save"),S(),G(Y)}).catch(Y=>{ne.ElMessage.error(Y.message),k(),D(Y)})})}a.onSubmit?a.onSubmit(w,{done:k,next:A,close(){l("save")}}):A(w)}function f(){const w=c.value=="info";return new Promise(C=>{var x;if(!i.value)return console.error("<cl-upsert /> is not found");(x=i.value)==null||x.open({title:r.dict.label[c.value],props:{...a.props,disabled:w},op:{...a.op,hidden:w},dialog:a.dialog,items:a.items||[],on:{open(){a.onOpen&&a.onOpen(),C(!0)},submit:d,close:u},form:{},_data:{isDisabled:w}},a.plugins)})}function m(){var C;const w=(C=i.value)==null?void 0:C.getForm();a.onOpened&&a.onOpened(w)}async function v(){c.value="add",await f(),m()}async function _(w){var C;c.value="add",await f(),w&&((C=i.value)==null||C.bindForm(w)),m()}function p(w){c.value="update",b(w)}function h(w){c.value="info",b(w)}function b(w){var S;async function C(k){var A,$;(A=i.value)==null||A.hideLoading(),k&&(($=i.value)==null||$.bindForm(k)),a.sync&&await f(),m()}function x(k){return new Promise(async(A,$)=>{var G;await r.service[r.dict.api.info]({[r.dict.primaryId]:k[r.dict.primaryId]}).then(D=>{C(D),A(D)}).catch(D=>{ne.ElMessage.error(D.message),$(D)}),(G=i.value)==null||G.hideLoading()})}(S=i.value)==null||S.showLoading(),a.sync||f(),a.onInfo?a.onInfo(w,{close:l,next:x,done:C}):x(w)}function y(){var w;(w=i.value)==null||w.hideLoading()}const j={config:a,...(0,o.toRefs)(a),...Tt({Form:i}),Form:i,get form(){var w;return((w=i.value)==null?void 0:w.form)||{}},mode:c,add:v,append:_,edit:p,info:h,open:f,close:l,done:y,submit:d};return kt(j),n(j),()=>(0,o.createVNode)("div",{class:"cl-upsert"},[(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("cl-form"),{ref:i},null),{},t)])}});function jp(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,o.isVNode)(e)}var Cp=(0,o.defineComponent)({name:"cl-dialog",components:{Close:et,FullScreen:rr,Minus:or},props:{modelValue:{type:Boolean,default:!1},props:Object,title:{type:String,default:"-"},height:String,width:{type:String,default:"50%"},padding:{type:String,default:"20px"},keepAlive:Boolean,fullscreen:Boolean,controls:{type:Array,default:()=>["fullscreen","close"]},hideHeader:Boolean,beforeClose:Function,scrollbar:{type:Boolean,default:!0}},emits:["update:modelValue","fullscreen-change"],setup(e,{emit:t,expose:n,slots:r}){const a=xe(),i=(0,o.ref)(),c=(0,o.ref)(!1),l=(0,o.ref)(!1),s=(0,o.ref)(0),u=(0,o.computed)(()=>!(!a||!a.isMini)||c.value);function d(){c.value=!0}function f(){function h(){m()}e.beforeClose?e.beforeClose(h):h()}function m(){t("update:modelValue",!1)}function v(h){c.value=tt(h)?!!h:!c.value}function _(){O(e.controls)&&e.controls.includes("fullscreen")&&v()}function p(){return e.hideHeader||(0,o.createVNode)("div",{class:"cl-dialog__header",onDblclick:_},[(0,o.createVNode)("span",{class:"cl-dialog__title"},[e.title]),(0,o.createVNode)("div",{class:"cl-dialog__controls"},[e.controls.map(h=>{switch(h){case"fullscreen":return a.screen==="xs"?null:u.value?(0,o.createVNode)("button",{type:"button",class:"minimize",onClick:()=>{v(!1)}},[(0,o.createVNode)((0,o.resolveComponent)("el-icon"),null,{default:()=>[(0,o.createVNode)(or,null,null)]})]):(0,o.createVNode)("button",{type:"button",class:"maximize",onClick:()=>{v(!0)}},[(0,o.createVNode)((0,o.resolveComponent)("el-icon"),null,{default:()=>[(0,o.createVNode)(rr,null,null)]})]);case"close":return(0,o.createVNode)("button",{type:"button",class:"close",onClick:f},[(0,o.createVNode)((0,o.resolveComponent)("el-icon"),null,{default:()=>[(0,o.createVNode)(et,null,null)]})]);default:return oe(h,{slots:r})}})])])}return(0,o.watch)(()=>e.modelValue,h=>{l.value=h,h&&!e.keepAlive&&(s.value+=1)},{immediate:!0}),(0,o.watch)(()=>e.fullscreen,h=>{c.value=h},{immediate:!0}),(0,o.watch)(c,h=>{t("fullscreen-change",h)}),(0,o.provide)("dialog",{visible:l,fullscreen:u}),n({Dialog:i,visible:l,isFullscreen:u,open:d,close:f,changeFullscreen:v}),()=>(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("el-dialog"),{ref:i,class:"cl-dialog",width:e.width,beforeClose:e.beforeClose,"show-close":!1,"append-to-body":!0,fullscreen:u.value,modelValue:l.value,"onUpdate:modelValue":h=>l.value=h,onClose:m},null),{},{header(){return p()},default(){const h=u.value?"100%":e.height,b={padding:e.padding,height:h};function y(){var j;return(0,o.createVNode)("div",{class:"cl-dialog__default",style:b,key:s.value},[(j=r.default)==null?void 0:j.call(r)])}if(e.scrollbar){let j;return b.height="auto",(0,o.createVNode)((0,o.resolveComponent)("el-scrollbar"),{height:h},jp(j=y())?j:{default:()=>[j]})}return y()},footer(){var b,y;const h=(b=r.footer)==null?void 0:b.call(r);return h&&((y=h[0])!=null&&y.shapeFlag)?(0,o.createVNode)("div",{class:"cl-dialog__footer"},[h]):null}})}}),xp=(0,o.defineComponent)({name:"cl-filter",props:{label:String},setup(e,{slots:t}){return()=>{var n;return(0,o.createVNode)("div",{class:"cl-filter"},[(0,o.withDirectives)((0,o.createVNode)("span",{class:"cl-filter__label"},[e.label]),[[o.vShow,e.label]]),(n=t.default)==null?void 0:n.call(t)])}}}),Sp=(0,o.defineComponent)({name:"cl-search",props:{inline:{type:Boolean,default:!0},props:{type:Object,default:()=>{}},data:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},resetBtn:{type:Boolean,default:!1},onLoad:Function,onSearch:Function},emits:["reset"],setup(e,{slots:t,expose:n,emit:r}){const{crud:a}=M(),{style:i}=B(),c=(0,o.reactive)((0,o.mergeProps)(e,(0,o.inject)("useSearch__options")||{})),l=tr(),s=(0,o.ref)(!1);function u(f){var _;const m=(_=l.value)==null?void 0:_.getForm();async function v(p){s.value=!0;const h={page:1,...m,...p,...f};for(const y in h)h[y]===""&&(h[y]=void 0);const b=await a.refresh(h);return s.value=!1,b}c.onSearch?c.onSearch(m,{next:v}):v()}function d(){var m,v;const f={};(m=c.items)==null||m.map(_=>{f[_.prop]=void 0}),(v=l.value)==null||v.reset(),a.refresh(f),r("reset",f)}return n({search:u,reset:d,Form:l,...Tt({Form:l})}),(0,o.onMounted)(()=>{var f;(f=l.value)==null||f.open({op:{hidden:!0},props:c.props,items:c.items,form:c.data,on:{open(m){var v;(v=c.onLoad)==null||v.call(c,m)},change(m,v){var _;(_=c.onChange)==null||_.call(c,m,v)}}})}),()=>de(c.items)||(0,o.createVNode)("div",{class:"cl-search"},[(0,o.h)((0,o.createVNode)((0,o.resolveComponent)("cl-form"),{ref:l,inner:!0,inline:c.inline,"enable-plugin":!1},null),{},{append(){return(0,o.createVNode)((0,o.resolveComponent)("el-form-item"),{label:" ",class:"cl-search__btns"},{default:()=>{var f,m;return[(0,o.createVNode)((0,o.resolveComponent)("el-button"),{type:"primary",loading:s.value,size:i.size,onClick:()=>{u()}},{default:()=>[a.dict.label.search]}),c.resetBtn&&(0,o.createVNode)((0,o.resolveComponent)("el-button"),{size:i.size,onClick:d},{default:()=>[a.dict.label.reset]}),(m=t==null?void 0:t.buttons)==null?void 0:m.call(t,(f=l.value)==null?void 0:f.form)]}})},...t})])}}),Vp=(0,o.defineComponent)({name:"cl-error-message",props:{title:String},setup(e){return()=>(0,o.createVNode)((0,o.resolveComponent)("el-alert"),{title:e.title,type:"error"},null)}}),Np=(0,o.defineComponent)({name:"cl-row",setup(e,{slots:t}){return()=>(0,o.createVNode)((0,o.resolveComponent)("el-row"),{class:"cl-row"},{default:()=>[t.default&&t.default()]})}});const Mt={Crud:nf,AddBtn:rf,AdvBtn:mf,AdvSearch:Vf,Flex:Nf,Form:Ff,FormTabs:Df,FormCard:$f,MultiDeleteBtn:If,Pagination:Lf,RefreshBtn:Rf,SearchKey:ip,Table:wp,Upsert:_p,Dialog:Cp,Filter:xp,Search:Sp,ErrorMessage:Vp,Row:Np,ContextMenu:vp};function Op(e){for(const t in Mt)e.component(Mt[t].name,Mt[t])}var kp={op:"Operation",add:"Add",delete:"Delete",multiDelete:"Delete",update:"Edit",refresh:"Refresh",info:"Details",search:"Search",reset:"Reset",clear:"Clear",save:"Save",close:"Cancel",confirm:"Confirm",advSearch:"Advanced Search",searchKey:"Search Keyword",placeholder:"Please enter",placeholderSelect:"Please select",tips:"Tips",saveSuccess:"Save successful",deleteSuccess:"Delete successful",deleteConfirm:"This operation will permanently delete the selected data. Do you want to continue?",empty:"No data available",desc:"Descending",asc:"Ascending",select:"Select",deselect:"Deselect",seeMore:"See more",hideContent:"Hide content",nonEmpty:"Cannot be empty"},zp={op:"操作",add:"追加",delete:"削除",multiDelete:"削除",update:"編集",refresh:"リフレッシュ",info:"詳細",search:"検索",reset:"リセット",clear:"クリア",save:"保存",close:"キャンセル",confirm:"確認",advSearch:"高度な検索",searchKey:"検索キーワード",placeholder:"入力してください",placeholderSelect:"選択してください",tips:"ヒント",saveSuccess:"保存が成功しました",deleteSuccess:"削除が成功しました",deleteConfirm:"この操作は選択したデータを永久に削除します。続行しますか？",empty:"データがありません",desc:"降順",asc:"昇順",select:"選択",deselect:"選択解除",seeMore:"詳細を表示",hideContent:"コンテンツを非表示",nonEmpty:"空にできません"},Ep={op:"操作",add:"新增",delete:"删除",multiDelete:"删除",update:"编辑",refresh:"刷新",info:"详情",search:"搜索",reset:"重置",clear:"清空",save:"保存",close:"取消",confirm:"确定",advSearch:"高级搜索",searchKey:"搜索关键字",placeholder:"请输入",placeholderSelect:"请选择",tips:"提示",saveSuccess:"保存成功",deleteSuccess:"删除成功",deleteConfirm:"此操作将永久删除选中数据，是否继续？",empty:"暂无数据",desc:"降序",asc:"升序",select:"选择",deselect:"取消选择",seeMore:"查看更多",hideContent:"隐藏内容",nonEmpty:"不能为空"},Ap={op:"操作",add:"新增",delete:"刪除",multiDelete:"刪除",update:"編輯",refresh:"刷新",info:"詳情",search:"搜尋",reset:"重置",clear:"清空",save:"保存",close:"取消",confirm:"確定",advSearch:"高級搜索",searchKey:"搜索關鍵字",placeholder:"請輸入",placeholderSelect:"請選擇",tips:"提示",saveSuccess:"保存成功",deleteSuccess:"刪除成功",deleteConfirm:"此操作將永久刪除選中數據，是否繼續？",empty:"暫無數據",desc:"降序",asc:"升序",select:"選擇",deselect:"取消選擇",seeMore:"查看更多",hideContent:"隱藏內容",nonEmpty:"不能為空"};const vr={en:kp,ja:zp,zhCn:Ep,zhTw:Ap};function Tp(e,t={}){const n=se({permission:{update:!0,page:!0,info:!0,list:!0,add:!0,delete:!0},dict:{primaryId:"id",api:{list:"list",add:"add",update:"update",delete:"delete",info:"info",page:"page"},pagination:{page:"page",size:"size"},search:{keyWord:"keyWord",query:"query"},sort:{order:"order",prop:"prop"},label:vr.zhCn},style:{colors:["#d42ca8","#1c109d","#6d17c3","#6dc9f1","#04c273","#06b31c","#f9f494","#aa7a24","#d57121","#e93f4d"],form:{labelPostion:"right",labelWidth:"100px",span:24},table:{border:!0,highlightCurrentRow:!0,autoHeight:!0,contextMenu:["refresh","check","edit","delete","order-asc","order-desc"],column:{align:"center",opWidth:160}}},events:{}},t);return n.events&&Qn.init(n.events),e.provide("__config__",n),n}function Pp(e){const t=(0,o.reactive)({isMini:!1,screen:"full"});function n(){const r=document.body.clientWidth;t.screen=r<768?"xs":r<992?"sm":r<1200?"md":r<1920?"xl":"full",t.isMini=t.screen==="xs"}window.addEventListener("resize",()=>{n(),Ot.emit("resize")}),n(),e.provide("__browser__",t)}function Bp(e,t={}){Pp(e),Tp(e,t)}function Fp(e){const{refs:t,setRefs:n}=Be();return({exposed:r,onOpen:a})=>{var l,s,u,d;const i=e||((u=(s=(l=r.config)==null?void 0:l.items)==null?void 0:s[0])==null?void 0:u.prop);let c;if(i){let f=function(m){m.forEach(v=>{v.prop==i&&i?v.component&&(v.component.ref?c=v.component.ref():v.component.ref=n(i)):f(v.children||[])})};f(((d=r.config)==null?void 0:d.items)||[]),a(()=>{var m,v;c&&(t[i]=c()),(v=(m=t[i])==null?void 0:m.focus)==null||v.call(m)})}}}var Mp={install(e,t){return ir.set("__CrudApp__",e),Bp(e,t),Op(e),{name:"cl-crud"}}},Dp=Mp;return ot}()})})(nt,nt.exports);var qp=nt.exports;const Yp=Up(qp);export{Yp as C,qp as i};
