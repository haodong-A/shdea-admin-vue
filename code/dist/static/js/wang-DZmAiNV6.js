import{E as y,T as B}from"./@wangeditor_editor-for-vue@5.1.12_@wangeditor_editor@5.1.23_vue@3.5.12_typescript@5.5.4_-C38MycLH.js";import{p as O}from"./index-Ghdj5350.js";import{u as E}from"./index-BEUtcyhA.js";import"./@wangeditor_plugin-link-card@1.0.0_@wangeditor_editor@5.1.23_snabbdom@3.6.2-D_kdJ7Fs.js";import"./@wangeditor_editor@5.1.23-BNs7_II4.js";import{q as S}from"./lodash-es@4.17.21-D6PnhKvy.js";import{d as V,w as v,A as N,a as p,c as h,K as b,O as U,i as c,_ as d}from"./@vue_runtime-core@3.5.12-Bt7zQ28n.js";import{s as I,r as L}from"./@vue_reactivity@3.5.12-vtUNgENk.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{q as T,p as A}from"./@vue_shared@3.5.12-UFe9jxSY.js";import"./@vue_runtime-dom@3.5.12-iSYHT88p.js";import"./element-plus@2.8.4_vue@3.5.12_typescript@5.5.4_-C7CHjwzj.js";import"./@vueuse_shared@9.13.0_vue@3.5.12_typescript@5.5.4_-u9BR5ga7.js";import"./@vueuse_core@9.13.0_vue@3.5.12_typescript@5.5.4_-B3H9WZsa.js";import"./@braintree_sanitize-url@6.0.4-BB1FEM6a.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.12_typescript@5.5.4_-DwlSpvcG.js";import"./@sxzz_popperjs-es@2.11.7-DkudPAZk.js";import"./@ctrl_tinycolor@3.6.1--gef7wIN.js";import"./dayjs@1.11.13-DXimfR00.js";import"./async-validator@4.2.5-DbzRl2Zc.js";import"./memoize-one@6.0.0-DQFWdy6B.js";import"./normalize-wheel-es@1.2.0-D2sExr9L.js";import"./@floating-ui_dom@1.6.11-Db5K7U0i.js";import"./@floating-ui_core@1.6.8-B67JZAQv.js";import"./@floating-ui_utils@0.2.8-BSxVqCX2.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-D8rsWRp7.js";import"./vue@3.5.12_typescript@5.5.4-kKmasoJt.js";import"./@vueuse_core@11.1.0_vue@3.5.12_typescript@5.5.4_-BKaerpSy.js";import"./@vueuse_shared@11.1.0_vue@3.5.12_typescript@5.5.4_-DXriuop5.js";import"./store@2.0.12-RoMfFez2.js";import"./mitt@3.0.1-C1z4c41a.js";import"./axios@1.7.7-CCb-kr4I.js";import"./nprogress@0.2.0-B8S133N7.js";import"./pinia@2.2.4_typescript@5.5.4_vue@3.5.12_typescript@5.5.4_-CVf9nHlw.js";import"./vue-demi@0.14.10_vue@3.5.12_typescript@5.5.4_-DvPnGcuI.js";import"./@bytemd_plugin-math@1.21.0_bytemd@1.21.0-Dc_JUVYX.js";import"./remark-math@5.1.1-C8vps_rM.js";import"./micromark-extension-math@2.1.2-StTlgfH1.js";import"./micromark-factory-space@1.1.0-C57A7NS2.js";import"./micromark-util-character@1.2.0-D-NaLusr.js";import"./katex@0.16.11-CvgdMzdh.js";import"./mdast-util-math@2.0.2-Boy2OOKg.js";import"./longest-streak@3.1.0-BHNUWYJP.js";import"./mdast-util-to-markdown@1.5.0-D9VzXa1u.js";import"./micromark-util-decode-string@1.1.0-CdHYbWAu.js";import"./decode-named-character-reference@1.0.2-C3-224fz.js";import"./micromark-util-decode-numeric-character-reference@1.1.0-DRnCnno4.js";import"./vue-router@4.4.5_vue@3.5.12_typescript@5.5.4_-DGEeQixy.js";import"./mockjs@1.1.0-hXCvQ4kl.js";import"./comm-DyJRlPK0.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.12_echarts@5.5.1_vue@3.5.12_typescript@5.5.4_-tmE62Ovn.js";import"./echarts@5.5.1-D8FyPvXx.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.0-CH1asNwC.js";const _=V({name:"cl-editor-wang",components:{Editor:y,Toolbar:B},props:{modelValue:String,mode:{type:String,default:"default"},height:{type:[String,Number],default:500},disabled:Boolean,preview:Boolean,isSpace:{type:Boolean,default:!1}},emits:["update:modelValue","change","focus","blur"],setup(o,{emit:n}){const{refs:m,setRefs:g}=E(),a=I(),r=L();v(()=>o.modelValue,e=>{r.value=e||""},{immediate:!0});const i={insertFn:null},l={placeholder:"请输入",hoverbarKeys:{link:{menuKeys:["editLink","unLink","viewLink","convertToLinkCard"]}},MENU_CONF:{uploadImage:{},uploadVideo:{customBrowseAndUpload(e){i.insertFn=e,m.video.open()}},convertToLinkCard:{async getLinkCardInfo(e,t){return new Promise(k=>{setTimeout(()=>{k({title:e,iconImgSrc:""})},100)})}}}};o.isSpace?l.MENU_CONF.uploadImage.customBrowseAndUpload=e=>{i.insertFn=e,m.image.open()}:l.MENU_CONF.uploadImage.customUpload=(e,t)=>{i.insertFn=t,m.image.upload(e)};function s(e){a.value=e,C()}function u(e){n("focus",e)}function f(e){n("blur",e)}function F(){r.value=="<p><br></p>"&&(r.value=""),n("update:modelValue",r.value),n("change",r.value)}function w(e){S(e)||(e=[e]),e.length>0&&e.forEach(t=>{i.insertFn&&i.insertFn(t.url)})}function C(){var e,t;o.disabled||o.preview?(e=a.value)==null||e.disable():(t=a.value)==null||t.enable()}return v(()=>[o.disabled,o.preview],C),N(()=>{const e=a.value;e!=null&&e.destroy()}),{refs:m,setRefs:g,Editor:a,value:r,onCreated:s,onFocus:u,onBlur:f,onChange:F,editorConfig:l,onFileConfirm:w,parsePx:O}}}),$={key:2,class:"upload-inner"};function K(o,n,m,g,a,r){const i=d("toolbar"),l=d("editor"),s=d("cl-upload-space"),u=d("cl-upload");return p(),h("div",{ref:o.setRefs("editor"),class:A(["cl-editor-wang",{disabled:o.disabled}])},[o.preview?U("",!0):(p(),b(i,{key:0,editor:o.Editor,mode:o.mode},null,8,["editor","mode"])),c(l,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=f=>o.value=f),"default-config":o.editorConfig,mode:o.mode,style:T({height:o.parsePx(o.height)}),onOnCreated:o.onCreated,onOnFocus:o.onFocus,onOnBlur:o.onBlur,onOnChange:o.onChange},null,8,["modelValue","default-config","mode","style","onOnCreated","onOnFocus","onOnBlur","onOnChange"]),c(s,{ref:o.setRefs("video"),accept:"video/*","show-btn":!1,onConfirm:o.onFileConfirm},null,8,["onConfirm"]),o.isSpace?(p(),b(s,{key:1,ref:o.setRefs("image"),accept:"image/*","show-btn":!1,onConfirm:o.onFileConfirm},null,8,["onConfirm"])):(p(),h("div",$,[c(u,{ref:o.setRefs("image"),accept:"image/*",onSuccess:o.onFileConfirm},null,8,["onSuccess"])]))],2)}const qo=R(_,[["render",K],["__scopeId","data-v-aae5250c"]]);export{qo as default};
